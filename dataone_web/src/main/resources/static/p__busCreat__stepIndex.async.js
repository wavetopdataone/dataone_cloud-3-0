(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"3dVZ":function(e,t,a){e.exports={"ant-collapse":"ant-collapse","ant-collapse-item":"ant-collapse-item","ant-collapse-header":"ant-collapse-header","ant-collapse-arrow":"ant-collapse-arrow","ant-collapse-arrow-icon":"ant-collapse-arrow-icon","ant-collapse-extra":"ant-collapse-extra","ant-collapse-no-arrow":"ant-collapse-no-arrow","ant-collapse-icon-position-right":"ant-collapse-icon-position-right","ant-collapse-anim-active":"ant-collapse-anim-active","ant-collapse-content":"ant-collapse-content","ant-collapse-content-box":"ant-collapse-content-box","ant-collapse-content-inactive":"ant-collapse-content-inactive","ant-collapse-borderless":"ant-collapse-borderless","ant-collapse-item-disabled":"ant-collapse-item-disabled",arrow:"arrow"}},"5ZHM":function(e,t,a){e.exports={firstStep:"antd-pro-pages-bus-creat-bus-creat-firstStep",connent:"antd-pro-pages-bus-creat-bus-creat-connent",connent1:"antd-pro-pages-bus-creat-bus-creat-connent1",nameInput:"antd-pro-pages-bus-creat-bus-creat-nameInput",sourcelist:"antd-pro-pages-bus-creat-bus-creat-sourcelist",checktag:"antd-pro-pages-bus-creat-bus-creat-checktag",detailBtn:"antd-pro-pages-bus-creat-bus-creat-detailBtn",iconDetail:"antd-pro-pages-bus-creat-bus-creat-iconDetail",targetBox:"antd-pro-pages-bus-creat-bus-creat-targetBox","steps-action":"antd-pro-pages-bus-creat-bus-creat-steps-action",detailForm:"antd-pro-pages-bus-creat-bus-creat-detailForm"}},"7aci":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAVCAYAAABCIB6VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVBN0EyNTgzMkFBNzExRUFBMTc4RkY1NjIzOUMzQTlBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVBN0EyNTg0MkFBNzExRUFBMTc4RkY1NjIzOUMzQTlBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUE3QTI1ODEyQUE3MTFFQUExNzhGRjU2MjM5QzNBOUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUE3QTI1ODIyQUE3MTFFQUExNzhGRjU2MjM5QzNBOUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5B6NdqAAABZElEQVR42rSVu0rEUBRF74T4BkWwGUQE0UZBwU4QdBTBD7C0sVLsfJWChYWPVhDEX5gPsLK2cESsBvGBrQja+Bg1cR04whVmkpuY2bByk5DZOex7ciY3uRcatAQr0AOBSScPHuEYdnwOC3AI21DSh3IJTUNdB2AXGsV4GQ5gM02Zpxt/rwv7psKyJuV3wYXJTlfQLMbf0JChsXgFnqmT/Cr3hmELFqFNN7ajlgGZvrGskvVlnHEeRqEdOmFQMoso7gu6Idb4BPr1B0bP/QjjgGo/XKIwlqnoU3FqN/trictedrmlFmTc5GpcgDL0wghcwz3cVUHu32A+7RLFK9xqf1f0vDUiY4np3cX4DGas66kkn3Rcxv9RWC9j6SjP0xEZZmg8C8++Vh1YrSXjs8/1ZXSELfmjmID5X+MXba0jGLIGflI9wRwbWvQ1Chn2Y3Cus+Eh7aC3u6KoQ2QdxpOYRulHgAEA06JNWqbqQowAAAAASUVORK5CYII="},"8txm":function(e,t,a){e.exports={"ant-steps":"ant-steps","ant-steps-item":"ant-steps-item","ant-steps-item-content":"ant-steps-item-content","ant-steps-item-title":"ant-steps-item-title","ant-steps-item-tail":"ant-steps-item-tail","ant-steps-item-icon":"ant-steps-item-icon","ant-steps-icon":"ant-steps-icon","ant-steps-item-description":"ant-steps-item-description","ant-steps-item-wait":"ant-steps-item-wait","ant-steps-icon-dot":"ant-steps-icon-dot","ant-steps-item-process":"ant-steps-item-process","ant-steps-item-finish":"ant-steps-item-finish","ant-steps-item-error":"ant-steps-item-error","ant-steps-next-error":"ant-steps-next-error","ant-steps-horizontal":"ant-steps-horizontal","ant-steps-label-vertical":"ant-steps-label-vertical","ant-steps-item-custom":"ant-steps-item-custom","ant-steps-vertical":"ant-steps-vertical","ant-steps-small":"ant-steps-small","ant-steps-label-horizontal":"ant-steps-label-horizontal","ant-steps-dot":"ant-steps-dot","ant-steps-flex-not-supported":"ant-steps-flex-not-supported"}},A0we:function(e,t,a){e.exports=a.p+"static/dameng.9bbc52a2.png"},BCMQ:function(e,t,a){"use strict";a("+L6B");var n=a("2/Rp"),s=(a("g9YV"),a("wCAj")),r=(a("sRBo"),a("kaz8")),o=a("eHn4"),i=a.n(o),l=a("gWZ8"),c=a.n(l),u=(a("rlhR"),a("5NDa"),a("5rEg")),d=a("p0pE"),_=a.n(d),m=a("2Taf"),p=a.n(m),h=a("vZ4D"),f=a.n(h),b=a("l4Ni"),g=a.n(b),y=a("ujKo"),v=a.n(y),E=a("MhPg"),w=a.n(E),k=(a("y8nQ"),a("Vl3Y")),C=a("Y/ft"),S=a.n(C),T=(a("OaEy"),a("2fM7")),O=a("q1tI"),x=a.n(O),B=a("QbIw"),A=a.n(B),I=x.a.createContext(),D=T.a.Option;var P=k.a.create()(function(e){var t=e.form,a=(e.index,S()(e,["form","index"]));return x.a.createElement(I.Provider,{value:t},x.a.createElement("tr",Object.assign({},a)))}),j=function(e){function t(){var e;return p()(this,t),(e=g()(this,v()(t).apply(this,arguments))).state={editing:!1},e.toggleEdit=function(){var t=!e.state.editing;e.setState({editing:t},function(){t&&e.input.focus()})},e.save=function(t){var a=e.props,n=a.record,s=a.handleSave;e.form.validateFields(function(a,r){a&&a[t.currentTarget.id]||(e.toggleEdit(),s(_()({},n,r)))})},e.renderCell=function(t){e.form=t;var a=e.props,n=a.children,s=a.dataIndex,r=a.record,o=a.title;return e.state.editing?x.a.createElement(k.a.Item,{style:{margin:0}},t.getFieldDecorator(s,{rules:[{required:!0,message:"".concat(o," is required.")}],initialValue:r[s]})(x.a.createElement(u.a,{ref:function(t){return e.input=t},onPressEnter:e.save,onBlur:e.save}))):x.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:12},onClick:e.toggleEdit},n)},e}return w()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),n=S()(e,["editable","dataIndex","title","record","index","handleSave","children"]);return x.a.createElement("td",Object.assign({},n),t?x.a.createElement(I.Consumer,null,this.renderCell):a)}}]),t}(x.a.Component),N=function(e){function t(e){var a;p()(this,t),(a=g()(this,v()(t).call(this,e))).loadCss=function(){for(var e=document.getElementsByClassName("disabledTd"),t=document.getElementsByTagName("tr"),n=0;n<t.length;n++)t[n].style.color="rgba(0, 0, 0, 0.65)",t[n].style.cursor="default";for(n=0;n<e.length;n++)e[n].parentElement.parentElement.style.color="rgba(0, 0, 0, 0.25)",e[n].parentElement.parentElement.style.cursor="not-allowed";for(var s=document.getElementsByClassName("ant-select-selection--single"),r=document.getElementsByClassName("ant-select-selection-selected-value"),o=0;o<s.length;o++)r[o].innerHTML=s[o].getAttribute("data-value");a.setState({typechangeList:[]})},a.handleAdd=function(){a.props.addFiled()},a.handleAdd1=function(e){var t=a.state,n=t.count,s=t.dataSource,r={key:"add_time",dest_field_name:e.dest_field_name,source_name:e.field_name,type:e.type,length:0,null:0,precision:0,desensitization_way:"",onlykey:"",operal:""};a.setState({dataSource:[].concat(c()(s),[r]),count:n+1,addtimeBtn:!1})},a.deleteLine=function(e){a.props.deleteLine(e)},a.noDeleteLine=function(e){a.props.noDeleteLine(e)},a.signalTuo=function(e){var t={source_field:e.source_name,dest_field:e.dest_field_name};a.props.showModal(4,t)},a.savechange=function(){for(var e=a.state.dataSource,t=a.state.typechangeList,n=0;n<t.length;n++)for(var s=0;s<e.length;s++)t[n][0]==e[s].source_name&&(e[s].type=t[n][1]);for(var r=[],o="",i=0;i<e.length;i++){if(1!=e[i].var_flag&&"add_time"!=e[i].key){var l=[e[i].source_name,e[i].dest_field_name,e[i].type,e[i].length,e[i].null,e[i].precision,e[i].typeSource,e[i].lengthSource,e[i].nullSource,e[i].precisionSource];r.push(l)}"add_time"==e[i].key&&1!=e[i].var_flag&&(o=e[i].dest_field_name)}a.props.save(0,r,a.state.valueRadio,o)},a.handleSave=function(e){var t=c()(a.state.dataSource),n=t.findIndex(function(t){return e.key===t.key}),s=t[n];t.splice(n,1,_()({},s,e)),a.setState({dataSource:t})},a.onchangeRadio=function(e){a.setState({valueRadio:[e[e.length-1]]})},a.onchangeSelect=function(e,t){document.getElementsByClassName("ant-select-selection-selected-value")[t.key].innerHTML=e;var n=a.state.typechangeList;0==n.length&&n.push([t.source_name,e]);for(var s=0;s<n.length;s++){if(n[s][0]==t.source_name){n[s][1]=e;break}s==n.length-1&&n.push([t.source_name,e])}a.setState(i()({typechangeList:n},t.source_name,e))};var n=[];return 1==e.dest_type?n=["XMLTYPE","CHAR","NCHAR","DECIMAL","BFILE","BLOB","CLOB","DATE","FLOAT","BINARY_FLOAT","BINARY_DOUBLE","INTERVAL","LONG","RAW","LONG RAW","NCLOB","NVARCHAR2","REAL","TIMESTAMP","INTERVAL DAY","INTERVAL YEAR","UROWID","ROWID","VARCHAR2","NUMBER","INTEGER"]:2==e.dest_type?n=["char","bool","real","float","date","datetime","bigint","int","decimal","bit","binary","varbinary","datetime","blob","double","int","integer","enum","longblob","longtext","mediumblob","mediumint","mediumtext","numeric","set","smallint","text","timestamp","time","tinyblob","tinyint","tinytext","varchar","year","point","linestring","polygon","geometry","multipoint","multilinestring","multipolygon","geometrycollection","nvarchar"]:3==e.dest_type?n=["image","text","uniqueidentifier","date","time","datetime2","datetimeoffset","tinyint","smallint","int","smalldatetime","money","datetime","float","sql_variant","ntext","bit","decimal","numeric","smallmoney","bigint","hierarchyid","geometry","geography","varbinary","varchar","binary","char","timestamp","nvarchar","nchar","xml","sysname"]:4==e.dest_type&&(n=["XMLTYPE","CHAR","NCHAR","DECIMAL","BLOB","CLOB","NCLOB","DATE","FLOAT","BINARY_FLOAT","BINARY_DOUBLE","INTERVAL","LONG","RAW","LONG RAW",,"NVARCHAR2","REAL","TIMESTAMP","INTERVAL DAY","INTERVAL YEAR","UROWID","ROWID","VARCHAR2","NUMBER","INTEGER","BFILE"]),a.state={dataSource:e.dataSource,job_id:e.job_id,dest_type:e.dest_type,selectedRowKeys:[],valueRadio:[],typechangeList:[],dbtypelist:n,addtimeBtn:1!=e.dataSource[e.dataSource.length-1].add_flag},a.columns1=[{title:"字段名称",dataIndex:"dest_field_name",key:"dest_field_name",width:70,editable:!0,render:function(e,t){return x.a.createElement("span",{className:1==t.var_flag?"disabledTd":"",style:{paddingLeft:1==t.var_flag||"add_time"==t.key?12:""},title:e},e)}},{title:"类型",dataIndex:"type",key:"type",width:100,render:function(e,t){return x.a.createElement(T.a,{onChange:function(e){return a.onchangeSelect(e,t)},"data-value":e,className:"selectChange",disabled:1==t.var_flag||"add_time"==t.key,title:e,size:"small",style:{width:100,border:"none",fontSize:12},value:t.type},a.state.dbtypelist.map(function(e,t){return x.a.createElement(D,{value:e,key:t},e)}))}},{title:"长度",dataIndex:"length",key:"length",editable:!0,width:30,render:function(e,t){return x.a.createElement("span",{style:{paddingLeft:1==t.var_flag||"add_time"==t.key?12:""},title:e},e)}},{title:"not null",dataIndex:"null",key:"null",editable:!0,width:60,render:function(e,t){return x.a.createElement("span",{style:{paddingLeft:1==t.var_flag||"add_time"==t.key?12:""},title:e},e)}},{title:"精度",dataIndex:"precision",key:"precision",width:30},{title:"脱敏",dataIndex:"desensitization_way",key:"desensitization_way",width:106,render:function(e,t){return x.a.createElement("span",null,x.a.createElement("span",null,"1"==e?"*隐藏":"2"==e?"固定值: "+t.remark:"3"==e?"随机值":"不脱敏")," ")}},{title:"主键",dataIndex:"onlykey",key:"onlykey",width:40,render:function(e,t){return x.a.createElement(r.a,{value:t.dest_field_name,disabled:1==t.var_flag||"add_time"==t.key})}},{title:"操作",dataIndex:"operal",key:"operal",width:80,render:function(e,t){return x.a.createElement("span",null,x.a.createElement("a",{onClick:function(e){return a.signalTuo(t)},disabled:1==t.var_flag||"add_time"==t.key},"脱敏"),"   ",x.a.createElement("a",{style:{display:1==t.var_flag?"inline-block":"none",color:"rgba(0, 0, 0, 0.65)"},onClick:function(e){return a.noDeleteLine(t)}},"撤销删除"),x.a.createElement("a",{style:{display:1==t.var_flag?"none":"inline-block",color:"#1890FF"},onClick:function(e){return a.deleteLine(t)}},"删除"))}}],a}return w()(t,e),f()(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({dataSource:e.dataSource,addtimeBtn:1!=e.dataSource[e.dataSource.length-1].add_flag})}},{key:"componentDidMount",value:function(){this.props.onRef(this),this.loadCss()}},{key:"render",value:function(){var e=this,t=this.state.dataSource,a={body:{row:P,cell:j}},o=this.columns1.map(function(t){return t.editable?_()({},t,{onCell:function(a){return{record:a,editable:"add_time"!=a.key&&1!=a.var_flag,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t});return x.a.createElement("div",{style:{width:"100%"}},x.a.createElement("div",{style:{width:"100%"}},x.a.createElement(r.a.Group,{onChange:this.onchangeRadio,value:this.state.valueRadio,style:{width:"100%"}},x.a.createElement(s.a,{size:"small",components:a,rowClassName:function(){return"editable-row"},dataSource:t,columns:o,pagination:!1}))),x.a.createElement("span",{style:{display:this.state.addtimeBtn?"block":"none"}},x.a.createElement(n.a,{type:"primary",shape:"circle",icon:"plus",size:"small",onClick:this.handleAdd}),"  添加字段"),x.a.createElement(n.a,{type:"primary",className:A.a.btnSubmite,style:{marginTop:10,marginBottom:10,float:"right"},onClick:this.savechange},"保存表配置"))}}]),t}(x.a.Component);t.a=N},FJo9:function(e,t,a){"use strict";a("cIOH"),a("8txm")},L41K:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("17x9"),o=a.n(r),i=a("QbLZ"),l=a.n(i),c=a("jo6Y"),u=a.n(c),d=a("iCc5"),_=a.n(d),m=a("FYw3"),p=a.n(m),h=a("mRg0"),f=a.n(h),b=a("i8i4"),g=a("TSYQ"),y=a.n(g),v=a("sEfC"),E=a.n(v);function w(){if("undefined"!=typeof window&&window.document&&window.document.documentElement){var e=window.document.documentElement;return"flex"in e.style||"webkitFlex"in e.style||"Flex"in e.style||"msFlex"in e.style}return!1}var k=function(e){function t(a){_()(this,t);var n=p()(this,e.call(this,a));return n.onStepClick=function(e){var t=n.props,a=t.onChange,s=t.current;a&&s!==e&&a(e)},n.calcStepOffsetWidth=function(){if(!w()){var e=Object(b.findDOMNode)(n);e.children.length>0&&(n.calcTimeout&&clearTimeout(n.calcTimeout),n.calcTimeout=setTimeout(function(){var t=(e.lastChild.offsetWidth||0)+1;n.state.lastStepOffsetWidth===t||Math.abs(n.state.lastStepOffsetWidth-t)<=3||n.setState({lastStepOffsetWidth:t})}))}},n.state={flexSupported:!0,lastStepOffsetWidth:0},n.calcStepOffsetWidth=E()(n.calcStepOffsetWidth,150),n}return f()(t,e),t.prototype.componentDidMount=function(){this.calcStepOffsetWidth(),w()||this.setState({flexSupported:!1})},t.prototype.componentDidUpdate=function(){this.calcStepOffsetWidth()},t.prototype.componentWillUnmount=function(){this.calcTimeout&&clearTimeout(this.calcTimeout),this.calcStepOffsetWidth&&this.calcStepOffsetWidth.cancel&&this.calcStepOffsetWidth.cancel()},t.prototype.render=function(){var e,t=this,a=this.props,r=a.prefixCls,o=a.style,i=void 0===o?{}:o,c=a.className,d=a.children,_=a.direction,m=a.labelPlacement,p=a.iconPrefix,h=a.status,f=a.size,b=a.current,g=a.progressDot,v=a.initial,E=a.icons,w=a.onChange,k=u()(a,["prefixCls","style","className","children","direction","labelPlacement","iconPrefix","status","size","current","progressDot","initial","icons","onChange"]),C=this.state,S=C.lastStepOffsetWidth,T=C.flexSupported,O=s.a.Children.toArray(d).filter(function(e){return!!e}),x=O.length-1,B=g?"vertical":m,A=y()(r,r+"-"+_,c,((e={})[r+"-"+f]=f,e[r+"-label-"+B]="horizontal"===_,e[r+"-dot"]=!!g,e[r+"-flex-not-supported"]=!T,e));return s.a.createElement("div",l()({className:A,style:i},k),n.Children.map(O,function(e,a){if(!e)return null;var s=v+a,o=l()({stepNumber:""+(s+1),stepIndex:s,prefixCls:r,iconPrefix:p,wrapperStyle:i,progressDot:g,icons:E,onStepClick:w&&t.onStepClick},e.props);return T||"vertical"===_||a===x||(o.itemWidth=100/x+"%",o.adjustMarginRight=-Math.round(S/x+1)),"error"===h&&a===b-1&&(o.className=r+"-next-error"),e.props.status||(o.status=s===b?h:s<b?"finish":"wait"),Object(n.cloneElement)(e,o)}))},t}(n.Component);k.propTypes={prefixCls:o.a.string,className:o.a.string,iconPrefix:o.a.string,direction:o.a.string,labelPlacement:o.a.string,children:o.a.any,status:o.a.string,size:o.a.string,progressDot:o.a.oneOfType([o.a.bool,o.a.func]),style:o.a.object,initial:o.a.number,current:o.a.number,icons:o.a.shape({finish:o.a.node,error:o.a.node}),onChange:o.a.func},k.defaultProps={prefixCls:"rc-steps",iconPrefix:"rc",direction:"horizontal",labelPlacement:"horizontal",initial:0,current:0,status:"process",size:"",progressDot:!1};var C=k;function S(e){return"string"==typeof e}var T=function(e){function t(){var a,n,s;_()(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return a=n=p()(this,e.call.apply(e,[this].concat(o))),O.call(n),s=a,p()(n,s)}return f()(t,e),t.prototype.renderIconNode=function(){var e,t=this.props,a=t.prefixCls,n=t.progressDot,r=t.stepNumber,o=t.status,i=t.title,l=t.description,c=t.icon,u=t.iconPrefix,d=t.icons,_=y()(a+"-icon",u+"icon",((e={})[u+"icon-"+c]=c&&S(c),e[u+"icon-check"]=!c&&"finish"===o&&d&&!d.finish,e[u+"icon-close"]=!c&&"error"===o&&d&&!d.error,e)),m=s.a.createElement("span",{className:a+"-icon-dot"});return n?"function"==typeof n?s.a.createElement("span",{className:a+"-icon"},n(m,{index:r-1,status:o,title:i,description:l})):s.a.createElement("span",{className:a+"-icon"},m):c&&!S(c)?s.a.createElement("span",{className:a+"-icon"},c):d&&d.finish&&"finish"===o?s.a.createElement("span",{className:a+"-icon"},d.finish):d&&d.error&&"error"===o?s.a.createElement("span",{className:a+"-icon"},d.error):c||"finish"===o||"error"===o?s.a.createElement("span",{className:_}):s.a.createElement("span",{className:a+"-icon"},r)},t.prototype.render=function(){var e,t=this.props,a=t.className,n=t.prefixCls,r=t.style,o=t.itemWidth,i=t.status,c=void 0===i?"wait":i,d=(t.iconPrefix,t.icon),_=(t.wrapperStyle,t.adjustMarginRight),m=(t.stepNumber,t.description),p=t.title,h=(t.progressDot,t.tailContent),f=(t.icons,t.stepIndex,t.onStepClick),b=t.onClick,g=u()(t,["className","prefixCls","style","itemWidth","status","iconPrefix","icon","wrapperStyle","adjustMarginRight","stepNumber","description","title","progressDot","tailContent","icons","stepIndex","onStepClick","onClick"]),v=y()(n+"-item",n+"-item-"+c,a,((e={})[n+"-item-custom"]=d,e)),E=l()({},r);o&&(E.width=o),_&&(E.marginRight=_);var w={};return f&&(w.role="button",w.tabIndex=0,w.onClick=this.onClick),s.a.createElement("div",l()({onClick:b},w,g,{className:v,style:E}),s.a.createElement("div",{className:n+"-item-tail"},h),s.a.createElement("div",{className:n+"-item-icon"},this.renderIconNode()),s.a.createElement("div",{className:n+"-item-content"},s.a.createElement("div",{className:n+"-item-title"},p),m&&s.a.createElement("div",{className:n+"-item-description"},m)))},t}(s.a.Component);T.propTypes={className:o.a.string,prefixCls:o.a.string,style:o.a.object,wrapperStyle:o.a.object,itemWidth:o.a.oneOfType([o.a.number,o.a.string]),status:o.a.string,iconPrefix:o.a.string,icon:o.a.node,adjustMarginRight:o.a.oneOfType([o.a.number,o.a.string]),stepNumber:o.a.string,stepIndex:o.a.number,description:o.a.any,title:o.a.any,progressDot:o.a.oneOfType([o.a.bool,o.a.func]),tailContent:o.a.any,icons:o.a.shape({finish:o.a.node,error:o.a.node}),onClick:o.a.func,onStepClick:o.a.func};var O=function(){var e=this;this.onClick=function(){var t=e.props,a=t.onClick,n=t.onStepClick,s=t.stepIndex;a&&a.apply(void 0,arguments),n(s)}},x=T;C.Step=x;var B=C,A=a("CtXQ"),I=a("wEI+");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function j(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}a.d(t,"a",function(){return L});var L=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=N(this,M(t).apply(this,arguments))).renderSteps=function(t){var a=t.getPrefixCls,s=a("steps",e.props.prefixCls),r=a("",e.props.iconPrefix),o={finish:n.createElement(A.a,{type:"check",className:"".concat(s,"-finish-icon")}),error:n.createElement(A.a,{type:"close",className:"".concat(s,"-error-icon")})};return n.createElement(B,P({icons:o},e.props,{prefixCls:s,iconPrefix:r}))},e}var a,s,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,n["Component"]),a=t,(s=[{key:"render",value:function(){return n.createElement(I.a,null,this.renderSteps)}}])&&j(a.prototype,s),r&&j(a,r),t}();L.Step=B.Step,L.defaultProps={current:0},L.propTypes={prefixCls:r.string,iconPrefix:r.string,current:r.number}},QFjh:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAAAKCAYAAADxVNNkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgwRjJBNTJDMURCRjExRUE5QjdFODdEQTMzQzcwNDE5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgwRjJBNTJEMURCRjExRUE5QjdFODdEQTMzQzcwNDE5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBGMkE1MkExREJGMTFFQTlCN0U4N0RBMzNDNzA0MTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBGMkE1MkIxREJGMTFFQTlCN0U4N0RBMzNDNzA0MTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5vJdRJAAADhklEQVR42txW21ITQRDt2UvCJqAhSgyoXMo3LCMvFHwA/oc8yZ/wFZS/gV+BLyLyghQYLEk2JJtsNnsbT+8lhGSBKn2wsKtmZ3Z6p7v39G3E7u4ueZ5H9Xp9xvP9OVVV84oQbs4wzI97ey2r0yGm9fV1ere1RY1mk6QQlJLAWvIchkRSRmtSFBonPsG7zA8zeJFMnBcYfF5KOfFNGAQUQo+m6yTHZDwpl+nT/j59OTykDzs75Lpu9C0Ty9JUlXRNo8FgMLQ7IQOynuKjS2w6Ememp6fp6Nu3CJfXq6vkOA71cY5laJChddptcly3HIThCgCLlRAVoLG0ubFxcX5+Xue9Z9Uq2bZND50YqiBxYAIbLysArILZxGgAUMv3feIxAu6QtF+NxhTmIWCpZ/r9Pr2p1ebf1mpX2LIBLFmWRSqQ/h+ASyMVkR3QNTBloSgcQL1ioXCJzGv5QRBOgAawZjMFQ1C32yWE6yxSx2axo8D+KxpP25TYtl6vRy7SSGSUh0xZ8Y9O7COjitX5+SKWCwPHaSqK0oBeN9XNYXMnEkJVKxD7GAdaUHCBrRLenw+dxXUowlhcAdwf2HmE9xfjYvBxG/xz8Gbg3ZcTzpeyA94Z5BSha0lMBkcXvFPUlALWy+N80zR7m5ub39fW1oxBv78iY7tGz3NtOYGlecyvxDVuSlbAJADl4IB52F3N6XoL71dgtDUUS4tLFnsq04tSslADglwZa89jbyoD32LiNeYbGfwgNYTlZaSMTH5Ez+LH/yJSR0/w7X5fXVxcpFKppH49OjIQHeP1SE+kqCLbvtsjWkoBZ5UhLQe8etpUPt8G20TRK0feuanIBu8s2gxDl6MKa5PTdaQspJ70JLpbFJGq6kzwpfREbDTrOx7ng7zIUCktvB3LBESZcqX0uRuy0aquH8e9dhgVolqp+Pvonuh69vvt7WP8D8wJ0vrFkR4kADgj+nlM4ZvlO9DzUePMgmFwmtrcDLWlpSX6fHBwYjuOv7CwMIc2KxIUWgDnlLhQ3iQvGbeRj2H9BT/4Ez5HFl8nupYVcve743w4eh7OcLPqGgcM5DQBvAlH+aOZqLEy7opA8wwh+BP3m7yqKB4ODIIwfDAdMbqLobPn8vlbm8UE0PG9UhurZS08GtjviFvSVYsui3yNiFPrvih68JTUZUpKBc8qZtwsgiZuCpe6rg/Ce0D/LcAApT3jr7TXiLEAAAAASUVORK5CYII="},Tkb3:function(e,t,a){"use strict";(function(e){a("sRBo");var n=a("kaz8"),s=(a("iQDF"),a("+eQT")),r=(a("5NDa"),a("5rEg")),o=(a("7Kak"),a("9yH6")),i=(a("+BJd"),a("mr32")),l=(a("+L6B"),a("2/Rp")),c=(a("Telt"),a("Tckk")),u=(a("5Dmo"),a("3S7+")),d=(a("Pwec"),a("CtXQ")),_=(a("Q9mQ"),a("diRs")),m=(a("IzEo"),a("bx4M")),p=(a("miYZ"),a("tsqr")),h=a("2Taf"),f=a.n(h),b=a("vZ4D"),g=a.n(b),y=a("l4Ni"),v=a.n(y),E=a("ujKo"),w=a.n(E),k=a("MhPg"),C=a.n(k),S=(a("y8nQ"),a("Vl3Y")),T=(a("2qtc"),a("kLXV")),O=(a("OaEy"),a("2fM7")),x=(a("Znn+"),a("ZTPi")),B=a("q1tI"),A=a.n(B),I=a("wd/R"),D=a.n(I),P=a("QbIw"),j=a.n(P),N=a("vDqi"),M=a.n(N),R=a("jHKv"),L=a("7aci"),W=a.n(L),U=(a("kQFk"),x.a.TabPane),K=O.a.Option,V=(T.a.confirm,S.a.Item),q="YYYY-MM-DD hh:mm:ss",z=S.a.create()(function(e){function t(e){var a;return f()(this,t),(a=v()(this,w()(t).call(this,e))).handleChange=function(e){a.setState({selectedList:e})},a.state={},a}return C()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,s=e.form,r=e.optionList,o=e.selectedList,i=s.getFieldDecorator;return A.a.createElement(T.a,{visible:t,title:"选择参与人",okText:"确认",onCancel:a,onOk:n},A.a.createElement(S.a,{style:{height:300}},A.a.createElement(V,{labelCol:{span:0},wrapperCol:{span:24},label:""},i("userId",{rules:[{required:!0,message:"请输入新建小组名称！"}],initialValue:o})(A.a.createElement(O.a,{mode:"multiple",placeholder:"请输入参与者用户名",onChange:this.handleChange,dropdownStyle:{overflow:"auto",width:"100%"},optionLabelProp:"label",dropdownMenuStyle:{top:0,left:20},autoFocus:!0,open:!0,className:j.a.nameInput},r.map(function(e){return A.a.createElement(O.a.Option,{value:e.user_id,key:e.key,label:e.login_name,disabled:"管理员"==e.role_name},A.a.createElement("span",{role:"img","aria-label":"China"},e.login_name))}))))))}}]),t}(A.a.Component)),F=function(t){function a(t){var n;return f()(this,a),(n=v()(this,w()(a).call(this,t))).state={optionList:[],selectedNum:[]},n.loadSourceChange=function(){var t={jobId:n.state.job_id};M()({method:"post",url:e.constants.httpType+e.constants.website+"/data_change_settings/check_data_change/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data[0];n.setState({changevalue1:t.delete_syncing_source,changevalue2:t.newtable_source,changevalue3:t.delete_sync,changevalue4:t.new_sync})}).catch(function(e){})},n.loaderrorChange=function(){var t={jobId:n.state.job_id};M()({method:"post",url:e.constants.httpType+e.constants.website+"/error_queue_settings/check_error_queue/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.setState({pause_setup:t.pause_setup,pre_steup:t.pre_steup,warn_setup:t.warn_setup})}).catch(function(e){})},n.loademailChange=function(){var t={jobId:n.state.job_id};M()({method:"post",url:e.constants.httpType+e.constants.website+"/mailnotify_settings/check_mailnotify/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data[0];n.setState({job_error:1==t.job_error,source_change:1==t.source_change,error_queue_pause:1==t.error_queue_pause,error_queue_alert:1==t.error_queue_alert})}).catch(function(e){})},n.loadInNumber=function(){var t={jobId:n.state.job_id};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobrela/selUserByJobId/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var t=e.data.data,a=[],s=0;s<t.length;s++)a.push(t[s].id),t[s].color=n.color16();n.setState({selectedList:a,selectedNum:t})}).catch(function(e){})},n.color16=function(){var e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),a=Math.floor(256*Math.random());return"#"+e.toString(16)+t.toString(16)+a.toString(16)},n.loadNumber=function(){M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_user/alluser/",headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var t=e.data.data,a=[],s=0;s<t.length;s++)t[s].key=s,a.push(t[s].user_id);n.setState({optionList:t})}).catch(function(e){})},n.LoadingDetail=function(t){var a={id:t};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobrela/check_jobinfo/",data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.setState({job_name:t.job_name,dest_name:t.dest_name,source_name:t.source_name,source_type:t.source_type,binlogIf:1==t.source_type?"3":"2"})}).catch(function(e){})},n.Loadingpei=function(t){var a={job_id:t};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobinfo/check_jobinfo/",data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data[0],a=t.max_source_read,s="KB/秒";""!=t.max_source_read&&t.max_source_read.indexOf("KB")>-1?(a=t.max_source_read.split("K")[0],s="KB/秒"):""!=t.max_source_read&&t.max_source_read.indexOf("MB")>-1&&(a=t.max_source_read.split("M")[0],s="MB/秒");var r=t.max_source_read_to;""!=t.max_source_read_to&&t.max_source_read_to.indexOf("行")>-1&&(r=t.max_source_read_to.split("行")[0]);var o=t.max_dest_write_to;""!=t.max_dest_write_to&&t.max_dest_write_to.indexOf("行")>-1&&(o=t.max_dest_write_to.split("行")[0]);var i=t.max_dest_write,l="KB/秒";""!=t.max_dest_write&&t.max_dest_write.indexOf("KB")>-1?(i=t.max_dest_write.split("K")[0],l="KB/秒"):""!=t.max_dest_write&&t.max_dest_write.indexOf("MB")>-1&&(i=t.max_dest_write.split("M")[0],l="MB/秒"),n.setState({valueBackWay:t.sync_range,passWayValue:t.sync_way,begin_time:t.begin_time,end_time:t.end_time,read_frequency:t.read_frequency,changevalue5:t.read_begin,ifpassWay:t.data_enc,scn:t.log_miner_scn,Binlog_Postion:t.binlog_postion,Binlog_file:t.binlog,source_read_concurrent_num:t.source_read_concurrent_num,dest_write_concurrent_num:t.dest_write_concurrent_num,max_dest_write:i,max_dest_write_to:o,max_source_read:a,max_source_read1:s,max_dest_write1:l,max_source_read_to:r,ifmax_source_read:""!=t.max_source_read,ifmax_source_read_to:""!=t.max_source_read_to,ifmax_dest_write:""!=t.max_dest_write,ifmax_dest_write_to:""!=t.max_dest_write_to}),1==t.read_begin&&2==t.sync_range&&1==t.source_type?n.setState({ifOracle:1}):1==t.read_begin&&2==t.sync_range&&2==t.source_type&&n.setState({ifOracle:2})}).catch(function(e){})},n.startChange=function(e,t){n.setState({begin_time:t})},n.endChange=function(e,t){n.setState({end_time:t})},n.readWay=function(e){n.setState({valueReadWay:e.target.value})},n.valueBackWay=function(e,t){switch(e){case 0:n.setState({valueBackWay:t.target.value}),2==t.target.value&&1==n.state.source_type||3==t.target.value&&1==n.state.source_type?n.setState({passWayValue:3,read_frequency:60,changevalue5:0,ifOracle:0}):2==t.target.value&&2==n.state.source_type||3==t.target.value&&2==n.state.source_type?n.setState({passWayValue:2,read_frequency:60,changevalue5:0,ifOracle:0}):1==t.target.value&&n.setState({passWayValue:0});break;case 1:n.setState({passWayValue:t.target.value}),1==n.state.valueBackWay&&n.setState({read_frequency:60});break;case 2:n.setState({ifpassWay:t.target.value});break;case 3:n.setState({changevalue1:t.target.value});break;case 4:n.setState({changevalue2:t.target.value});break;case 5:n.setState({changevalue3:t.target.value});break;case 6:n.setState({changevalue4:t.target.value});break;case 7:1==t.target.value&&1==n.state.source_type?n.setState({ifOracle:1,scn:"",Binlog_Postion:"",Binlog_file:""}):1==t.target.value&&2==n.state.source_type?n.setState({ifOracle:2,Binlog_Postion:"",Binlog_file:"",scn:""}):n.setState({ifOracle:0,Binlog_Postion:"",Binlog_file:"",scn:""}),n.setState({changevalue5:t.target.value});break;case 8:n.setState({read_frequency:t.target.value});break;case 9:n.setState({pre_steup:t.target.value});break;case 10:n.setState({warn_setup:t.target.value});break;case 11:n.setState({pause_setup:t.target.value});break;case 12:n.setState({job_error:t.target.checked});break;case 13:n.setState({error_queue_alert:t.target.checked});break;case 14:n.setState({error_queue_pause:t.target.checked});break;case 15:n.setState({source_change:t.target.checked});break;case 16:n.setState({Binlog_Postion:t.target.value});break;case 17:n.setState({Binlog_file:t.target.value});break;case 18:n.setState({scn:t.target.value});break;case 19:n.setState({source_read_concurrent_num:t.target.value});break;case 20:n.setState({max_source_read:t.target.value});break;case 21:n.setState({max_source_read_to:t.target.value});break;case 22:n.setState({dest_write_concurrent_num:t.target.value});break;case 23:n.setState({max_dest_write:t.target.value});break;case 24:n.setState({max_dest_write_to:t.target.value});break;case 25:n.setState({max_source_read1:t});break;case 26:n.setState({max_dest_write1:t});break;case 27:n.setState({ifmax_source_read:t.target.checked});break;case 28:n.setState({ifmax_source_read_to:t.target.checked});break;case 29:n.setState({ifmax_dest_write:t.target.checked});break;case 30:n.setState({ifmax_dest_write_to:t.target.checked})}},n.showModal=function(){n.setState({visible:!0,formValues:{}})},n.handleCancel=function(){n.setState({visible:!1,formValuesBusUpdate:{}})},n.handleChange=function(e){},n.handleCreate=function(){n.formRef.props.form.validateFields(function(e,t){e||n.handleAdd(t)})},n.handleAdd=function(t){var a={userId:t.userId,jobId:n.state.job_id},s=e.constants.httpType+e.constants.website+"/sys_jobrela/addUserByJobId/";M()({method:"post",url:s,data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),1==e.data.status)p.a.success("参与人设置成功"),n.loadInNumber();else if(0==e.data.status)return void p.a.error(e.data.message);n.setState({visible:!1})}).catch(function(e){})},n.saveFormRef=function(e){n.formRef=e},n.state={valueBackWay:1,ifpassWay:0,passWayValue:0,showQuan:0,changevalue1:0,changevalue2:0,changevalue3:0,changevalue4:0,changevalue5:0,value:1,readbegin:0,job_id:t.id,optionList:[],ifshow:!1,selectedNum:[],selectedList:[],pre_steup:1e5,warn_setup:.5,pause_setup:1,job_error:!0,error_queue_pause:!0,error_queue_alert:!0,source_change:!0,ifOracle:0,begin_time:"2019-01-01 00:00:00",end_time:"2019-01-01 00:00:00",max_source_read:3,max_source_read1:"KB/秒",max_dest_write:3,max_dest_write1:"KB/秒",ifmax_source_read:!0,ifmax_source_read_to:!0,max_source_read_to:2500,ifmax_dest_write:!0,ifmax_dest_write_to:!0,max_dest_write_to:2500,source_read_concurrent_num:1,dest_write_concurrent_num:2},n}return C()(a,t),g()(a,[{key:"componentDidMount",value:function(){this.LoadingDetail(this.state.job_id),this.Loadingpei(this.state.job_id),this.loadNumber(),this.loadInNumber(),this.loadSourceChange(),this.loaderrorChange(),this.loademailChange(),this.props.onRef(this)}},{key:"baseSave",value:function(){var t=this;if(1==this.state.changevalue5&&2==this.state.source_type&&2==this.state.valueBackWay){if(""==this.state.Binlog_file||""==this.state.Binlog_Postion||void 0==this.state.Binlog_file||void 0==this.state.Binlog_Postion)return void p.a.error("请填写自定义读取起点1！")}else if(1==this.state.changevalue5&&1==this.state.source_type&&2==this.state.valueBackWay&&(void 0==this.state.scn||""==this.state.scn))return void p.a.error("请填写自定义读取起点！");if(""==this.state.max_source_read&&this.state.ifmax_source_read)p.a.error("请填写读取速率限制值！");else if(""==this.state.max_source_read_to&&this.state.ifmax_source_read_to)p.a.error("请填写读取速率限制值！");else if(""==this.state.max_dest_write&&this.state.ifmax_dest_write)p.a.error("请填写写入速率限制值！");else if(""==this.state.max_dest_write_to&&this.state.ifmax_dest_write_to)p.a.error("请填写写入速率限制值！");else{var a={job_id:this.state.job_id,players:"",data_enc:this.state.ifpassWay,sync_range:this.state.valueBackWay,sync_way:this.state.passWayValue,read_begin:this.state.changevalue5,log_miner_scn:this.state.scn,binlog_postion:this.state.Binlog_Postion,binlog:this.state.Binlog_file,source_type:this.state.source_type,read_frequency:this.state.read_frequency,begin_time:this.state.begin_time,end_time:this.state.end_time,change_tranking:"",source_read_concurrent_num:this.state.source_read_concurrent_num,max_source_read:this.state.ifmax_source_read?this.state.max_source_read+this.state.max_source_read1:"",max_source_read_to:this.state.ifmax_source_read_to?this.state.max_source_read_to+"行/秒":"",dest_write_concurrent_num:this.state.dest_write_concurrent_num,max_dest_write:this.state.ifmax_dest_write?this.state.max_dest_write+this.state.max_dest_write1:"",max_dest_write_to:this.state.ifmax_dest_write_to?this.state.max_dest_write_to+"行/秒":""};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobinfo/edit_jobinfo/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1!=e.data.status&&2!=e.data.status||t.sourceSave()}).catch(function(e){})}}},{key:"sourceSave",value:function(){var t=this,a={job_id:this.state.job_id,delete_syncing_source:this.state.changevalue1,delete_sync:this.state.changevalue3,new_sync:this.state.changevalue4,newtable_source:this.state.changevalue2};M()({method:"post",url:e.constants.httpType+e.constants.website+"/data_change_settings/edit_data_change/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1!=e.data.status&&2!=e.data.status||t.errorSave()}).catch(function(e){})}},{key:"errorSave",value:function(){var t=this,a={job_id:this.state.job_id,pause_setup:this.state.pause_setup,pre_steup:this.state.pre_steup,warn_setup:this.state.warn_setup};M()({method:"post",url:e.constants.httpType+e.constants.website+"/error_queue_settings/edit_error_queue/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1!=e.data.status&&2!=e.data.status||t.emailSave()}).catch(function(e){})}},{key:"emailSave",value:function(){var t=this,a={job_id:this.state.job_id,job_error:1==this.state.job_error?1:0,source_change:1==this.state.source_change?1:0,error_queue_pause:1==this.state.error_queue_pause?1:0,error_queue_alert:1==this.state.error_queue_alert?1:0};M()({method:"post",url:e.constants.httpType+e.constants.website+"/mailnotify_settings/edit_mailnotify/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1!=e.data.status&&2!=e.data.status||t.props.nextStep()}).catch(function(e){})}},{key:"render",value:function(){var e=this;return A.a.createElement("div",{className:j.a.connent2},A.a.createElement("h1",{style:{fontWeight:600,fontSize:15}},this.state.job_name),A.a.createElement(m.a,{title:A.a.createElement("span",null,"参与人  ",A.a.createElement(_.a,{placement:"right",content:"参与人拥有该数据任务的浏览权限或编辑权限，并收到该任务的所有通知。",trigger:"hover"},A.a.createElement(d.a,{type:"question-circle",style:{color:"#BDC0CA",cursor:"pointer"}}))),key:"1"},A.a.createElement("div",{style:{overflow:"hidden",marginTop:8}},A.a.createElement("span",{style:{float:"left"}},this.state.selectedNum.map(function(e){return A.a.createElement("span",{style:{marginRight:20,cursor:"pointer"},key:e.id},A.a.createElement(u.a,{key:e.id,placement:"bottom",title:A.a.createElement("span",null,A.a.createElement("h4",null,"用户：",e.login_name),A.a.createElement("h4",null,"邮箱：",e.email))},A.a.createElement(c.a,{key:e.id,className:"head-example",style:{color:"#fff",backgroundColor:e.color,verticalAlign:"middle",fontSize:18},size:"small"},e.login_name.substr(0,1))))})),A.a.createElement(l.a,{title:"选择参与人",type:"primary",shape:"circle",icon:"plus",size:"small",onClick:this.showModal,style:{marginLeft:30,marginTop:2,float:"left",cursor:"pointer",display:2==localStorage.getItem("role_id")?"block":"none"}}))),this.state.visible?A.a.createElement(z,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,optionList:this.state.optionList,selectedList:this.state.selectedList,onCreate:function(){return e.handleCreate()}}):null,A.a.createElement("br",null),A.a.createElement(m.a,{title:"数据源设置",key:"2"},A.a.createElement(i.a,{className:j.a.checktag,style:{background:"#fff",borderStyle:"dashed",cursor:"default",margin:"10px 0 16px 0"}},"  ",this.state.source_name,A.a.createElement("span",{className:j.a.detailBtn,style:{color:"#999"}},"数据源  ")),A.a.createElement("div",null,"同步范围：     ",A.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(0,t)},value:this.state.valueBackWay,defaultValue:1},A.a.createElement(o.a,{value:1},"存量"),A.a.createElement(o.a,{value:2},"增量"),A.a.createElement(o.a,{value:3},"存量 + 增量"))),A.a.createElement("br",null),A.a.createElement("div",{className:j.a.tabs,style:{display:1==this.state.valueBackWay?"block":"none"}},"读取方式：     ",A.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(1,t)},value:this.state.passWayValue,defaultValue:0},A.a.createElement(o.a,{value:0},"同步一次"),A.a.createElement(o.a,{value:1},"定时读取"),A.a.createElement(o.a,{value:4},"时间范围读取")),A.a.createElement("br",null),A.a.createElement("div",{className:1==this.state.passWayValue?"show":"hide",style:{marginTop:18}},"读取频率：    ",A.a.createElement(r.a,{className:j.a.borBottpm,onChange:function(t){return e.valueBackWay(8,t)},value:this.state.read_frequency}),"    S")),A.a.createElement("div",{className:j.a.tabs,style:{display:2==this.state.valueBackWay||3==this.state.valueBackWay?"block":"none"}},"读取方式：     ",A.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(1,t)},value:this.state.passWayValue},A.a.createElement(o.a,{value:2,className:2==this.state.source_type?"show":"hide"},"BINLOG"),A.a.createElement(o.a,{value:3,className:1==this.state.source_type?"show":"hide"},"LogMiner")),A.a.createElement("div",{style:{marginTop:18}},"读取频率：    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(8,t)},value:this.state.read_frequency,className:j.a.borBottpm}),"    S"),A.a.createElement("div",{style:{marginTop:18}},"读取起点：     ",A.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(7,t)},value:this.state.changevalue5,defaultValue:0},A.a.createElement(o.a,{value:0},"激活任务为起点"),A.a.createElement(o.a,{value:1,style:{display:2==this.state.valueBackWay?"inline-block":"none"}},"自定义"))),A.a.createElement("span",{style:{display:2==this.state.ifOracle?"block":"none",marginTop:18}},"Binlog Postion：    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(16,t)},value:this.state.Binlog_Postion,className:j.a.borBottpm}),"     Binlog文件名称：    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(17,t)},value:this.state.Binlog_file,className:j.a.borBottpm}),"    "),A.a.createElement("span",{style:{display:1==this.state.ifOracle?"block":"none"}},"LogMiner scn ：    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(18,t)},value:this.state.scn,className:j.a.borBottpm}),"    ")),A.a.createElement("div",{className:j.a.tabs,style:{display:1==this.state.valueBackWay&&4==this.state.passWayValue?"block":"none",marginTop:18}},"开始时间：     ",A.a.createElement(s.a,{showTime:!0,format:q,value:""!=this.state.begin_time?D()(this.state.begin_time,q):"",onChange:this.startChange}),"     结束时间：     ",A.a.createElement(s.a,{showTime:!0,format:q,value:""!=this.state.end_time?D()(this.state.end_time,q):"",onChange:this.endChange})),A.a.createElement("br",null),A.a.createElement("div",null,"数据源：",A.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(2,t)},value:this.state.ifpassWay,defaultValue:0},A.a.createElement(o.a,{value:0},"不加密"),A.a.createElement(o.a,{value:1},"加密"))),A.a.createElement("br",null),A.a.createElement("div",null,"读取并发数量：    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(19,t)},value:this.state.source_read_concurrent_num,className:j.a.borBottpm})),A.a.createElement("br",null),A.a.createElement("div",null,"读取速率限制：",A.a.createElement(n.a,{checked:this.state.ifmax_source_read,onChange:function(t){return e.valueBackWay(27,t)}},"不高于    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(20,t)},value:this.state.max_source_read,className:j.a.borBottpm}),"    ",A.a.createElement(O.a,{style:{width:120},value:this.state.max_source_read1,onChange:function(t){return e.valueBackWay(25,t)}},A.a.createElement(K,{value:"KB/秒"},"KB/秒"),A.a.createElement(K,{value:"MB/秒"},"MB/秒"))),A.a.createElement(n.a,{checked:this.state.ifmax_source_read_to,onChange:function(t){return e.valueBackWay(28,t)}},"不高于    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(21,t)},value:this.state.max_source_read_to,className:j.a.borBottpm}),"    行/秒"))),A.a.createElement("br",null),A.a.createElement(m.a,{title:"数据目的地设置",key:"3"},A.a.createElement(i.a,{className:j.a.checktag,style:{background:"#fff",borderStyle:"dashed",cursor:"default",margin:"10px 0 16px 0"}},"  ",this.state.dest_name,A.a.createElement("span",{className:j.a.detailBtn,style:{color:"#999"}},"目的地  ")),A.a.createElement("br",null),A.a.createElement("div",null,"写入并发数量：    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(22,t)},value:this.state.dest_write_concurrent_num,className:j.a.borBottpm})),A.a.createElement("br",null),A.a.createElement("div",null,"写入速率限制：",A.a.createElement(n.a,{checked:this.state.ifmax_dest_write,onChange:function(t){return e.valueBackWay(29,t)}},"不高于    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(23,t)},value:this.state.max_dest_write,className:j.a.borBottpm}),"    ",A.a.createElement(O.a,{value:this.state.max_dest_write1,onChange:function(t){return e.valueBackWay(26,t)},style:{width:120}},A.a.createElement(K,{value:"KB/秒"},"KB/秒"),A.a.createElement(K,{value:"MB/秒"},"MB/秒"))),A.a.createElement(n.a,{checked:this.state.ifmax_dest_write_to,onChange:function(t){return e.valueBackWay(30,t)}},"不高于    ",A.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(24,t)},value:this.state.max_dest_write_to,className:j.a.borBottpm}),"    行/秒"))),A.a.createElement("br",null),A.a.createElement(m.a,{className:j.a.sourceCard,key:"4"},A.a.createElement(x.a,{defaultActiveKey:"1",style:{marginBottom:10},className:j.a.changeTab},A.a.createElement(U,{tab:"数据源变化设置",key:"1"},A.a.createElement("p",{style:{color:"#408AFF"}},A.a.createElement("img",{className:j.a.messageBox,src:W.a}),"用户可在此处设置在数据任务同步过程中，数据源的表、字段变化的处理方式。"),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement("h4",null,"数据源删除正在同步的表  ",A.a.createElement(_.a,{placement:"right",content:"已存在表被重命名，系统会认为表被删除，重命名的表识别为新表。",trigger:"hover"},A.a.createElement(d.a,{type:"question-circle",style:{color:"#BDC0CA",cursor:"pointer"}}))),A.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(3,t)},value:this.state.changevalue1},A.a.createElement(o.a,{value:0},"删除目标表"),A.a.createElement(o.a,{value:1},"不删除目标表"),A.a.createElement(o.a,{value:2},"暂停数据任务"))),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement("h4",null,"数据源新增表"),A.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(4,t)},value:this.state.changevalue2},A.a.createElement(o.a,{value:0},"同步新表"),A.a.createElement(o.a,{value:1},"不同步新表 "),A.a.createElement(o.a,{value:2},"暂停数据任务"))),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement("h4",null,"同步的字段被删除"),A.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(5,t)},value:this.state.changevalue3},A.a.createElement(o.a,{value:0},"继续同步，目的地该字段被删除 "),A.a.createElement(o.a,{value:1},"暂停数据任务"))),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement("h4",null,"同步的表发现新的字段"),A.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(6,t)},value:this.state.changevalue4,defaultValue:0},A.a.createElement(o.a,{value:0},"同步新增字段到目的地"),A.a.createElement(o.a,{value:1},"暂停数据任务")))),A.a.createElement(U,{tab:"错误队列设置",key:"2"},A.a.createElement("p",{style:{color:"#408AFF"}},A.a.createElement("img",{className:j.a.messageBox,src:W.a}),"数据任务同步时，错误队列将实时收集如脏数据、配置规则有误等数据相关错误，后置处理数据错误，避免数据无法写入目的地导致任务暂停的问题。"),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement("h4",null,"预处理设置  ",A.a.createElement(_.a,{placement:"right",content:"与处理机制能保证错误率的平均度，同时保证低数据量的任务的正常运行。",trigger:"hover"},A.a.createElement(d.a,{type:"question-circle",style:{color:"#BDC0CA",cursor:"pointer"}}))),A.a.createElement(o.a.Group,{defaultValue:1},A.a.createElement(o.a,{value:1},"每个表预处理",A.a.createElement(r.a,{className:j.a.errorInput,onChange:function(t){return e.valueBackWay(9,t)},value:this.state.pre_steup})," 行"))),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement("h4",null,"预警设置  ",A.a.createElement(_.a,{placement:"right",content:"当该任务的任意表的错误率达到指定值时，系统将发出预警通知。",trigger:"hover"},A.a.createElement(d.a,{type:"question-circle",style:{color:"#BDC0CA",cursor:"pointer"}}))),A.a.createElement(o.a.Group,{defaultValue:1},A.a.createElement(o.a,{value:1},"错误率大于",A.a.createElement(r.a,{className:j.a.errorInput,onChange:function(t){return e.valueBackWay(10,t)},value:this.state.warn_setup}),"%，发出预警通知"))),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement("h4",null,"暂停设置  ",A.a.createElement(_.a,{placement:"right",content:"当该任务的任意表的错误率达到指定值时，数据任务会被暂停，并发出通知。",trigger:"hover"},A.a.createElement(d.a,{type:"question-circle",style:{color:"#BDC0CA",cursor:"pointer"}}))),A.a.createElement(o.a.Group,{defaultValue:1},A.a.createElement(o.a,{value:1},"错误率大于",A.a.createElement(r.a,{className:j.a.errorInput,onChange:function(t){return e.valueBackWay(11,t)},value:this.state.pause_setup}),"%，暂停该数据任务，并通知参与人 ")))),A.a.createElement(U,{tab:"邮件通知设置",key:"3"},A.a.createElement("p",{style:{color:"#408AFF"}},A.a.createElement("img",{className:j.a.messageBox,src:W.a}),"针对数据任务重要信息，系统支持通过邮件方式提醒该数据任务的参与人，用户可根据需求设置是否接受邮件通知"),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement(n.a,{checked:this.state.job_error,onChange:function(t){return e.valueBackWay(12,t)}},"数据任务错误信息"),A.a.createElement("p",{className:j.a.emailP},"指会导致数据任务暂停的错误信息，包含：1.无法连接数据库；2.无法同步数据；3.数据源表，字段的变化；4.系统问题等")),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement(n.a,{checked:this.state.error_queue_alert,onChange:function(t){return e.valueBackWay(13,t)}},"错误队列预警"),A.a.createElement("p",{className:j.a.emailP},"只根据用户设置的错误队列预警机制")),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement(n.a,{checked:this.state.error_queue_pause,onChange:function(t){return e.valueBackWay(14,t)}},"错误队列暂停"),A.a.createElement("p",{className:j.a.emailP},"只根据用户设置的错误队列暂停机制")),A.a.createElement("hr",null),A.a.createElement("div",{className:j.a.tabs},A.a.createElement(n.a,{checked:this.state.source_change,onChange:function(t){return e.valueBackWay(15,t)}},"数据源变化通知"),A.a.createElement("p",{className:j.a.emailP},"根据数据源表，字段发生变化"))))))}}]),a}(B.PureComponent);t.a=F}).call(this,a("yLpj"))},bhxe:function(e,t,a){"use strict";(function(e){a("g9YV");var n=a("wCAj"),s=(a("IzEo"),a("bx4M")),r=(a("jCWc"),a("kPKH")),o=(a("Pwec"),a("CtXQ")),i=(a("14J3"),a("BMrR")),l=(a("+BJd"),a("mr32")),c=(a("+L6B"),a("2/Rp")),u=(a("miYZ"),a("tsqr")),d=a("2Taf"),_=a.n(d),m=a("vZ4D"),p=a.n(m),h=a("l4Ni"),f=a.n(h),b=a("ujKo"),g=a.n(b),y=a("MhPg"),v=a.n(y),E=(a("y8nQ"),a("Vl3Y")),w=(a("2qtc"),a("kLXV")),k=(a("5NDa"),a("5rEg")),C=(a("ozfa"),a("MJZm")),S=(a("sRBo"),a("kaz8")),T=(a("fu2T"),a("gK9i")),O=(a("OaEy"),a("2fM7")),x=a("q1tI"),B=a.n(x),A=a("QbIw"),I=a.n(A),D=a("usdK"),P=a.n(D),j=a("BCMQ"),N=a("vDqi"),M=a.n(N),R=a("jHKv"),L=(a("kQFk"),a("QFjh")),W=a.n(L),U=(O.a.Option,T.a.Panel),K=S.a.Group,V=C.a.TreeNode,q=k.a.Search,z=(w.a.confirm,E.a.Item,E.a.create()(function(t){function a(t){var n;return _()(this,a),(n=f()(this,g()(a).call(this,t))).LoadingDetail=function(){var t={type:n.state.resdata.type,dbname:n.state.resdata.dbname,host:n.state.resdata.host,password:n.state.resdata.password,port:n.state.resdata.port,schema:n.state.resdata.schema,user:n.state.resdata.user,name:n.state.source_name};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/link_data_table?job_id="+n.state.job_id,data:t,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),0!=e.data.status){for(var t=e.data.data,a=[],s=0;s<t.length;s++)a.push(t[s]);2==n.state.source_type&&n.setState({mysqlTables:a,plainOptions:a,checkedList:a,listLength:a.length,tableNameList:a,checkAll:!0}),1==n.state.source_type&&n.setState({oracleTables:a,plainOptions:a,checkedList:a,listLength:a.length,tableNameList:a,checkAll:!0})}else u.a.error(e.data.message)}).catch(function(e){})},n.onOk=function(t){if(0!=n.state.tableNameList.length){var a={job_id:n.state.job_id,source_table:n.state.tableNameList.join(",")};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/edit_tablerule/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),0!=e.data.status?1!=e.data.status&&2!=e.data.status||(u.a.success("保存成功"),n.props.onCancel(1),n.props.onCreate()):u.a.error(e.data.message)}).catch(function(e){})}else u.a.error("请选择要保存的源表")},n.search=function(t){var a={jobId:n.state.job_id,tableName:t};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/findByAllTableName/",data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),0!=e.data.status){for(var t=e.data.data,a=[],s=0;s<t.length;s++)a.push(t[s]);2==n.state.source_type&&n.setState({mysqlTables:a,plainOptions:a,checkedList:n.state.tableNameList}),1==n.state.source_type&&n.setState({oracleTables:a,plainOptions:a,checkedList:n.state.tableNameList})}else u.a.error(e.data.message)}).catch(function(e){})},n.onChange=function(e){var t=n.state.tableNameList.concat(e),a=Array.from(new Set(t)),s=n.state.plainOptions.filter(function(t){return!e.includes(t)}),r=a.filter(function(e){return!s.includes(e)});n.setState({checkedList:e,tableNameList:r,listLength:r.length,indeterminate:!!e.length&&e.length<n.state.plainOptions.length,checkAll:e.length===n.state.plainOptions.length})},n.onCheckAllChange=function(e){n.setState({tableNameList:e.target.checked?n.state.plainOptions:[],listLength:e.target.checked?n.state.plainOptions.length:0,checkedList:e.target.checked?n.state.plainOptions:[],indeterminate:!1,checkAll:e.target.checked})},n.onback=function(){n.props.onback()},n.closeTag=function(e){var t=n.state.tableNameList.filter(function(t){return!(e===t)});n.setState({tableNameList:t,checkedList:t,listLength:t.length})},n.state={dbname:"Schema",ifshow:"show",mysqlTables:[],oracleTables:[],source_type:t.source_type,checkedList:[],indeterminate:!1,checkAll:!0,plainOptions:[],tableNameList:[],job_id:t.job_id,source_name:t.source_name,resdata:t.resdata,twoVisible:t.twoVisible},n}return v()(a,t),p()(a,[{key:"componentDidMount",value:function(){this.LoadingDetail()}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel;return B.a.createElement(w.a,{visible:a,title:"选择同步内容",okText:"保存",onCancel:n,onOk:this.onOk,className:I.a.step3Box,closable:!1,maskClosable:!1,footer:B.a.createElement("span",null,B.a.createElement(c.a,{style:{display:1==this.state.twoVisible?"inline-block":"none"},onClick:n},"取消"),B.a.createElement(c.a,{style:{display:1==this.state.twoVisible?"none":"inline-block"},onClick:this.onback},"返回"),B.a.createElement(c.a,{type:"primary",onClick:this.onOk},"保存")),width:530},B.a.createElement(q,{className:I.a.searchSelect,placeholder:"请输入表名关键字",onSearch:this.search}),B.a.createElement(T.a,{style:{borderBottom:"none",overflow:"hidden"},bordered:!1,expandIconPosition:"right",disabled:!0},B.a.createElement(U,{header:B.a.createElement("p",{style:{marginTop:"15px",marginLeft:19,textAlign:"right",color:"#1890FF",width:"100%"}},"已勾选",this.state.listLength,"项"),key:"1"},B.a.createElement("div",{style:{border:"1px solid #e8e8e8",padding:"10px 10px 0 10px",marginBottom:10}},this.state.tableNameList.map(function(t){return B.a.createElement(l.a,{closable:!0,onClose:function(){return e.closeTag(t)},key:t,style:{marginBottom:10}},t)})))),B.a.createElement(i.a,null,B.a.createElement(T.a,{style:{borderBottom:"none"},bordered:!1,defaultActiveKey:"1",disabled:!0,className:1==this.state.source_type?"hide":"show"},B.a.createElement(U,{className:I.a.listBox,header:B.a.createElement(S.a,{onClick:function(e){e.stopPropagation()},indeterminate:this.state.indeterminate,onChange:this.onCheckAllChange,checked:this.state.checkAll},B.a.createElement("span",{onClick:function(e){e.stopPropagation()}},"Tables")),key:"1"},B.a.createElement(K,{options:this.state.mysqlTables,value:this.state.checkedList,onChange:this.onChange,style:{marginLeft:55}}))),B.a.createElement(T.a,{style:{borderBottom:"none"},bordered:!1,defaultActiveKey:["1"],className:2==this.state.source_type?"hide":"show"},B.a.createElement(U,{className:I.a.listBox,header:this.state.resdata.schema,key:"1"},B.a.createElement(T.a,{defaultActiveKey:"1",bordered:!1,expandIconPosition:"right"},B.a.createElement(U,{header:B.a.createElement(S.a,{onClick:function(e){e.stopPropagation()},indeterminate:this.state.indeterminate,onChange:this.onCheckAllChange,checked:this.state.checkAll},B.a.createElement("span",{onClick:function(e){e.stopPropagation()}},"Tables")),key:"1"},B.a.createElement(K,{options:this.state.oracleTables,onChange:this.onChange,value:this.state.checkedList,style:{marginLeft:55}})))))))}}]),a}(B.a.Component))),F=function(t){function a(t){var n;return _()(this,a),(n=f()(this,g()(a).call(this,t))).onRef=function(e){n.editableTable=e},n.Loadingpei=function(t){var a={id:t};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobrela/check_jobinfo/",data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.setState({dest_name:t.dest_name,source_name:t.source_name,source_id:t.source_id,job_name:t.job_name,dest_type:t.dest_type,source_type:t.source_type}),n.LoadingDetail()}).catch(function(e){})},n.LoadingDetail=function(){var t={id:n.state.source_id};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_dbinfo/check_dbinfo/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.setState({resdata:t,type:t.type,host:t.host,user:t.user,password:t.password,port:t.port,dbname:t.dbname,schema:t.schema}),n.showModal(0)}).catch(function(e){})},n.handleCreate=function(){var t={job_id:n.state.job_id};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/check_tablerule/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),0!=e.data.status){for(var t=e.data.data,a=0;a<t.length;a++)t[a].key="0-"+a;n.setState({sourceTables:t,dataSource:[],dataSourceTarget:[],selectedKeys:[t[0].key]}),n.sourceSelect(t[0].key,t[0].source_table,2)}else u.a.error(e.data.message)}).catch(function(e){})},n.readWay=function(e){n.setState({value:e.target.value})},n.showModal=function(e,t){0==e&&n.setState({visible:!0,twoVisible:0}),2==e&&n.setState({visible:!0,twoVisible:1}),1==e&&(n.setState({visibleTuo:!0,selectedRowKeys:[],selectedRows:[],iftuo:!0}),n.loadtuoData()),4==e&&n.setState({visibleTuoSelect:!0,selectedRows:[t],valueCheck:[0]})},n.loadtuoData=function(){var t={type:n.state.type,dbname:n.state.dbname,host:n.state.host,password:n.state.password,port:n.state.port,schema:n.state.schema,user:n.state.user};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/showFieldrule?job_id="+n.state.job_id+"&tablename="+n.state.table_name,data:t,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var t=e.data.data,a=[],s=0;s<t.length;s++)a.push({key:s,source_field:t[s].source_field,dest_field:t[s].dest_field,source_table:t[s].source_table,dest_table:t[s].dest_table,desensitization_way:t[s].desensitization_way,remark:t[s].remark});n.setState({dataTuo:a})}).catch(function(e){})},n.handleCancel=function(){n.setState({visible:!1,visibleTuo:!1,formValuesBusUpdate:{}})},n.handleCancelSelect=function(){n.setState({visibleTuoSelect:!1})},n.onSelect=function(e,t){n.setState({selectedKeys:e}),n.sourceSelect(e,t,1)},n.sourceSelect=function(t,a,s){if(0!=t.length){var r="";r=2==s?a:String(a.selectedNodes[0].props.title.props.title),n.setState({table_name:r});var o={type:n.state.type,dbname:n.state.dbname,host:n.state.host,password:n.state.password,port:n.state.port,schema:n.state.schema,user:n.state.user};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/link_table_details?job_id="+n.state.job_id+"&tablename="+r,data:o,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var o=e.data.data,i=[],l=0;l<o.length;l++)i.push({key:l,name:o[l].field_name,source_name:o[l].field_name,type:o[l].type,length:o[l].scale,precision:o[l].accuracy,filter:o[l].accuracy,null:o[l].not_null});n.setState({dataSource:i,tabldest_name:r}),n.targetSelect(t,a,s)}).catch(function(e){})}},n.targetSelect=function(t,a,s){if(0!=t.length){var r="";if(r=2==s?a:String(a.selectedNodes[0].props.title.props.title),0!=t.length){var o={type:n.state.type,dbname:n.state.dbname,host:n.state.host,password:n.state.password,port:n.state.port,schema:n.state.schema,user:n.state.user};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/DestlinkTableDetails?job_id="+n.state.job_id+"&tablename="+r,data:o,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),n.setState({tabldest_name:e.data.destName});for(var t=e.data.data,a=e.data.data2,s=n.state.dataSource,r=[],o=0;o<t.length;o++){if(1==t[o].add_flag){r.push({key:"add_time",dest_field_name:t[o].dest_field_name,source_name:t[o].field_name,type:void 0==t[o].type?"":t[o].type,length:void 0==t[o].scale?"":t[o].scale,precision:void 0==t[o].accuracy?"":t[o].accuracy,filter:void 0==t[o].accuracy?"":t[o].accuracy,null:void 0==t[o].not_null?"":t[o].not_null,name:void 0==t[o].source_name?"":t[o].source_name,var_flag:void 0==t[o].var_flag?"":t[o].var_flag,add_flag:t[o].add_flag});break}r.push({key:o,dest_field_name:t[o].dest_field_name,source_name:t[o].field_name,type:void 0==t[o].type?"":t[o].type,length:void 0==t[o].scale?"":t[o].scale,precision:void 0==t[o].accuracy?"":t[o].accuracy,filter:void 0==t[o].accuracy?"":t[o].accuracy,null:void 0==t[o].not_null?"":t[o].not_null,name:void 0==t[o].source_name?"":t[o].source_name,var_flag:void 0==t[o].var_flag?"":t[o].var_flag,typeSource:void 0==s[o].type?"":s[o].type,lengthSource:void 0==s[o].length?"":s[o].length,precisionSource:void 0==s[o].precision?"":s[o].precision,nullSource:void 0==s[o].null?"":s[o].null,add_flag:0})}for(var i=0;i<a.length;i++)for(var l=0;l<r.length;l++)a[i].dest_field==r[l].dest_field_name&&(r[l].desensitization_way=a[i].desensitization_way,r[l].remark=a[i].remark);n.setState({dataSourceTarget:r}),s.length,t.length,n.editableTable.loadCss()}).catch(function(e){})}}},n.search=function(t){var a={tableName:t,jobId:n.state.job_id};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/selByTableName/",data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var t=e.data.data,a=0;a<t.length;a++)t[a].key="0-"+a;n.setState({sourceTables:t,dataSource:[],dataSourceTarget:[],selectedKeys:[t[0].key]}),n.sourceSelect(t[0].key,t[0].source_table,2)}).catch(function(e){})},n.savetable=function(t,a,s,r){var o={dest_name:n.state.tabldest_name,source_name:n.state.table_name,jobId:n.state.job_id};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/VerifyDb/",data:R.a.Amap(o),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1==e.data.status?n.savetableLast(t,a,s,r):u.a.error(e.data.message)}).catch(function(e){})},n.savetableLast=function(t,a,s,r){var o=[];if(0==t){for(var i=0;i<a.length;i++)a[i][10]="$";o=a}var l={source_name:n.state.table_name,dest_name:n.state.tabldest_name,list_data:o,job_id:n.state.job_id,addFile:r,primaryKey:s};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/edit_fieldrule/",data:R.a.Amap(l),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1==e.data.status&&u.a.success("该表字段配置成功")}).catch(function(e){})},n.finish=function(){P.a.push("/busList/watch?n="+n.state.job_id)},n.valueDestName=function(e){n.setState({tabldest_name:e.target.value})},n.handleOk=function(e){n.editableTable.savechange("tuo")},n.handleChange=function(e){n.setState({ifFixvalue:!1,desensitization_way:e}),"2"==e&&n.setState({ifFixvalue:!0})},n.fixValueChange=function(e){n.setState({fixValue:e.target.value})},n.deleteLine=function(t){var a=t.source_name+","+t.dest_field_name+","+t.type+","+t.length+","+t.null+","+t.precision,s={job_id:n.state.job_id,list_data:a,source_name:n.state.table_name,dest_name:n.state.tabldest_name};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/deleteAllFiled/",data:R.a.Amap(s),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),n.sourceSelect(n.state.selectedKeys,n.state.table_name,2)}).catch(function(e){})},n.noDeleteLine=function(t){var a={job_id:n.state.job_id,sourceField:t.source_name,destField:t.dest_field_name,source_name:n.state.table_name,dest_name:n.state.tabldest_name};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/recover/",data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),n.sourceSelect(n.state.selectedKeys,n.state.table_name,2)}).catch(function(e){})},n.toback=function(){n.props.tt()},n.tuoChange=function(e,t){e.length>0?n.setState({iftuo:!1,selectedRowKeys:e,selectedRows:t}):n.setState({iftuo:!0,selectedRowKeys:e,selectedRows:t})},n.onchangeCheckbox=function(e){n.setState({valueCheck:[e[e.length-1]]}),2!=e&&n.setState({fixValue:""})},n.onTuo=function(){n.setState({visibleTuoSelect:!0,valueCheck:[0],fixValue:""})},n.handleOkSelect=function(){n.desensitization()},n.desensitization=function(){for(var t=[],a=[],s=n.state.selectedRows,r=0;r<s.length;r++)t.push(s[r].dest_field),a.push(s[r].source_field);var o={source_field:a.join(","),desensitization_way:n.state.valueCheck[0],dest_field:t.join(","),dest_table:n.state.tabldest_name,job_id:n.state.job_id,source_table:n.state.table_name,remark:n.state.fixValue},i=e.constants.httpType+e.constants.website+"/sys_Desensitization/addDesensitization/";0==n.state.valueCheck[0]&&(i=e.constants.httpType+e.constants.website+"/sys_Desensitization/delDesensitization/"),M()({method:"post",url:i,data:o,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),"1"==e.data.status&&(n.setState({visibleTuoSelect:!1,selectedRowKeys:[],selectedRows:[],iftuo:!0}),n.loadtuoData(),n.sourceSelect(n.state.selectedKeys,n.state.table_name,2))}).catch(function(e){})},n.addFiled=function(){var t={job_id:n.state.job_id,source_name:n.state.table_name,dest_name:n.state.tabldest_name};M()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/addField/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),n.editableTable.handleAdd1(e.data.data)}).catch(function(e){})},n.onchangeSelect=function(e,t){},n.state={value:1,job_id:t.id,sourceTables:[],type:0,host:"",user:"",password:"",port:"",dbname:"",schema:"",table_name:"",visibleTuo:!1,desensitization_way:"0",twoVisible:0,fixValue:"",iftuo:!0,valueCheck:["0"],selectedRowKeys:[]},n}return v()(a,t),p()(a,[{key:"componentDidMount",value:function(){void 0!=this.state.job_id&&this.Loadingpei(this.state.job_id)}},{key:"render",value:function(){var e=this,t=[{title:"字段名称",dataIndex:"name",key:"name",width:60,render:function(e,t){return B.a.createElement("span",{title:e},void 0==e||null==e?"":e.length>10?e.substring(0,10)+"...":e)}},{title:"类型",dataIndex:"type",key:"type",width:60,render:function(e,t){return B.a.createElement("span",{title:e},void 0==e||null==e?"":e.length>10?e.substring(0,10)+"...":e)}},{title:"长度",dataIndex:"length",key:"length",width:30},{title:"not null",dataIndex:"null",key:"null",width:50},{title:"精度",dataIndex:"precision",key:"precision",width:30,render:function(e,t){return B.a.createElement("span",{title:e},e,B.a.createElement("img",{src:W.a,style:{position:"absolute",marginTop:"6px",right:"-36px",width:44,zIndex:1}}))}}],a=[{title:"字段名称",dataIndex:"dest_field",key:"dest_field"},{title:"脱敏状态",dataIndex:"desensitization_way",key:"desensitization_way",render:function(e,t){return B.a.createElement("span",null,"1"==e?"*隐藏":"2"==e?"固定值： "+t.remark:"3"==e?"随机值":"不脱敏")}}],u={selectedRowKeys:this.state.selectedRowKeys,onChange:this.tuoChange,getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}},d=B.a.createElement("span",{style:{marginLeft:4}},"数据源表名称：",this.state.table_name),_=B.a.createElement("span",null,"目的地表名称：",B.a.createElement(k.a,{addonAfter:B.a.createElement(o.a,{type:"edit",style:{color:"#000"},theme:"filled"}),onChange:function(t){return e.valueDestName(t)},value:this.state.tabldest_name,style:{width:200,marginTop:"-3px",fontSize:14,fontWeight:570}}),B.a.createElement(c.a,{type:"primary",className:I.a.btnSubmite,style:{float:"right",height:"21px"},size:"small",onClick:function(){return e.showModal(1)}},"批量脱敏"));return B.a.createElement("div",{className:I.a.connent2},B.a.createElement("h1",null,this.state.job_name),B.a.createElement("div",{style:{padding:"20px 16px",background:"#fff",marginBottom:20}},B.a.createElement(l.a,{className:I.a.checktag,style:{background:"#fff",borderStyle:"dashed",cursor:"default"}},"  ",this.state.source_name,B.a.createElement("span",{className:I.a.detailBtn,style:{color:"#999"}},"数据源  ")),B.a.createElement(l.a,{className:I.a.checktag,style:{background:"#fff",borderStyle:"dashed",cursor:"default"}},"  ",this.state.dest_name,B.a.createElement("span",{className:I.a.detailBtn,style:{color:"#999"}},"目的地  "))),B.a.createElement("h1",null,"任务配置"),this.state.visible?B.a.createElement(z,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,source_type:this.state.source_type,onCancel:this.handleCancel,resdata:this.state.resdata,onCreate:function(){return e.handleCreate()},onback:this.toback,job_id:this.state.job_id,source_name:this.state.source_name,twoVisible:this.state.twoVisible}):null,B.a.createElement(i.a,{gutter:24,style:{background:"#fff",margin:0}},B.a.createElement(r.a,{span:4},B.a.createElement(s.a,{title:"同步列表",className:I.a.treeBox,bordered:!1,extra:B.a.createElement("a",{onClick:function(){return e.showModal(2)}},B.a.createElement(o.a,{type:"edit",theme:"filled",style:{color:"#000"}}))},B.a.createElement(q,{className:I.a.searchSelect,placeholder:"请输入表名关键字",onSearch:this.search}),B.a.createElement(C.a,{showLine:!0,defaultExpandedKeys:["0"],onSelect:this.onSelect,selectedKeys:this.state.selectedKeys,style:{height:"200px",overflow:"auto",marginTop:20}},B.a.createElement(V,{title:"Tables",key:"0",selectable:!1},this.state.sourceTables.map(function(e){return B.a.createElement(V,{title:B.a.createElement("span",{title:e.source_table},e.source_table.length>10?e.source_table.substring(0,10)+"...":e.source_table),key:e.key})}))))),B.a.createElement(r.a,{span:8,className:I.a.sourceTable,style:{borderRight:"1px solid #e0c8c824"}},B.a.createElement(s.a,{title:d,bordered:!1,className:I.a.sourceTableBox},this.state.dataSource&&Object.keys(this.state.dataSource).length?B.a.createElement(n.a,{bordered:!1,size:"small",dataSource:this.state.dataSource,columns:t,pagination:!1}):null)),B.a.createElement(r.a,{span:12,className:I.a.sourceTable},B.a.createElement(s.a,{title:_,bordered:!1,className:I.a.destTable},this.state.dataSourceTarget&&Object.keys(this.state.dataSourceTarget).length?B.a.createElement(j.a,{onchangeSelect:this.onchangeSelect,addFiled:this.addFiled,noDeleteLine:this.noDeleteLine,deleteLine:this.deleteLine,onRef:this.onRef.bind(this),dest_type:this.state.dest_type,job_id:this.state.job_id,save:this.savetable,showModal:this.showModal,dataSource:this.state.dataSourceTarget}):null))),B.a.createElement(c.a,{type:"primary",style:{marginTop:20,float:"right"},onClick:this.finish,className:I.a.btnSubmite},"完成"),B.a.createElement(w.a,{title:B.a.createElement("span",null,"批量脱敏",B.a.createElement(c.a,{onClick:this.onTuo,style:{marginLeft:60},disabled:this.state.iftuo},"脱敏方式")),visible:this.state.visibleTuo,onCancel:this.handleCancel,style:{height:200},footer:B.a.createElement(c.a,{type:"primary",onClick:this.handleCancel},"完成"),zIndex:1},B.a.createElement(n.a,{rowSelection:u,bordered:!1,size:"small",dataSource:this.state.dataTuo,columns:a,pagination:!1})),B.a.createElement(w.a,{closable:!1,visible:this.state.visibleTuoSelect,onOk:this.handleOkSelect,onCancel:this.handleCancelSelect,style:{height:160},width:"320px",cancelText:"取消",okText:"确认",zIndex:11},B.a.createElement(S.a.Group,{onChange:this.onchangeCheckbox,value:this.state.valueCheck},B.a.createElement("p",null,B.a.createElement(S.a,{value:0},"不脱敏")),B.a.createElement("p",null,B.a.createElement(S.a,{value:1},"***隐藏")),B.a.createElement("p",null,B.a.createElement(S.a,{value:3},"随机值")),B.a.createElement("p",null,B.a.createElement(S.a,{value:2},"固定值"),B.a.createElement(k.a,{value:this.state.fixValue,onChange:this.fixValueChange,style:{width:178,height:24,display:"inline-block"}})))))}}]),a}(x.PureComponent);t.a=F}).call(this,a("yLpj"))},fu2T:function(e,t,a){"use strict";a("cIOH"),a("3dVZ")},gK9i:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("17x9"),o=a.n(r),i=a("TSYQ"),l=a.n(i),c=a("Gytx"),u=a.n(c),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),d(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.forceRender||!u()(this.props,e)}},{key:"render",value:function(){var e;if(this._isActived=this.props.forceRender||this._isActived||this.props.isActive,!this._isActived)return null;var t=this.props,a=t.prefixCls,n=t.isActive,r=t.children,o=t.destroyInactivePanel,i=t.forceRender,c=t.role,u=l()((_(e={},a+"-content",!0),_(e,a+"-content-active",n),_(e,a+"-content-inactive",!n),e)),d=i||n||!o?s.a.createElement("div",{className:a+"-content-box"},r):null;return s.a.createElement("div",{className:u,role:c},d)}}]),t}();m.propTypes={prefixCls:o.a.string,isActive:o.a.bool,children:o.a.any,destroyInactivePanel:o.a.bool,forceRender:o.a.bool,role:o.a.string};var p=m,h=a("MFj2"),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.handleItemClick=function(){var e=n.props,t=e.onItemClick,a=e.panelKey;"function"==typeof t&&t(a)},n.handleKeyPress=function(e){"Enter"!==e.key&&13!==e.keyCode&&13!==e.which||n.handleItemClick()},g(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),f(t,[{key:"shouldComponentUpdate",value:function(e){return!u()(this.props,e)}},{key:"render",value:function(){var e,t=this.props,a=t.className,n=t.id,r=t.style,o=t.prefixCls,i=t.header,c=t.headerClass,u=t.children,d=t.isActive,_=t.showArrow,m=t.destroyInactivePanel,f=t.disabled,g=t.accordion,y=t.forceRender,v=t.expandIcon,E=t.extra,w=l()(o+"-header",b({},c,c)),k=l()((b(e={},o+"-item",!0),b(e,o+"-item-active",d),b(e,o+"-item-disabled",f),e),a),C=s.a.createElement("i",{className:"arrow"});return _&&"function"==typeof v&&(C=v(this.props)),s.a.createElement("div",{className:k,style:r,id:n},s.a.createElement("div",{className:w,onClick:this.handleItemClick,role:g?"tab":"button",tabIndex:f?-1:0,"aria-expanded":""+d,onKeyPress:this.handleKeyPress},_&&C,i,E&&s.a.createElement("div",{className:o+"-extra"},E)),s.a.createElement(h.a,{showProp:"isActive",exclusive:!0,component:"",animation:this.props.openAnimation},s.a.createElement(p,{prefixCls:o,isActive:d,destroyInactivePanel:m,forceRender:y,role:g?"tabpanel":null},u)))}}]),t}();y.propTypes={className:o.a.oneOfType([o.a.string,o.a.object]),id:o.a.string,children:o.a.any,openAnimation:o.a.object,prefixCls:o.a.string,header:o.a.oneOfType([o.a.string,o.a.number,o.a.node]),headerClass:o.a.string,showArrow:o.a.bool,isActive:o.a.bool,onItemClick:o.a.func,style:o.a.object,destroyInactivePanel:o.a.bool,disabled:o.a.bool,accordion:o.a.bool,forceRender:o.a.bool,expandIcon:o.a.func,extra:o.a.node,panelKey:o.a.any},y.defaultProps={showArrow:!0,isActive:!1,destroyInactivePanel:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var v=y,E=a("J9Du");function w(e,t,a,n){var s=void 0;return Object(E.default)(e,a,{start:function(){t?(s=e.offsetHeight,e.style.height=0):e.style.height=e.offsetHeight+"px"},active:function(){e.style.height=(t?s:0)+"px"},end:function(){e.style.height="",n()}})}var k=function(e){return{enter:function(t,a){return w(t,!0,e+"-anim",a)},leave:function(t,a){return w(t,!1,e+"-anim",a)}}},C=a("TOwV"),S=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(e){var t=e;return Array.isArray(t)||(t=t?[t]:[]),t}var x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));B.call(a);var n=e.activeKey,s=e.defaultActiveKey;return"activeKey"in e&&(s=n),a.state={openAnimation:e.openAnimation||k(e.prefixCls),activeKey:O(s)},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),S(t,[{key:"componentWillReceiveProps",value:function(e){"activeKey"in e&&this.setState({activeKey:O(e.activeKey)}),"openAnimation"in e&&this.setState({openAnimation:e.openAnimation})}},{key:"shouldComponentUpdate",value:function(e,t){return!u()(this.props,e)||!u()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,n=t.className,r=t.style,o=t.accordion,i=l()((T(e={},a,!0),T(e,n,!!n),e));return s.a.createElement("div",{className:i,style:r,role:o?"tablist":null},this.getItems())}}]),t}(),B=function(){var e=this;this.onClickItem=function(t){var a=e.state.activeKey;if(e.props.accordion)a=a[0]===t?[]:[t];else{var n=(a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(a))).indexOf(t);n>-1?a.splice(n,1):a.push(t)}e.setActiveKey(a)},this.getNewChild=function(t,a){if(!t)return null;var n=e.state.activeKey,r=e.props,o=r.prefixCls,i=r.accordion,l=r.destroyInactivePanel,c=r.expandIcon,u=t.key||String(a),d=t.props,_=d.header,m=d.headerClass,p=d.disabled,h={key:u,panelKey:u,header:_,headerClass:m,isActive:i?n[0]===u:n.indexOf(u)>-1,prefixCls:o,destroyInactivePanel:l,openAnimation:e.state.openAnimation,accordion:i,children:t.props.children,onItemClick:p?null:e.onClickItem,expandIcon:c};return s.a.cloneElement(t,h)},this.getItems=function(){var t=e.props.children,a=Object(C.isFragment)(t)?t.props.children:t,r=n.Children.map(a,e.getNewChild);return Object(C.isFragment)(t)?s.a.createElement(s.a.Fragment,null,r):r},this.setActiveKey=function(t){"activeKey"in e.props||e.setState({activeKey:t}),e.props.onChange(e.props.accordion?t[0]:t)}};x.propTypes={children:o.a.any,prefixCls:o.a.string,activeKey:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),defaultActiveKey:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string)]),openAnimation:o.a.object,onChange:o.a.func,accordion:o.a.bool,className:o.a.string,style:o.a.object,destroyInactivePanel:o.a.bool,expandIcon:o.a.func},x.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},x.Panel=v;var A=x,I=(x.Panel,a("wEI+"));function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function j(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=N(this,M(t).apply(this,arguments))).renderCollapsePanel=function(t){var a,s,r,o=t.getPrefixCls,i=e.props,c=i.prefixCls,u=i.className,d=void 0===u?"":u,_=i.showArrow,m=void 0===_||_,p=o("collapse",c),h=l()((a={},s="".concat(p,"-no-arrow"),r=!m,s in a?Object.defineProperty(a,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[s]=r,a),d);return n.createElement(A.Panel,P({},e.props,{prefixCls:p,className:h}))},e}var a,s,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,n["Component"]),a=t,(s=[{key:"render",value:function(){return n.createElement(I.a,null,this.renderCollapsePanel)}}])&&j(a.prototype,s),r&&j(a,r),t}(),W=a("CtXQ"),U=a("n4lo");function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function z(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=F(this,G(t).apply(this,arguments))).renderExpandIcon=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s=e.props.expandIcon,r=s?s(t):n.createElement(W.a,{type:"right",rotate:t.isActive?90:void 0});return n.isValidElement(r)?n.cloneElement(r,{className:"".concat(a,"-arrow")}):r},e.renderCollapse=function(t){var a,s=t.getPrefixCls,r=e.props,o=r.prefixCls,i=r.className,c=void 0===i?"":i,u=r.bordered,d=r.expandIconPosition,_=s("collapse",o),m=l()((q(a={},"".concat(_,"-borderless"),!u),q(a,"".concat(_,"-icon-position-").concat(d),!0),a),c);return n.createElement(A,V({},e.props,{expandIcon:function(t){return e.renderExpandIcon(t,_)},prefixCls:_,className:m}))},e}var a,s,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(t,n["Component"]),a=t,(s=[{key:"render",value:function(){return n.createElement(I.a,null,this.renderCollapse)}}])&&z(a.prototype,s),r&&z(a,r),t}();Q.Panel=L,Q.defaultProps={bordered:!0,openAnimation:V({},U.a,{appear:function(){}}),expandIconPosition:"left"};t.a=Q},gxWv:function(e,t,a){"use strict";(function(e){a("Telt");var n=a("Tckk"),s=(a("IzEo"),a("bx4M")),r=a("gWZ8"),o=a.n(r),i=(a("miYZ"),a("tsqr")),l=(a("Pwec"),a("CtXQ")),c=(a("5NDa"),a("5rEg")),u=(a("7Kak"),a("9yH6")),d=a("2Taf"),_=a.n(d),m=a("vZ4D"),p=a.n(m),h=a("l4Ni"),f=a.n(h),b=a("ujKo"),g=a.n(b),y=a("MhPg"),v=a.n(y),E=(a("+BJd"),a("mr32")),w=(a("y8nQ"),a("Vl3Y")),k=(a("2qtc"),a("kLXV")),C=a("q1tI"),S=a.n(C),T=a("5ZHM"),O=a.n(T),x=a("vDqi"),B=a.n(x),A=a("jHKv"),I=(a("kQFk"),a("yXo+")),D=a.n(I),P=a("/GGx"),j=a.n(P),N=a("gI1x"),M=a.n(N),R=a("A0we"),L=a.n(R),W=k.a.confirm,U=w.a.Item,K=E.a.CheckableTag,V=w.a.create()(function(e){function t(e){var a;return _()(this,t),(a=f()(this,g()(t).call(this,e))).changedbType=function(e){2==e.target.value?a.setState({dbname:"数据库名称",ifshow:"hide",dbnamehide:"",port:3306}):1==e.target.value?a.setState({dbname:"数据库实例名",ifshow:"show",port:1521}):4==e.target.value?a.setState({dbname:"数据库实例名",ifshow:"show",port:5236}):3==e.target.value&&a.setState({dbname:"数据库名称",ifshow:"show",port:""})},a.state={dbname:"数据库实例名",ifshow:"show",ifSourcetype:e.ifSourcetype,ifSourcename:0==e.ifSourcetype?"创建数据源":"创建目的地",ifSourcename1:0==e.ifSourcetype?"数据源类型":"数据目的地类型",ifSourcename2:0==e.ifSourcetype?"数据源名称":"数据目的地名称"},a}return v()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,s=e.form.getFieldDecorator;return S.a.createElement(k.a,{visible:t,title:this.state.ifSourcename,okText:"连接",onCancel:a,onOk:n},S.a.createElement(w.a,null,S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.ifSourcename1},s("type",{rules:[{required:!0,message:"请选择类型！"}],initialValue:"1"})(S.a.createElement(u.a.Group,{size:"small",onChange:this.changedbType},S.a.createElement(u.a.Button,{value:1},"Oracle"),"   ",S.a.createElement(u.a.Button,{value:2},"MySQL"),"   ",S.a.createElement(u.a.Button,{className:0==this.state.ifSourcetype?"hide":"showtarget",value:3},"SQL Server"),"   ",S.a.createElement(u.a.Button,{className:0==this.state.ifSourcetype?"hide":"showtarget",value:4},"达梦"),"   "))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.ifSourcename2},s("name",{rules:[{required:!0,message:"请输入"+this.state.ifSourcename2+"！"}],initialValue:""})(S.a.createElement(c.a,{placeholder:"请输入"+this.state.ifSourcename2}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:"服务器地址"},s("host",{rules:[{required:!0,message:"请输入服务器地址！"}],initialValue:""})(S.a.createElement(c.a,{placeholder:"请输入服务器地址"}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:"端口"},s("port",{rules:[{required:!0,message:"请输入端口！"}],initialValue:this.state.port})(S.a.createElement(c.a,{placeholder:"请输入端口"}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.dbname},s("dbname",{rules:[{required:!0,message:"请输入"+this.state.dbname}],initialValue:this.state.dbnamehide})(S.a.createElement(c.a,{placeholder:this.state.dbname}))),S.a.createElement(U,{className:this.state.ifshow,labelCol:{span:7},wrapperCol:{span:15},label:"schema"},s("schema",{rules:[{required:"show"==this.state.ifshow,message:"请输入schema"}],initialValue:""})(S.a.createElement(c.a,{placeholder:"请输入schema"}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:"用户名"},s("user",{rules:[{required:!0,message:"请输入用户名！"}],initialValue:""})(S.a.createElement(c.a,{placeholder:"请输入用户名"}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:"密码"},s("password",{rules:[{required:!0,message:"请输入密码！"}],initialValue:""})(S.a.createElement(c.a,{placeholder:"请输入密码",type:"password"}))),S.a.createElement(U,{className:"hide",labelCol:{span:7},wrapperCol:{span:15},label:""},s("sour_or_dest",{initialValue:this.state.ifSourcetype})(S.a.createElement(c.a,{placeholder:"请输入密码"})))))}}]),t}(S.a.Component)),q=w.a.create()(function(e){function t(e){var a;return _()(this,t),(a=f()(this,g()(t).call(this,e))).changedbType=function(e){2==e.target.value?a.setState({dbname:"数据库名称",ifshow:"hide",dbnamehide:"",port:3306}):1==e.target.value?a.setState({dbname:"数据库实例名",ifshow:"show",port:1521}):4==e.target.value?a.setState({dbname:"数据库实例名",ifshow:"show",port:5236}):3==e.target.value&&a.setState({dbname:"数据库名称",ifshow:"show"})},a.changedisabled=function(e){a.setState({ifdisabled:!1})},a.closeConfirm=function(e,t){W({content:"确定要删除吗？",okText:"确认",cancelText:"取消",onOk:function(){return a.props.handleClose(e,t)},onCancel:function(){}})},a.state={ifdisabled:!0,ifSourcetype:e.values.sour_or_dest,title:0==e.values.sour_or_dest?"数据源详情":"目的地详情",ifSourcename1:0==e.values.sour_or_dest?"数据源类型":"数据目的地类型",ifSourcename2:0==e.values.sour_or_dest?"数据源名称":"数据目的地名称",host:e.values.host,id:e.values.id,port:e.values.port,name:e.values.name,user:e.values.user,pwd:e.values.password,schema:e.values.schema,dbnamehide:e.values.dbname,datatype:e.values.type,ifshow:2==e.values.type?"hide":"show",dbname:4==e.values.type||1==e.values.type?"数据库实例名":"数据库名称"},a}return v()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,s=t.onCreate,r=t.form.getFieldDecorator;return S.a.createElement(k.a,{visible:a,title:[this.state.title,S.a.createElement(l.a,{type:"edit",onClick:this.changedisabled,style:{marginLeft:20,cursor:"pointer"}}),S.a.createElement(l.a,{type:"close",onClick:function(){return e.closeConfirm(e.state.id,e.state.ifSourcetype)},style:{marginLeft:20,cursor:"pointer"}})],onCancel:n,okButtonProps:{disabled:this.state.ifdisabled},okText:"连接",onOk:s},S.a.createElement(w.a,{className:O.a.detailForm},S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.ifSourcename1},r("type",{rules:[{required:!0,message:"请选择数据类型！"}],initialValue:this.state.datatype})(S.a.createElement(u.a.Group,{size:"small",onChange:this.changedbType,disabled:this.state.ifdisabled},S.a.createElement(u.a.Button,{value:1},"Oracle"),"   ",S.a.createElement(u.a.Button,{value:2},"MySQL"),"   ",S.a.createElement(u.a.Button,{className:0==this.state.ifSourcetype?"hide":"showtarget",value:3},"SQL Server"),"   ",S.a.createElement(u.a.Button,{className:0==this.state.ifSourcetype?"hide":"showtarget",value:4},"达梦"),"   "))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.ifSourcename2},r("name",{rules:[{required:!0,message:"请输入"+this.state.ifSourcename2}],initialValue:this.state.name})(S.a.createElement(c.a,{placeholder:"请输入"+this.state.ifSourcename2,disabled:!0}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:"服务器地址"},r("host",{rules:[{required:!0,message:"请输入服务器地址！",validator:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/}],initialValue:this.state.host})(S.a.createElement(c.a,{placeholder:"请输入服务器地址",disabled:this.state.ifdisabled}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:"端口"},r("port",{rules:[{required:!0,message:"请输入端口！"}],initialValue:this.state.port})(S.a.createElement(c.a,{placeholder:"请输入端口",disabled:this.state.ifdisabled}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.dbname},r("dbname",{rules:[{required:!0,message:"请输入"+this.state.dbname}],initialValue:this.state.dbnamehide})(S.a.createElement(c.a,{placeholder:this.state.dbname,disabled:this.state.ifdisabled}))),S.a.createElement(U,{className:this.state.ifshow,labelCol:{span:7},wrapperCol:{span:15},label:"schema"},r("schema",{rules:[{required:"show"==this.state.ifshow,message:"请输入schema"}],initialValue:this.state.schema})(S.a.createElement(c.a,{placeholder:"请输入schema",disabled:this.state.ifdisabled}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:"用户名"},r("user",{rules:[{required:!0,message:"请输入用户名！"}],initialValue:this.state.user})(S.a.createElement(c.a,{placeholder:"请输入用户名",disabled:this.state.ifdisabled}))),S.a.createElement(U,{labelCol:{span:7},wrapperCol:{span:15},label:"密码"},r("password",{rules:[{required:!0,message:"请输入密码！"}],initialValue:this.state.pwd})(S.a.createElement(c.a,{placeholder:"请输入密码",type:"password",disabled:this.state.ifdisabled}))),S.a.createElement(U,{className:"hide"},r("id",{initialValue:this.state.id})(S.a.createElement(c.a,{placeholder:""}))),S.a.createElement(U,{className:"hide"},r("sour_or_dest",{initialValue:this.state.ifSourcetype})(S.a.createElement(c.a,{placeholder:""}))),S.a.createElement(U,{className:"hide"},r("ifexit",{initialValue:1})(S.a.createElement(c.a,{disabled:!0})))))}}]),t}(S.a.Component)),z=function(t){function a(t){var n;return _()(this,a),(n=f()(this,g()(a).call(this,t))).LoadingDetail=function(t){var a={id:t};B()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobrela/check_jobinfo/",data:A.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.handleChangeSource(t.source_name,!0),n.handleChangeTarget(t.dest_name,!0,2),n.props.tt(3,t.job_name)}).catch(function(e){})},n.loadList=function(t){var a=e.constants.httpType+e.constants.website+"/sys_dbinfo/source_all/";1==t&&(a=e.constants.httpType+e.constants.website+"/sys_dbinfo/dest_all/"),B()({method:"post",url:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var a=e.data.data,s=0;s<a.length;s++)a[s].key=s+1;0!=t?n.setState({tagsFromServer:a}):n.setState({tagsFromServer1:a})}).catch(function(e){})},n.handleCreate=function(){n.formRef.props.form.validateFields(function(e,t){if(!e){null!=t.host.match(/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/)?(2==t.type&&(t.schema=""),n.handleAdd(t)):i.a.error("IP地址不合法！")}})},n.handleAdd=function(t){var a=e.constants.httpType+e.constants.website+"/sys_dbinfo/add_dbinfo/";t.ifexit&&1==t.ifexit&&(a=e.constants.httpType+e.constants.website+"/sys_dbinfo/edit_dbinfo/",delete t.ifexit),B()({method:"post",url:a,data:t,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),1==e.data.status)i.a.success("操作成功"),n.loadList(t.sour_or_dest);else{if(0==e.data.status)return void i.a.error("失败！数据源重名!");if(2==e.data.status)return void i.a.error("已配置任务，不能修改删除！");if(3==e.data.status)return void i.a.error("数据库连接失败，请检查数据库信息！")}n.setState({visible:!1,visibleTarget:!1,visibleDetail:!1})}).catch(function(e){})},n.handleCancel=function(){n.setState({visible:!1,visibleTarget:!1,visibleDetail:!1,formValuesBusUpdate:{}})},n.showModal=function(e){0==e?n.setState({visible:!0,formValues:{},ifSourcetype:e}):1==e&&n.setState({visibleTarget:!0,formValues:{},ifSourcetype:e})},n.detailvisible=function(e,t){t.stopPropagation(),n.setState({visibleDetail:!0,formValuesBusUpdate:e})},n.saveFormRef=function(e){n.formRef=e},n.handleClose=function(t,a){var s={id:t};B()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_dbinfo/delete_dbinfo/",data:A.a.Amap(s),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),1==e.data.status)n.setState({visibleDetail:!1,formValuesBusUpdate:{}}),n.loadList(a),i.a.success("删除成功"),n.setState({visibleDetail:!1});else{if(0==e.data.status)return void i.a.error("失败!");if(2==e.data.status)return void i.a.error("已配置任务，不能修改删除！")}}).catch(function(e){})},n.state={selectedTagsSource:[],selectedTagsTarget:[],selectedTags:[],visible:!1,visibleTarget:!1,tagsFromServer1:[],tagsFromServer:[],job_id:t.id,disabledName:!1},n}return v()(a,t),p()(a,[{key:"componentDidMount",value:function(){this.loadList(0),this.loadList(1),void 0!=this.state.job_id&&(this.LoadingDetail(this.state.job_id),this.setState({disabledName:!0}))}},{key:"handleChange",value:function(e,t){if(0!=t){var a=this.state.selectedTags,n=t?[].concat(o()(a),[e]):a.filter(function(t){return t!==e});this.setState({selectedTags:n[n.length-1],color:"#fff"})}}},{key:"handleChangeSource",value:function(e,t){if(0!=t){var a=this.state.selectedTags,n=t?[].concat(o()(a),[e]):a.filter(function(t){return t!==e});this.setState({selectedTagsSource:n[n.length-1],color:"#fff"}),this.props.tt(1,e)}}},{key:"handleChangeTarget",value:function(e,t,a){var n=this.state.selectedTagsTarget,s=t?[].concat(o()(n),[e]):n.filter(function(t){return t!==e});if(String(s[0]).indexOf(",")>-1){var r=s[0].split(","),i=s.concat(r).slice(1);return this.setState({selectedTagsTarget:i,color:"#fff"}),void this.props.tt(2,i.join(","))}this.setState({selectedTagsTarget:s,color:"#fff"}),this.props.tt(2,s.join(","))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.selectedTags,t.selectedTagsSource),r=t.selectedTagsTarget;return S.a.createElement("div",{className:O.a.connent1},S.a.createElement(s.a,{title:"任务名称"},S.a.createElement(c.a,{placeholder:"请输入任务名",value:this.props.input.job_name,className:O.a.nameInput,ref:"inputname",disabled:this.state.disabledName,onChange:function(t){e.props.tt(0,t)}})),S.a.createElement(s.a,{title:"选择数据源"},S.a.createElement("div",{className:O.a.sourcelist},S.a.createElement(E.a,{className:O.a.checktag,style:{background:"#fff",borderStyle:"dashed"},onClick:function(){return e.showModal(0)}},S.a.createElement(l.a,{type:"plus"})," 新建数据源"),this.state.tagsFromServer1.map(function(t){return S.a.createElement(K,{className:O.a.checktag,key:t.key,checked:a==t.name,onChange:function(a){return e.handleChangeSource(t.name,a)}},S.a.createElement(n.a,{src:1==t.type?D.a:M.a,style:{width:39,height:39,float:"left",marginTop:10}}),"  ",S.a.createElement("span",{title:t.name},t.name.length>8?t.name.substring(0,8)+"...":t.name),S.a.createElement("a",{className:O.a.detailBtn,onClick:function(a){return e.detailvisible(t,a)}},"详情  "))}),this.state.formValuesBusUpdate&&Object.keys(this.state.formValuesBusUpdate).length?S.a.createElement(q,{wrappedComponentRef:this.saveFormRef,visible:this.state.visibleDetail,values:this.state.formValuesBusUpdate,onCancel:this.handleCancel,handleClose:this.handleClose,onCreate:function(){return e.handleCreate()}}):null),this.state.visible?S.a.createElement(V,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,ifSourcetype:this.state.ifSourcetype,onCancel:this.handleCancel,onCreate:function(){return e.handleCreate()}}):null),S.a.createElement(s.a,{title:"选择目的地"},S.a.createElement("div",{className:O.a.targetBox},S.a.createElement("div",{className:O.a.sourcelist},S.a.createElement(E.a,{className:O.a.checktag,style:{borderStyle:"dashed"},onClick:function(){return e.showModal(1)}},S.a.createElement(l.a,{type:"plus"})," 新建目的地"),this.state.tagsFromServer.map(function(t){return S.a.createElement(K,{className:O.a.checktag,key:t.key,checked:String(r).indexOf(t.name)>-1,onChange:function(a){return e.handleChangeTarget(t.name,a,1)}},S.a.createElement(n.a,{style:{width:39,height:39,float:"left",marginTop:10},src:1==t.type?D.a:2==t.type?M.a:3==t.type?j.a:L.a}),"  ",S.a.createElement("span",{title:t.name},t.name.length>8?t.name.substring(0,8)+"...":t.name),S.a.createElement("a",{className:O.a.detailBtn,onClick:function(a){return e.detailvisible(t,a)}},"详情  "))})),this.state.visibleTarget?S.a.createElement(V,{wrappedComponentRef:this.saveFormRef,visible:this.state.visibleTarget,ifSourcetype:this.state.ifSourcetype,onCancel:this.handleCancel,onCreate:function(){return e.handleCreate()}}):null)))}}]),a}(C.PureComponent);t.a=z}).call(this,a("yLpj"))},obZn:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(global){var antd_es_button_style__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("+L6B"),antd_es_button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2/Rp"),antd_es_message_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("miYZ"),antd_es_message__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("tsqr"),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("2Taf"),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("vZ4D"),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("l4Ni"),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ujKo"),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("MhPg"),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__),antd_es_steps_style__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("FJo9"),antd_es_steps__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("L41K"),antd_es_modal_style__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2qtc"),antd_es_modal__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("kLXV"),react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_13__),_busCreat_less__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("5ZHM"),_busCreat_less__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_busCreat_less__WEBPACK_IMPORTED_MODULE_14__),_step1__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("gxWv"),_step2__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("Tkb3"),_step3__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("bhxe"),axios__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("vDqi"),axios__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_18__),_pages_config__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("kQFk"),_pages_config__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_pages_config__WEBPACK_IMPORTED_MODULE_19__),confirm=antd_es_modal__WEBPACK_IMPORTED_MODULE_12__.a.confirm,Step=antd_es_steps__WEBPACK_IMPORTED_MODULE_10__.a.Step;function changeURLPar(uri,par,par_value){var pattern=par+"=([^&]*)",replaceText=par+"="+par_value;if(uri.match(pattern)){var tmp="/\\"+par+"=[^&]*/";return tmp=uri.replace(eval(tmp),replaceText),tmp}return uri.match("[?]")?uri+"&"+replaceText:uri+"?"+replaceText}var BusCreat=function(e){function t(){var e;return E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,t),(e=E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this,E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(t).apply(this,arguments))).state={current:3==localStorage.getItem("role_id")?1:0,job_id:e.props.location.query.n,job_name:"",source_name:"",dest_name:""},e.nextStep=function(){var t=e.state.current+1;e.setState({current:t})},e.prev=function(){var t=e.state.current-1;e.setState({current:t})},e.creatbus=function(t,a,n,s,r){0==t?e.setState({job_name:a.target.value}):1==t?e.setState({source_name:a}):2==t?e.setState({dest_name:a}):3==t&&e.setState({job_name:a})},e.onRef=function(t){e.step2=t},e}return E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default()(t,e),E_xmjz_dataOne_Dproject_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(t,[{key:"showConfirm",value:function(){var e=this;confirm({title:"确定创建或保存该任务及配置吗?",content:"修改，将以最新一次配置内容为准！",okText:"确认",cancelText:"取消",onOk:function(){return e.next()},onCancel:function(){}})}},{key:"next",value:function(){this.state.current;0==this.state.current&&this.firstSave(),1==this.state.current&&this.secondSave()}},{key:"firstSave",value:function(){var e=this;if(""!=this.state.job_name&&""!=this.state.source_name&&""!=this.state.dest_name){var t=global.constants.httpType+global.constants.website+"/sys_jobrela/add_jobrela/",a={job_name:this.state.job_name,source_name:this.state.source_name,dest_name:this.state.dest_name};void 0!=location.search.substring(1).split("=")[1]&&(t=global.constants.httpType+global.constants.website+"/sys_jobrela/edit_jobrela/",a={id:location.search.substring(1).split("=")[1],job_name:this.state.job_name,source_name:this.state.source_name,dest_name:this.state.dest_name}),axios__WEBPACK_IMPORTED_MODULE_18___default()({method:"post",url:t,data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(t){if("401"==t.data.status&&(window.location.href="/user"),1==t.data.status){if(t.data.message&&"修改成功"==t.data.message){antd_es_message__WEBPACK_IMPORTED_MODULE_3__.a.success(t.data.message);var a=e.state.current+1;return void e.setState({current:a})}antd_es_message__WEBPACK_IMPORTED_MODULE_3__.a.success("创建成功"),e.setState({job_id:t.data.data.id});var n=t.data.data.id,s=changeURLPar(window.location.href,"n",n);window.history.pushState(null,null,s);var r=e.state.current+1;e.setState({current:r})}else antd_es_message__WEBPACK_IMPORTED_MODULE_3__.a.error(t.data.message)}).catch(function(e){})}else antd_es_message__WEBPACK_IMPORTED_MODULE_3__.a.error("请输入任务名、选择数据源、选择目的地")}},{key:"secondSave",value:function(){this.step2.baseSave()}},{key:"render",value:function(){var e=this,t=this.state.current,a={job_name:this.state.job_name},n=[{title:"创建任务",content:react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(_step1__WEBPACK_IMPORTED_MODULE_15__.a,{tt:this.creatbus,input:a,id:this.state.job_id})},{title:"配置",content:react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(_step2__WEBPACK_IMPORTED_MODULE_16__.a,{tt:this.creatbus,nextStep:this.nextStep,onRef:this.onRef.bind(this),id:this.state.job_id})},{title:"设置",content:react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(_step3__WEBPACK_IMPORTED_MODULE_17__.a,{tt:function(){return e.prev()},id:this.state.job_id})}];return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("div",{className:_busCreat_less__WEBPACK_IMPORTED_MODULE_14___default.a.firstStep,style:{width:"100%"}},react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(antd_es_steps__WEBPACK_IMPORTED_MODULE_10__.a,{current:t},n.map(function(e){return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(Step,{key:e.title,title:e.title,style:{top:10,fontSize:15,fontWeight:600}})})),react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("div",{className:_busCreat_less__WEBPACK_IMPORTED_MODULE_14___default.a.connent},n[t].content),react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("div",{className:"steps-action",style:{width:"92%",margin:"0 auto",overflow:"hidden"}},t<n.length-1&&react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_1__.a,{type:"primary",id:"nextBtn",onClick:function(){return e.showConfirm()},style:{float:"right"},className:"nextBtn"},"下一步"),t>0&&react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_1__.a,{style:{marginRight:8,float:"right"},onClick:function(){return e.prev()},disabled:1==t&&3==localStorage.getItem("role_id")},"上一步")))}}]),t}(react__WEBPACK_IMPORTED_MODULE_13__.PureComponent);__webpack_exports__.default=BusCreat}.call(this,__webpack_require__("yLpj"))}}]);