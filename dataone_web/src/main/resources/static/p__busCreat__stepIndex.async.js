(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"3dVZ":function(e,t,a){e.exports={"ant-collapse":"ant-collapse","ant-collapse-rtl":"ant-collapse-rtl","ant-collapse-item":"ant-collapse-item","ant-collapse-header":"ant-collapse-header","ant-collapse-arrow":"ant-collapse-arrow","ant-collapse-arrow-icon":"ant-collapse-arrow-icon","ant-collapse-extra":"ant-collapse-extra","ant-collapse-no-arrow":"ant-collapse-no-arrow","ant-collapse-icon-position-right":"ant-collapse-icon-position-right","ant-collapse-anim-active":"ant-collapse-anim-active","ant-collapse-content":"ant-collapse-content","ant-collapse-content-box":"ant-collapse-content-box","ant-collapse-content-inactive":"ant-collapse-content-inactive","ant-collapse-borderless":"ant-collapse-borderless","ant-collapse-item-disabled":"ant-collapse-item-disabled",arrow:"arrow"}},"5ZHM":function(e,t,a){e.exports={firstStep:"antd-pro-pages-bus-creat-bus-creat-firstStep",connent:"antd-pro-pages-bus-creat-bus-creat-connent",connent1:"antd-pro-pages-bus-creat-bus-creat-connent1",nameInput:"antd-pro-pages-bus-creat-bus-creat-nameInput",sourcelist:"antd-pro-pages-bus-creat-bus-creat-sourcelist",checktag:"antd-pro-pages-bus-creat-bus-creat-checktag",detailBtn:"antd-pro-pages-bus-creat-bus-creat-detailBtn",iconDetail:"antd-pro-pages-bus-creat-bus-creat-iconDetail",targetBox:"antd-pro-pages-bus-creat-bus-creat-targetBox","steps-action":"antd-pro-pages-bus-creat-bus-creat-steps-action",detailForm:"antd-pro-pages-bus-creat-bus-creat-detailForm"}},"7aci":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAVCAYAAABCIB6VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVBN0EyNTgzMkFBNzExRUFBMTc4RkY1NjIzOUMzQTlBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVBN0EyNTg0MkFBNzExRUFBMTc4RkY1NjIzOUMzQTlBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUE3QTI1ODEyQUE3MTFFQUExNzhGRjU2MjM5QzNBOUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUE3QTI1ODIyQUE3MTFFQUExNzhGRjU2MjM5QzNBOUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5B6NdqAAABZElEQVR42rSVu0rEUBRF74T4BkWwGUQE0UZBwU4QdBTBD7C0sVLsfJWChYWPVhDEX5gPsLK2cESsBvGBrQja+Bg1cR04whVmkpuY2bByk5DZOex7ciY3uRcatAQr0AOBSScPHuEYdnwOC3AI21DSh3IJTUNdB2AXGsV4GQ5gM02Zpxt/rwv7psKyJuV3wYXJTlfQLMbf0JChsXgFnqmT/Cr3hmELFqFNN7ajlgGZvrGskvVlnHEeRqEdOmFQMoso7gu6Idb4BPr1B0bP/QjjgGo/XKIwlqnoU3FqN/trictedrmlFmTc5GpcgDL0wghcwz3cVUHu32A+7RLFK9xqf1f0vDUiY4np3cX4DGas66kkn3Rcxv9RWC9j6SjP0xEZZmg8C8++Vh1YrSXjs8/1ZXSELfmjmID5X+MXba0jGLIGflI9wRwbWvQ1Chn2Y3Cus+Eh7aC3u6KoQ2QdxpOYRulHgAEA06JNWqbqQowAAAAASUVORK5CYII="},"8txm":function(e,t,a){e.exports={"ant-steps":"ant-steps","ant-steps-rtl":"ant-steps-rtl","ant-steps-item":"ant-steps-item","ant-steps-item-container":"ant-steps-item-container","ant-steps-item-content":"ant-steps-item-content","ant-steps-item-title":"ant-steps-item-title","ant-steps-item-tail":"ant-steps-item-tail","ant-steps-item-icon":"ant-steps-item-icon","ant-steps-icon":"ant-steps-icon","ant-steps-item-subtitle":"ant-steps-item-subtitle","ant-steps-item-description":"ant-steps-item-description","ant-steps-item-wait":"ant-steps-item-wait","ant-steps-icon-dot":"ant-steps-icon-dot","ant-steps-item-process":"ant-steps-item-process","ant-steps-item-finish":"ant-steps-item-finish","ant-steps-item-error":"ant-steps-item-error","ant-steps-next-error":"ant-steps-next-error","ant-steps-item-active":"ant-steps-item-active","ant-steps-horizontal":"ant-steps-horizontal","ant-steps-label-vertical":"ant-steps-label-vertical","ant-steps-item-custom":"ant-steps-item-custom","ant-steps-vertical":"ant-steps-vertical","ant-steps-small":"ant-steps-small","ant-steps-label-horizontal":"ant-steps-label-horizontal","ant-steps-dot":"ant-steps-dot","ant-steps-navigation":"ant-steps-navigation"}},A0we:function(e,t,a){e.exports=a.p+"static/dameng.9bbc52a2.png"},BCMQ:function(e,t,a){"use strict";a("+L6B");var n=a("2/Rp"),s=(a("g9YV"),a("wCAj")),r=(a("sRBo"),a("kaz8")),o=a("eHn4"),i=a.n(o),l=a("gWZ8"),c=a.n(l),u=(a("rlhR"),a("5NDa"),a("5rEg")),d=a("p0pE"),_=a.n(d),p=a("2Taf"),m=a.n(p),h=a("vZ4D"),f=a.n(h),b=a("l4Ni"),y=a.n(b),g=a("ujKo"),v=a.n(g),E=a("MhPg"),k=a.n(E),w=a("Y/ft"),C=a.n(w),S=(a("OaEy"),a("2fM7")),O=a("q1tI"),T=a.n(O),x=a("QbIw"),P=a.n(x),B=a("WsrF"),I=(a("XlDN"),a("w5pM")),j=T.a.createContext(),N=S.a.Option,A=B.a.create()(function(e){var t=e.form,a=(e.index,C()(e,["form","index"]));return T.a.createElement(j.Provider,{value:t},T.a.createElement("tr",Object.assign({},a)))}),D=function(e){function t(){var e;return m()(this,t),(e=y()(this,v()(t).apply(this,arguments))).state={editing:!1},e.toggleEdit=function(){var t=!e.state.editing;e.setState({editing:t},function(){t&&e.input.focus()})},e.save=function(t){var a=e.props,n=a.record,s=a.handleSave;e.form.validateFields(function(a,r){a&&a[t.currentTarget.id]||(e.toggleEdit(),s(_()({},n,r)))})},e.renderCell=function(t){e.form=t;var a=e.props,n=a.children,s=a.dataIndex,r=a.record,o=a.title;return e.state.editing?T.a.createElement(B.a.Item,{style:{margin:0}},t.getFieldDecorator(s,{rules:[{required:!0,message:"".concat(o," is required.")}],initialValue:r[s]})(T.a.createElement(u.a,{ref:function(t){return e.input=t},onPressEnter:e.save,onBlur:e.save}))):T.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:12},onClick:e.toggleEdit},n)},e}return k()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),n=C()(e,["editable","dataIndex","title","record","index","handleSave","children"]);return T.a.createElement("td",Object.assign({},n),t?T.a.createElement(j.Consumer,null,this.renderCell):a)}}]),t}(T.a.Component),M=function(e){function t(e){var a;m()(this,t),(a=y()(this,v()(t).call(this,e))).loadCss=function(){for(var e=document.getElementsByClassName("disabledTd"),t=document.getElementsByTagName("tr"),n=0;n<t.length;n++)t[n].style.color="rgba(0, 0, 0, 0.65)",t[n].style.cursor="default";for(n=0;n<e.length;n++)e[n].parentElement.parentElement.style.color="rgba(0, 0, 0, 0.25)",e[n].parentElement.parentElement.style.cursor="not-allowed";for(var s=document.getElementsByClassName("ant-select-selection--single"),r=document.getElementsByClassName("ant-select-selection-selected-value"),o=0;o<s.length;o++)r[o].innerHTML=s[o].getAttribute("data-value");a.setState({typechangeList:[]})},a.handleAdd=function(){a.props.addFiled()},a.handleAdd1=function(e){var t=a.state,n=t.count,s=t.dataSource,r={key:"add_time",dest_field_name:e.dest_field_name,source_name:e.field_name,type:e.type,length:0,null:0,precision:0,desensitization_way:"",onlykey:"",operal:""};a.setState({dataSource:[].concat(c()(s),[r]),count:n+1,addtimeBtn:!1})},a.deleteLine=function(e){a.props.deleteLine(e)},a.noDeleteLine=function(e){a.props.noDeleteLine(e)},a.signalTuo=function(e){var t={source_field:e.source_name,dest_field:e.dest_field_name};a.props.showModal(4,t)},a.savechange=function(){for(var e=a.state.dataSource,t=a.state.typechangeList,n=0;n<t.length;n++)for(var s=0;s<e.length;s++)t[n][0]==e[s].source_name&&(e[s].type=t[n][1]);for(var r=[],o="",i=0;i<e.length;i++){if(1!=e[i].var_flag&&"add_time"!=e[i].key){var l=[e[i].source_name,e[i].dest_field_name,e[i].type,e[i].length,e[i].null,e[i].precision,e[i].typeSource,e[i].lengthSource,e[i].nullSource,e[i].precisionSource];r.push(l)}"add_time"==e[i].key&&1!=e[i].var_flag&&(o=e[i].dest_field_name)}a.props.save(0,r,a.state.valueRadio,o)},a.handleSave=function(e){var t=c()(a.state.dataSource),n=t.findIndex(function(t){return e.key===t.key}),s=t[n];t.splice(n,1,_()({},s,e)),a.setState({dataSource:t})},a.onchangeRadio=function(e){a.setState({valueRadio:[e[e.length-1]]})},a.onchangeSelect=function(e,t){document.getElementsByClassName("ant-select-selection-selected-value")[t.key].innerHTML=e;var n=a.state.typechangeList;0==n.length&&n.push([t.source_name,e]);for(var s=0;s<n.length;s++){if(n[s][0]==t.source_name){n[s][1]=e;break}s==n.length-1&&n.push([t.source_name,e])}a.setState(i()({typechangeList:n},t.source_name,e))};var n=[];return 1==e.dest_type?n=["XMLTYPE","CHAR","NCHAR","DECIMAL","BFILE","BLOB","CLOB","DATE","FLOAT","BINARY_FLOAT","BINARY_DOUBLE","INTERVAL","LONG","RAW","LONG RAW","NCLOB","NVARCHAR2","REAL","TIMESTAMP","INTERVAL DAY","INTERVAL YEAR","UROWID","ROWID","VARCHAR2","NUMBER","INTEGER"]:2==e.dest_type?n=["char","bool","real","float","date","datetime","bigint","int","decimal","bit","binary","varbinary","datetime","blob","double","int","integer","enum","longblob","longtext","mediumblob","mediumint","mediumtext","numeric","set","smallint","text","timestamp","time","tinyblob","tinyint","tinytext","varchar","year","point","linestring","polygon","geometry","multipoint","multilinestring","multipolygon","geometrycollection","nvarchar"]:3==e.dest_type?n=["image","text","uniqueidentifier","date","time","datetime2","datetimeoffset","tinyint","smallint","int","smalldatetime","money","datetime","float","sql_variant","ntext","bit","decimal","numeric","smallmoney","bigint","hierarchyid","geometry","geography","varbinary","varchar","binary","char","timestamp","nvarchar","nchar","xml","sysname"]:4==e.dest_type&&(n=["XMLTYPE","CHAR","NCHAR","DECIMAL","BLOB","CLOB","NCLOB","DATE","FLOAT","BINARY_FLOAT","BINARY_DOUBLE","INTERVAL","LONG","RAW","LONG RAW",,"NVARCHAR2","REAL","TIMESTAMP","INTERVAL DAY","INTERVAL YEAR","UROWID","ROWID","VARCHAR2","NUMBER","INTEGER","BFILE"]),a.state={dataSource:e.dataSource,job_id:e.job_id,dest_type:e.dest_type,selectedRowKeys:[],valueRadio:[],typechangeList:[],dbtypelist:n,addtimeBtn:1!=e.dataSource[e.dataSource.length-1].add_flag},a.columns1=[{title:"字段名称",dataIndex:"dest_field_name",key:"dest_field_name",editable:!0,render:function(e,t){return T.a.createElement("span",{className:1==t.var_flag?"disabledTd":"",style:{paddingLeft:1==t.var_flag||"add_time"==t.key?12:""},title:e},e)}},{title:"类型",dataIndex:"type",key:"type",render:function(e,t){return T.a.createElement(S.a,{onChange:function(e){return a.onchangeSelect(e,t)},"data-value":e,className:"selectChange",disabled:1==t.var_flag||"add_time"==t.key,title:e,size:"small",style:{width:100,border:"none",fontSize:12},value:t.type},a.state.dbtypelist.map(function(e,t){return T.a.createElement(N,{value:e,key:t},e)}))}},{title:"长度",dataIndex:"length",key:"length",editable:!0,render:function(e,t){return T.a.createElement("span",{style:{paddingLeft:1==t.var_flag||"add_time"==t.key?12:""},title:e},e)}},{title:"not null",dataIndex:"null",key:"null",editable:!0,render:function(e,t){return T.a.createElement("span",{style:{paddingLeft:1==t.var_flag||"add_time"==t.key?12:""},title:e},e)}},{title:"精度",dataIndex:"precision",key:"precision"},{title:"脱敏",dataIndex:"desensitization_way",key:"desensitization_way",render:function(e,t){return T.a.createElement("span",null,T.a.createElement("span",null,"1"==e?"*隐藏":"2"==e?"固定值: "+t.remark:"3"==e?"随机值":"不脱敏")," ")}},{title:"主键",dataIndex:"onlykey",key:"onlykey",render:function(e,t){return T.a.createElement(r.a,{value:t.dest_field_name,disabled:1==t.var_flag||"add_time"==t.key})}},{title:"操作",dataIndex:"operal",key:"operal",render:function(e,t){return T.a.createElement("span",null,T.a.createElement("a",{onClick:function(e){return a.signalTuo(t)},disabled:1==t.var_flag||"add_time"==t.key},"脱敏"),"   ",T.a.createElement("a",{style:{display:1==t.var_flag?"inline-block":"none",color:"rgba(0, 0, 0, 0.65)"},onClick:function(e){return a.noDeleteLine(t)}},"撤销删除"),T.a.createElement("a",{style:{display:1==t.var_flag?"none":"inline-block",color:"#4664b4"},onClick:function(e){return a.deleteLine(t)}},"删除"))}}],a}return k()(t,e),f()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({dataSource:e.dataSource,addtimeBtn:1!=e.dataSource[e.dataSource.length-1].add_flag})}},{key:"componentDidMount",value:function(){this.props.onRef(this),this.loadCss()}},{key:"render",value:function(){var e=this,t=this.state.dataSource,a={body:{row:A,cell:D}},o=this.columns1.map(function(t){return t.editable?_()({},t,{onCell:function(a){return{record:a,editable:"add_time"!=a.key&&1!=a.var_flag,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t});return T.a.createElement("div",{style:{width:"100%"}},T.a.createElement("div",{style:{width:"100%"}},T.a.createElement(r.a.Group,{onChange:this.onchangeRadio,value:this.state.valueRadio,style:{width:"100%"}},T.a.createElement(s.a,{size:"small",components:a,rowClassName:function(){return"editable-row"},dataSource:t,columns:o,pagination:!1}))),T.a.createElement("span",{style:{display:this.state.addtimeBtn?"block":"none",color:"#F1B00A",cursor:"point"}},T.a.createElement(I.a,{style:{fontSize:18},onClick:this.handleAdd}),"  添加字段"),T.a.createElement(n.a,{type:"primary",className:P.a.btnSubmite,style:{marginTop:10,marginBottom:10,float:"right"},onClick:this.savechange},"保存表配置"))}}]),t}(T.a.Component);t.a=M},FJo9:function(e,t,a){"use strict";a("cIOH"),a("8txm")},L41K:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("17x9"),o=a.n(r),i=a("i8i4"),l=a("TSYQ"),c=a.n(l),u=a("sEfC"),d=a.n(u);function _(){if("undefined"!=typeof window&&window.document&&window.document.documentElement){var e=window.document.documentElement;return"flex"in e.style||"webkitFlex"in e.style||"Flex"in e.style||"msFlex"in e.style}return!1}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function h(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var E=function(e){function t(e){var a,n,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,s=b(t).call(this,e),v(y(a=!s||"object"!=typeof s&&"function"!=typeof s?y(n):s),"onStepClick",function(e){var t=a.props,n=t.onChange,s=t.current;n&&s!==e&&n(e)}),v(y(a),"calcStepOffsetWidth",function(){if(!_()){var e=a.state.lastStepOffsetWidth,t=Object(i.findDOMNode)(y(a));t.children.length>0&&(a.calcTimeout&&clearTimeout(a.calcTimeout),a.calcTimeout=setTimeout(function(){var n=(t.lastChild.offsetWidth||0)+1;e===n||Math.abs(e-n)<=3||a.setState({lastStepOffsetWidth:n})}))}}),a.state={flexSupported:!0,lastStepOffsetWidth:0},a.calcStepOffsetWidth=d()(a.calcStepOffsetWidth,150),a}var a,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,n["Component"]),a=t,(r=[{key:"componentDidMount",value:function(){this.calcStepOffsetWidth(),_()||this.setState({flexSupported:!1})}},{key:"componentDidUpdate",value:function(){this.calcStepOffsetWidth()}},{key:"componentWillUnmount",value:function(){this.calcTimeout&&clearTimeout(this.calcTimeout),this.calcStepOffsetWidth&&this.calcStepOffsetWidth.cancel&&this.calcStepOffsetWidth.cancel()}},{key:"render",value:function(){var e,t=this,a=this.props,r=a.prefixCls,o=a.style,i=void 0===o?{}:o,l=a.className,u=a.children,d=a.direction,_=a.type,f=a.labelPlacement,b=a.iconPrefix,y=a.status,g=a.size,E=a.current,k=a.progressDot,w=a.initial,C=a.icons,S=a.onChange,O=h(a,["prefixCls","style","className","children","direction","type","labelPlacement","iconPrefix","status","size","current","progressDot","initial","icons","onChange"]),T="navigation"===_,x=this.state,P=x.lastStepOffsetWidth,B=x.flexSupported,I=s.a.Children.toArray(u).filter(function(e){return!!e}),j=I.length-1,N=k?"vertical":f,A=c()(r,"".concat(r,"-").concat(d),l,(v(e={},"".concat(r,"-").concat(g),g),v(e,"".concat(r,"-label-").concat(N),"horizontal"===d),v(e,"".concat(r,"-dot"),!!k),v(e,"".concat(r,"-navigation"),T),v(e,"".concat(r,"-flex-not-supported"),!B),e));return s.a.createElement("div",p({className:A,style:i},O),n.Children.map(I,function(e,a){if(!e)return null;var s=w+a,o=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach(function(t){v(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({stepNumber:"".concat(s+1),stepIndex:s,prefixCls:r,iconPrefix:b,wrapperStyle:i,progressDot:k,icons:C,onStepClick:S&&t.onStepClick},e.props);return B||"vertical"===d||(T?(o.itemWidth="".concat(100/(j+1),"%"),o.adjustMarginRight=0):a!==j&&(o.itemWidth="".concat(100/j,"%"),o.adjustMarginRight=-Math.round(P/j+1))),"error"===y&&a===E-1&&(o.className="".concat(r,"-next-error")),e.props.status||(o.status=s===E?y:s<E?"finish":"wait"),o.active=s===E,Object(n.cloneElement)(e,o)}))}}])&&f(a.prototype,r),o&&f(a,o),t}();function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function C(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function S(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function B(e){return"string"==typeof e}v(E,"propTypes",{type:o.a.string,prefixCls:o.a.string,className:o.a.string,iconPrefix:o.a.string,direction:o.a.string,labelPlacement:o.a.string,children:o.a.any,status:o.a.string,size:o.a.string,progressDot:o.a.oneOfType([o.a.bool,o.a.func]),style:o.a.object,initial:o.a.number,current:o.a.number,icons:o.a.shape({finish:o.a.node,error:o.a.node}),onChange:o.a.func}),v(E,"defaultProps",{type:"default",prefixCls:"rc-steps",iconPrefix:"rc",direction:"horizontal",labelPlacement:"horizontal",initial:0,current:0,status:"process",size:"",progressDot:!1});var I=function(e){function t(){var e,a,n,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=this,s=(e=O(t)).call.apply(e,[this].concat(o)),P(T(a=!s||"object"!=typeof s&&"function"!=typeof s?T(n):s),"onClick",function(){var e=a.props,t=e.onClick,n=e.onStepClick,s=e.stepIndex;t&&t.apply(void 0,arguments),n(s)}),a}var a,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,s.a.Component),a=t,(n=[{key:"renderIconNode",value:function(){var e,t=this.props,a=t.prefixCls,n=t.progressDot,r=t.stepNumber,o=t.status,i=t.title,l=t.description,u=t.icon,d=t.iconPrefix,_=t.icons,p=c()("".concat(a,"-icon"),"".concat(d,"icon"),(P(e={},"".concat(d,"icon-").concat(u),u&&B(u)),P(e,"".concat(d,"icon-check"),!u&&"finish"===o&&_&&!_.finish),P(e,"".concat(d,"icon-close"),!u&&"error"===o&&_&&!_.error),e)),m=s.a.createElement("span",{className:"".concat(a,"-icon-dot")});return n?"function"==typeof n?s.a.createElement("span",{className:"".concat(a,"-icon")},n(m,{index:r-1,status:o,title:i,description:l})):s.a.createElement("span",{className:"".concat(a,"-icon")},m):u&&!B(u)?s.a.createElement("span",{className:"".concat(a,"-icon")},u):_&&_.finish&&"finish"===o?s.a.createElement("span",{className:"".concat(a,"-icon")},_.finish):_&&_.error&&"error"===o?s.a.createElement("span",{className:"".concat(a,"-icon")},_.error):u||"finish"===o||"error"===o?s.a.createElement("span",{className:p}):s.a.createElement("span",{className:"".concat(a,"-icon")},r)}},{key:"render",value:function(){var e,t=this.props,a=t.className,n=t.prefixCls,r=t.style,o=t.itemWidth,i=t.active,l=t.status,u=void 0===l?"wait":l,d=(t.iconPrefix,t.icon),_=(t.wrapperStyle,t.adjustMarginRight),p=(t.stepNumber,t.disabled),m=t.description,h=t.title,f=t.subTitle,b=(t.progressDot,t.tailContent),y=(t.icons,t.stepIndex,t.onStepClick),g=t.onClick,v=C(t,["className","prefixCls","style","itemWidth","active","status","iconPrefix","icon","wrapperStyle","adjustMarginRight","stepNumber","disabled","description","title","subTitle","progressDot","tailContent","icons","stepIndex","onStepClick","onClick"]),E=c()("".concat(n,"-item"),"".concat(n,"-item-").concat(u),a,(P(e={},"".concat(n,"-item-custom"),d),P(e,"".concat(n,"-item-active"),i),P(e,"".concat(n,"-item-disabled"),!0===p),e)),S=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){P(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},r);o&&(S.width=o),_&&(S.marginRight=_);var O={};return y&&!p&&(O.role="button",O.tabIndex=0,O.onClick=this.onClick),s.a.createElement("div",k({},v,{className:E,style:S}),s.a.createElement("div",k({onClick:g},O,{className:"".concat(n,"-item-container")}),s.a.createElement("div",{className:"".concat(n,"-item-tail")},b),s.a.createElement("div",{className:"".concat(n,"-item-icon")},this.renderIconNode()),s.a.createElement("div",{className:"".concat(n,"-item-content")},s.a.createElement("div",{className:"".concat(n,"-item-title")},h,f&&s.a.createElement("div",{title:f,className:"".concat(n,"-item-subtitle")},f)),m&&s.a.createElement("div",{className:"".concat(n,"-item-description")},m))))}}])&&S(a.prototype,n),r&&S(a,r),t}();P(I,"propTypes",{className:o.a.string,prefixCls:o.a.string,style:o.a.object,wrapperStyle:o.a.object,itemWidth:o.a.oneOfType([o.a.number,o.a.string]),active:o.a.bool,disabled:o.a.bool,status:o.a.string,iconPrefix:o.a.string,icon:o.a.node,adjustMarginRight:o.a.oneOfType([o.a.number,o.a.string]),stepNumber:o.a.string,stepIndex:o.a.number,description:o.a.any,title:o.a.any,subTitle:o.a.any,progressDot:o.a.oneOfType([o.a.bool,o.a.func]),tailContent:o.a.any,icons:o.a.shape({finish:o.a.node,error:o.a.node}),onClick:o.a.func,onStepClick:o.a.func}),E.Step=I;var j=E,N=a("NAnI"),A=a.n(N),D=a("V/uB"),M=a.n(D),L=a("H84U");function R(e){"@babel/helpers - typeof";return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function K(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}a.d(t,"a",function(){return F});var F=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=U(this,V(t).apply(this,arguments))).renderSteps=function(t){var a,s,r,o=t.getPrefixCls,i=t.direction,l=o("steps",e.props.prefixCls),u=o("",e.props.iconPrefix),d=c()(e.props.className,(a={},s="".concat(l,"-rtl"),r="rtl"===i,s in a?Object.defineProperty(a,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[s]=r,a)),_={finish:n.createElement(A.a,{className:"".concat(l,"-finish-icon")}),error:n.createElement(M.a,{className:"".concat(l,"-error-icon")})};return n.createElement(j,W({icons:_},e.props,{prefixCls:l,iconPrefix:u,className:d}))},e}var a,s,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,n["Component"]),a=t,(s=[{key:"render",value:function(){return n.createElement(L.a,null,this.renderSteps)}}])&&K(a.prototype,s),r&&K(a,r),t}();F.Step=j.Step,F.defaultProps={current:0}},Tkb3:function(e,t,a){"use strict";(function(e){a("sRBo");var n=a("kaz8"),s=(a("iQDF"),a("+eQT")),r=(a("5NDa"),a("5rEg")),o=(a("7Kak"),a("9yH6")),i=(a("+BJd"),a("mr32")),l=(a("+L6B"),a("2/Rp")),c=(a("Telt"),a("Tckk")),u=(a("5Dmo"),a("3S7+")),d=(a("Q9mQ"),a("diRs")),_=(a("IzEo"),a("bx4M")),p=(a("miYZ"),a("tsqr")),m=a("2Taf"),h=a.n(m),f=a("vZ4D"),b=a.n(f),y=a("l4Ni"),g=a.n(y),v=a("ujKo"),E=a.n(v),k=a("MhPg"),w=a.n(k),C=(a("2qtc"),a("kLXV")),S=(a("OaEy"),a("2fM7")),O=(a("Znn+"),a("ZTPi")),T=a("q1tI"),x=a.n(T),P=a("WsrF"),B=a("Lyp1"),I=a("xvlK"),j=(a("XlDN"),a("wd/R")),N=a.n(j),A=a("QbIw"),D=a.n(A),M=a("vDqi"),L=a.n(M),R=a("jHKv"),W=a("7aci"),K=a.n(W),U=(a("kQFk"),O.a.TabPane),V=S.a.Option,q=(C.a.confirm,P.a.Item),F="YYYY-MM-DD hh:mm:ss",G=P.a.create()(function(e){function t(e){var a;return h()(this,t),(a=g()(this,E()(t).call(this,e))).handleChange=function(e){a.setState({selectedList:e})},a.state={},a}return w()(t,e),b()(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,s=e.form,r=e.optionList,o=e.selectedList,i=s.getFieldDecorator;return x.a.createElement(C.a,{visible:t,title:"选择参与人",okText:"确认",onCancel:a,onOk:n},x.a.createElement(P.a,{style:{height:300}},x.a.createElement(q,{labelCol:{span:0},wrapperCol:{span:24},label:""},i("userId",{rules:[{required:!0,message:"请输入新建小组名称！"}],initialValue:o})(x.a.createElement(S.a,{mode:"multiple",placeholder:"请输入参与者用户名",onChange:this.handleChange,dropdownStyle:{overflow:"auto",width:"100%"},optionLabelProp:"label",dropdownMenuStyle:{top:0,left:20},autoFocus:!0,open:!0,className:D.a.nameInput},r.map(function(e){return x.a.createElement(S.a.Option,{value:e.user_id,key:e.key,label:e.login_name,disabled:"管理员"==e.role_name},x.a.createElement("span",{role:"img","aria-label":"China"},e.login_name))}))))))}}]),t}(x.a.Component)),z=function(t){function a(t){var n;return h()(this,a),(n=g()(this,E()(a).call(this,t))).state={optionList:[],selectedNum:[]},n.loadSourceChange=function(){var t={jobId:n.state.job_id};L()({method:"post",url:e.constants.httpType+e.constants.website+"/data_change_settings/check_data_change/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data[0];n.setState({changevalue1:t.delete_syncing_source,changevalue2:t.newtable_source,changevalue3:t.delete_sync,changevalue4:t.new_sync})}).catch(function(e){})},n.loaderrorChange=function(){var t={jobId:n.state.job_id};L()({method:"post",url:e.constants.httpType+e.constants.website+"/error_queue_settings/check_error_queue/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.setState({pause_setup:t.pause_setup,pre_steup:t.pre_steup,warn_setup:t.warn_setup})}).catch(function(e){})},n.loademailChange=function(){var t={jobId:n.state.job_id};L()({method:"post",url:e.constants.httpType+e.constants.website+"/mailnotify_settings/check_mailnotify/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data[0];n.setState({job_error:1==t.job_error,source_change:1==t.source_change,error_queue_pause:1==t.error_queue_pause,error_queue_alert:1==t.error_queue_alert})}).catch(function(e){})},n.loadInNumber=function(){var t={jobId:n.state.job_id};L()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobrela/selUserByJobId/",data:R.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var t=e.data.data,a=[],s=0;s<t.length;s++)a.push(t[s].id),t[s].color=n.color16();n.setState({selectedList:a,selectedNum:t})}).catch(function(e){})},n.color16=function(){var e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),a=Math.floor(256*Math.random());return"#"+e.toString(16)+t.toString(16)+a.toString(16)},n.loadNumber=function(){L()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_user/alluser/",headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var t=e.data.data,a=[],s=0;s<t.length;s++)t[s].key=s,a.push(t[s].user_id);n.setState({optionList:t})}).catch(function(e){})},n.LoadingDetail=function(t){var a={id:t};L()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobrela/check_jobinfo/",data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.setState({job_name:t.job_name,dest_name:t.dest_name,source_name:t.source_name,source_type:t.source_type,binlogIf:1==t.source_type?"3":"2"})}).catch(function(e){})},n.Loadingpei=function(t){var a={job_id:t};L()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobinfo/check_jobinfo/",data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data[0],a=t.max_source_read,s="KB/秒";""!=t.max_source_read&&t.max_source_read.indexOf("KB")>-1?(a=t.max_source_read.split("K")[0],s="KB/秒"):""!=t.max_source_read&&t.max_source_read.indexOf("MB")>-1&&(a=t.max_source_read.split("M")[0],s="MB/秒");var r=t.max_source_read_to;""!=t.max_source_read_to&&t.max_source_read_to.indexOf("行")>-1&&(r=t.max_source_read_to.split("行")[0]);var o=t.max_dest_write_to;""!=t.max_dest_write_to&&t.max_dest_write_to.indexOf("行")>-1&&(o=t.max_dest_write_to.split("行")[0]);var i=t.max_dest_write,l="KB/秒";""!=t.max_dest_write&&t.max_dest_write.indexOf("KB")>-1?(i=t.max_dest_write.split("K")[0],l="KB/秒"):""!=t.max_dest_write&&t.max_dest_write.indexOf("MB")>-1&&(i=t.max_dest_write.split("M")[0],l="MB/秒"),n.setState({valueBackWay:t.sync_range,passWayValue:t.sync_way,begin_time:t.begin_time,end_time:t.end_time,read_frequency:t.read_frequency,changevalue5:t.read_begin,ifpassWay:t.data_enc,scn:t.log_miner_scn,Binlog_Postion:t.binlog_postion,Binlog_file:t.binlog,source_read_concurrent_num:t.source_read_concurrent_num,dest_write_concurrent_num:t.dest_write_concurrent_num,max_dest_write:i,max_dest_write_to:o,max_source_read:a,max_source_read1:s,max_dest_write1:l,max_source_read_to:r,ifmax_source_read:""!=t.max_source_read,ifmax_source_read_to:""!=t.max_source_read_to,ifmax_dest_write:""!=t.max_dest_write,ifmax_dest_write_to:""!=t.max_dest_write_to}),1==t.read_begin&&2==t.sync_range&&1==t.source_type?n.setState({ifOracle:1}):1==t.read_begin&&2==t.sync_range&&2==t.source_type&&n.setState({ifOracle:2})}).catch(function(e){})},n.startChange=function(e,t){n.setState({begin_time:t})},n.endChange=function(e,t){n.setState({end_time:t})},n.readWay=function(e){n.setState({valueReadWay:e.target.value})},n.valueBackWay=function(e,t){switch(e){case 0:n.setState({valueBackWay:t.target.value}),2==t.target.value&&1==n.state.source_type||3==t.target.value&&1==n.state.source_type?n.setState({passWayValue:3,read_frequency:60,changevalue5:0,ifOracle:0}):2==t.target.value&&2==n.state.source_type||3==t.target.value&&2==n.state.source_type?n.setState({passWayValue:2,read_frequency:60,changevalue5:0,ifOracle:0}):1==t.target.value&&n.setState({passWayValue:0});break;case 1:n.setState({passWayValue:t.target.value}),1==n.state.valueBackWay&&n.setState({read_frequency:60});break;case 2:n.setState({ifpassWay:t.target.value});break;case 3:n.setState({changevalue1:t.target.value});break;case 4:n.setState({changevalue2:t.target.value});break;case 5:n.setState({changevalue3:t.target.value});break;case 6:n.setState({changevalue4:t.target.value});break;case 7:1==t.target.value&&1==n.state.source_type?n.setState({ifOracle:1,scn:"",Binlog_Postion:"",Binlog_file:""}):1==t.target.value&&2==n.state.source_type?n.setState({ifOracle:2,Binlog_Postion:"",Binlog_file:"",scn:""}):n.setState({ifOracle:0,Binlog_Postion:"",Binlog_file:"",scn:""}),n.setState({changevalue5:t.target.value});break;case 8:n.setState({read_frequency:t.target.value});break;case 9:n.setState({pre_steup:t.target.value});break;case 10:n.setState({warn_setup:t.target.value});break;case 11:n.setState({pause_setup:t.target.value});break;case 12:n.setState({job_error:t.target.checked});break;case 13:n.setState({error_queue_alert:t.target.checked});break;case 14:n.setState({error_queue_pause:t.target.checked});break;case 15:n.setState({source_change:t.target.checked});break;case 16:n.setState({Binlog_Postion:t.target.value});break;case 17:n.setState({Binlog_file:t.target.value});break;case 18:n.setState({scn:t.target.value});break;case 19:n.setState({source_read_concurrent_num:t.target.value});break;case 20:n.setState({max_source_read:t.target.value});break;case 21:n.setState({max_source_read_to:t.target.value});break;case 22:n.setState({dest_write_concurrent_num:t.target.value});break;case 23:n.setState({max_dest_write:t.target.value});break;case 24:n.setState({max_dest_write_to:t.target.value});break;case 25:n.setState({max_source_read1:t});break;case 26:n.setState({max_dest_write1:t});break;case 27:n.setState({ifmax_source_read:t.target.checked});break;case 28:n.setState({ifmax_source_read_to:t.target.checked});break;case 29:n.setState({ifmax_dest_write:t.target.checked});break;case 30:n.setState({ifmax_dest_write_to:t.target.checked})}},n.showModal=function(){n.setState({visible:!0,formValues:{}})},n.handleCancel=function(){n.setState({visible:!1,formValuesBusUpdate:{}})},n.handleChange=function(e){},n.handleCreate=function(){n.formRef.props.form.validateFields(function(e,t){e||n.handleAdd(t)})},n.handleAdd=function(t){var a={userId:t.userId,jobId:n.state.job_id},s=e.constants.httpType+e.constants.website+"/sys_jobrela/addUserByJobId/";L()({method:"post",url:s,data:R.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),1==e.data.status)p.a.success("参与人设置成功"),n.loadInNumber();else if(0==e.data.status)return void p.a.error(e.data.message);n.setState({visible:!1})}).catch(function(e){})},n.saveFormRef=function(e){n.formRef=e},n.state={valueBackWay:1,ifpassWay:0,passWayValue:0,showQuan:0,changevalue1:0,changevalue2:0,changevalue3:0,changevalue4:0,changevalue5:0,value:1,readbegin:0,job_id:t.id,optionList:[],ifshow:!1,selectedNum:[],selectedList:[],pre_steup:1e5,warn_setup:.5,pause_setup:1,job_error:!0,error_queue_pause:!0,error_queue_alert:!0,source_change:!0,ifOracle:0,begin_time:"2019-01-01 00:00:00",end_time:"2019-01-01 00:00:00",max_source_read:3,max_source_read1:"KB/秒",max_dest_write:3,max_dest_write1:"KB/秒",ifmax_source_read:!0,ifmax_source_read_to:!0,max_source_read_to:2500,ifmax_dest_write:!0,ifmax_dest_write_to:!0,max_dest_write_to:2500,source_read_concurrent_num:1,dest_write_concurrent_num:2},n}return w()(a,t),b()(a,[{key:"componentDidMount",value:function(){this.LoadingDetail(this.state.job_id),this.Loadingpei(this.state.job_id),this.loadNumber(),this.loadInNumber(),this.loadSourceChange(),this.loaderrorChange(),this.loademailChange(),this.props.onRef(this)}},{key:"baseSave",value:function(){var t=this;if(1==this.state.changevalue5&&2==this.state.source_type&&2==this.state.valueBackWay){if(""==this.state.Binlog_file||""==this.state.Binlog_Postion||void 0==this.state.Binlog_file||void 0==this.state.Binlog_Postion)return void p.a.error("请填写自定义读取起点1！")}else if(1==this.state.changevalue5&&1==this.state.source_type&&2==this.state.valueBackWay&&(void 0==this.state.scn||""==this.state.scn))return void p.a.error("请填写自定义读取起点！");if(""==this.state.max_source_read&&this.state.ifmax_source_read)p.a.error("请填写读取速率限制值！");else if(""==this.state.max_source_read_to&&this.state.ifmax_source_read_to)p.a.error("请填写读取速率限制值！");else if(""==this.state.max_dest_write&&this.state.ifmax_dest_write)p.a.error("请填写写入速率限制值！");else if(""==this.state.max_dest_write_to&&this.state.ifmax_dest_write_to)p.a.error("请填写写入速率限制值！");else{var a={job_id:this.state.job_id,players:"",data_enc:this.state.ifpassWay,sync_range:this.state.valueBackWay,sync_way:this.state.passWayValue,read_begin:this.state.changevalue5,log_miner_scn:this.state.scn,binlog_postion:this.state.Binlog_Postion,binlog:this.state.Binlog_file,source_type:this.state.source_type,read_frequency:this.state.read_frequency,begin_time:this.state.begin_time,end_time:this.state.end_time,change_tranking:"",source_read_concurrent_num:this.state.source_read_concurrent_num,max_source_read:this.state.ifmax_source_read?this.state.max_source_read+this.state.max_source_read1:"",max_source_read_to:this.state.ifmax_source_read_to?this.state.max_source_read_to+"行/秒":"",dest_write_concurrent_num:this.state.dest_write_concurrent_num,max_dest_write:this.state.ifmax_dest_write?this.state.max_dest_write+this.state.max_dest_write1:"",max_dest_write_to:this.state.ifmax_dest_write_to?this.state.max_dest_write_to+"行/秒":""};L()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobinfo/edit_jobinfo/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1!=e.data.status&&2!=e.data.status||t.sourceSave()}).catch(function(e){})}}},{key:"sourceSave",value:function(){var t=this,a={job_id:this.state.job_id,delete_syncing_source:this.state.changevalue1,delete_sync:this.state.changevalue3,new_sync:this.state.changevalue4,newtable_source:this.state.changevalue2};L()({method:"post",url:e.constants.httpType+e.constants.website+"/data_change_settings/edit_data_change/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1!=e.data.status&&2!=e.data.status||t.errorSave()}).catch(function(e){})}},{key:"errorSave",value:function(){var t=this,a={job_id:this.state.job_id,pause_setup:this.state.pause_setup,pre_steup:this.state.pre_steup,warn_setup:this.state.warn_setup};L()({method:"post",url:e.constants.httpType+e.constants.website+"/error_queue_settings/edit_error_queue/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1!=e.data.status&&2!=e.data.status||t.emailSave()}).catch(function(e){})}},{key:"emailSave",value:function(){var t=this,a={job_id:this.state.job_id,job_error:1==this.state.job_error?1:0,source_change:1==this.state.source_change?1:0,error_queue_pause:1==this.state.error_queue_pause?1:0,error_queue_alert:1==this.state.error_queue_alert?1:0};L()({method:"post",url:e.constants.httpType+e.constants.website+"/mailnotify_settings/edit_mailnotify/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1!=e.data.status&&2!=e.data.status||t.props.nextStep()}).catch(function(e){})}},{key:"render",value:function(){var e=this;return x.a.createElement("div",{className:D.a.connent2},x.a.createElement("h1",{style:{fontWeight:600,fontSize:15}},this.state.job_name),x.a.createElement(_.a,{title:x.a.createElement("span",null,"参与人  ",x.a.createElement(d.a,{placement:"right",content:"参与人拥有该数据任务的浏览权限或编辑权限，并收到该任务的所有通知。",trigger:"hover"},x.a.createElement(B.a,{style:{color:"#BDC0CA",cursor:"pointer"}}))),key:"1"},x.a.createElement("div",{style:{overflow:"hidden",marginTop:8}},x.a.createElement("span",{style:{float:"left"}},this.state.selectedNum.map(function(e){return x.a.createElement("span",{style:{marginRight:20,cursor:"pointer"},key:e.id},x.a.createElement(u.a,{key:e.id,placement:"bottom",title:x.a.createElement("span",null,x.a.createElement("h4",null,"用户：",e.login_name),x.a.createElement("h4",null,"邮箱：",e.email))},x.a.createElement(c.a,{key:e.id,className:"head-example",style:{color:"#fff",backgroundColor:e.color,verticalAlign:"middle",fontSize:18},size:"small"},e.login_name.substr(0,1))))})),x.a.createElement(l.a,{title:"选择参与人",type:"primary",shape:"circle",icon:x.a.createElement(I.a,null),size:"small",onClick:this.showModal,style:{marginLeft:30,marginTop:2,float:"left",cursor:"pointer",display:2==localStorage.getItem("role_id")?"block":"none"}}))),this.state.visible?x.a.createElement(G,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,optionList:this.state.optionList,selectedList:this.state.selectedList,onCreate:function(){return e.handleCreate()}}):null,x.a.createElement("br",null),x.a.createElement(_.a,{title:"数据源设置",key:"2"},x.a.createElement(i.a,{className:D.a.checktag,style:{background:"#fff",borderStyle:"dashed",cursor:"default",margin:"10px 0 16px 0"}},"  ",this.state.source_name,x.a.createElement("span",{className:D.a.detailBtn,style:{color:"#999"}},"数据源  ")),x.a.createElement("div",null,"同步范围：     ",x.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(0,t)},value:this.state.valueBackWay,defaultValue:1},x.a.createElement(o.a,{value:1},"存量"),x.a.createElement(o.a,{value:2},"增量"),x.a.createElement(o.a,{value:3},"存量 + 增量"))),x.a.createElement("br",null),x.a.createElement("div",{className:D.a.tabs,style:{display:1==this.state.valueBackWay?"block":"none"}},"读取方式：     ",x.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(1,t)},value:this.state.passWayValue,defaultValue:0},x.a.createElement(o.a,{value:0},"同步一次"),x.a.createElement(o.a,{value:1},"定时读取"),x.a.createElement(o.a,{value:4},"时间范围读取")),x.a.createElement("br",null),x.a.createElement("div",{className:1==this.state.passWayValue?"show":"hide",style:{marginTop:18}},"读取频率：    ",x.a.createElement(r.a,{className:D.a.borBottpm,onChange:function(t){return e.valueBackWay(8,t)},value:this.state.read_frequency}),"    S")),x.a.createElement("div",{className:D.a.tabs,style:{display:2==this.state.valueBackWay||3==this.state.valueBackWay?"block":"none"}},"读取方式：     ",x.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(1,t)},value:this.state.passWayValue},x.a.createElement(o.a,{value:2,className:2==this.state.source_type?"show":"hide"},"BINLOG"),x.a.createElement(o.a,{value:3,className:1==this.state.source_type?"show":"hide"},"LogMiner")),x.a.createElement("div",{style:{marginTop:18}},"读取频率：    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(8,t)},value:this.state.read_frequency,className:D.a.borBottpm}),"    S"),x.a.createElement("div",{style:{marginTop:18}},"读取起点：     ",x.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(7,t)},value:this.state.changevalue5,defaultValue:0},x.a.createElement(o.a,{value:0},"激活任务为起点"),x.a.createElement(o.a,{value:1,style:{display:2==this.state.valueBackWay?"inline-block":"none"}},"自定义"))),x.a.createElement("span",{style:{display:2==this.state.ifOracle?"block":"none",marginTop:18}},"Binlog Postion：    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(16,t)},value:this.state.Binlog_Postion,className:D.a.borBottpm}),"     Binlog文件名称：    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(17,t)},value:this.state.Binlog_file,className:D.a.borBottpm}),"    "),x.a.createElement("span",{style:{display:1==this.state.ifOracle?"block":"none"}},"LogMiner scn ：    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(18,t)},value:this.state.scn,className:D.a.borBottpm}),"    ")),x.a.createElement("div",{className:D.a.tabs,style:{display:1==this.state.valueBackWay&&4==this.state.passWayValue?"block":"none",marginTop:18}},"开始时间：     ",x.a.createElement(s.a,{showTime:!0,format:F,value:""!=this.state.begin_time?N()(this.state.begin_time,F):"",onChange:this.startChange}),"     结束时间：     ",x.a.createElement(s.a,{showTime:!0,format:F,value:""!=this.state.end_time?N()(this.state.end_time,F):"",onChange:this.endChange})),x.a.createElement("br",null),x.a.createElement("div",null,"数据源：",x.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(2,t)},value:this.state.ifpassWay,defaultValue:0},x.a.createElement(o.a,{value:0},"不加密"),x.a.createElement(o.a,{value:1},"加密"))),x.a.createElement("br",null),x.a.createElement("div",null,"读取并发数量：    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(19,t)},value:this.state.source_read_concurrent_num,className:D.a.borBottpm})),x.a.createElement("br",null),x.a.createElement("div",null,"读取速率限制：",x.a.createElement(n.a,{checked:this.state.ifmax_source_read,onChange:function(t){return e.valueBackWay(27,t)}},"不高于    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(20,t)},value:this.state.max_source_read,className:D.a.borBottpm}),"    ",x.a.createElement(S.a,{style:{width:120},value:this.state.max_source_read1,onChange:function(t){return e.valueBackWay(25,t)}},x.a.createElement(V,{value:"KB/秒"},"KB/秒"),x.a.createElement(V,{value:"MB/秒"},"MB/秒"))),x.a.createElement(n.a,{checked:this.state.ifmax_source_read_to,onChange:function(t){return e.valueBackWay(28,t)}},"不高于    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(21,t)},value:this.state.max_source_read_to,className:D.a.borBottpm}),"    行/秒"))),x.a.createElement("br",null),x.a.createElement(_.a,{title:"数据目的地设置",key:"3"},x.a.createElement(i.a,{className:D.a.checktag,style:{background:"#fff",borderStyle:"dashed",cursor:"default",margin:"10px 0 16px 0"}},"  ",this.state.dest_name,x.a.createElement("span",{className:D.a.detailBtn,style:{color:"#999"}},"目的地  ")),x.a.createElement("br",null),x.a.createElement("div",null,"写入并发数量：    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(22,t)},value:this.state.dest_write_concurrent_num,className:D.a.borBottpm})),x.a.createElement("br",null),x.a.createElement("div",null,"写入速率限制：",x.a.createElement(n.a,{checked:this.state.ifmax_dest_write,onChange:function(t){return e.valueBackWay(29,t)}},"不高于    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(23,t)},value:this.state.max_dest_write,className:D.a.borBottpm}),"    ",x.a.createElement(S.a,{value:this.state.max_dest_write1,onChange:function(t){return e.valueBackWay(26,t)},style:{width:120}},x.a.createElement(V,{value:"KB/秒"},"KB/秒"),x.a.createElement(V,{value:"MB/秒"},"MB/秒"))),x.a.createElement(n.a,{checked:this.state.ifmax_dest_write_to,onChange:function(t){return e.valueBackWay(30,t)}},"不高于    ",x.a.createElement(r.a,{onChange:function(t){return e.valueBackWay(24,t)},value:this.state.max_dest_write_to,className:D.a.borBottpm}),"    行/秒"))),x.a.createElement("br",null),x.a.createElement(_.a,{className:D.a.sourceCard,key:"4"},x.a.createElement(O.a,{defaultActiveKey:"1",style:{marginBottom:10},className:D.a.changeTab},x.a.createElement(U,{tab:"数据源变化设置",key:"1"},x.a.createElement("p",{style:{color:"#408AFF"}},x.a.createElement("img",{className:D.a.messageBox,src:K.a}),"用户可在此处设置在数据任务同步过程中，数据源的表、字段变化的处理方式。"),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement("h4",null,"数据源删除正在同步的表  ",x.a.createElement(d.a,{placement:"right",content:"已存在表被重命名，系统会认为表被删除，重命名的表识别为新表。",trigger:"hover"},x.a.createElement(B.a,{style:{color:"#BDC0CA",cursor:"pointer"}}))),x.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(3,t)},value:this.state.changevalue1},x.a.createElement(o.a,{value:0},"删除目标表"),x.a.createElement(o.a,{value:1},"不删除目标表"),x.a.createElement(o.a,{value:2},"暂停数据任务"))),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement("h4",null,"数据源新增表"),x.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(4,t)},value:this.state.changevalue2},x.a.createElement(o.a,{value:0},"同步新表"),x.a.createElement(o.a,{value:1},"不同步新表 "),x.a.createElement(o.a,{value:2},"暂停数据任务"))),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement("h4",null,"同步的字段被删除"),x.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(5,t)},value:this.state.changevalue3},x.a.createElement(o.a,{value:0},"继续同步，目的地该字段被删除 "),x.a.createElement(o.a,{value:1},"暂停数据任务"))),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement("h4",null,"同步的表发现新的字段"),x.a.createElement(o.a.Group,{onChange:function(t){return e.valueBackWay(6,t)},value:this.state.changevalue4,defaultValue:0},x.a.createElement(o.a,{value:0},"同步新增字段到目的地"),x.a.createElement(o.a,{value:1},"暂停数据任务")))),x.a.createElement(U,{tab:"错误队列设置",key:"2"},x.a.createElement("p",{style:{color:"#408AFF"}},x.a.createElement("img",{className:D.a.messageBox,src:K.a}),"数据任务同步时，错误队列将实时收集如脏数据、配置规则有误等数据相关错误，后置处理数据错误，避免数据无法写入目的地导致任务暂停的问题。"),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement("h4",null,"预处理设置  ",x.a.createElement(d.a,{placement:"right",content:"与处理机制能保证错误率的平均度，同时保证低数据量的任务的正常运行。",trigger:"hover"},x.a.createElement(B.a,{style:{color:"#BDC0CA",cursor:"pointer"}}))),x.a.createElement(o.a.Group,{defaultValue:1},x.a.createElement(o.a,{value:1},"每个表预处理",x.a.createElement(r.a,{className:D.a.errorInput,onChange:function(t){return e.valueBackWay(9,t)},value:this.state.pre_steup})," 行"))),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement("h4",null,"预警设置  ",x.a.createElement(d.a,{placement:"right",content:"当该任务的任意表的错误率达到指定值时，系统将发出预警通知。",trigger:"hover"},x.a.createElement(B.a,{style:{color:"#BDC0CA",cursor:"pointer"}}))),x.a.createElement(o.a.Group,{defaultValue:1},x.a.createElement(o.a,{value:1},"错误率大于",x.a.createElement(r.a,{className:D.a.errorInput,onChange:function(t){return e.valueBackWay(10,t)},value:this.state.warn_setup}),"%，发出预警通知"))),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement("h4",null,"暂停设置  ",x.a.createElement(d.a,{placement:"right",content:"当该任务的任意表的错误率达到指定值时，数据任务会被暂停，并发出通知。",trigger:"hover"},x.a.createElement(B.a,{style:{color:"#BDC0CA",cursor:"pointer"}}))),x.a.createElement(o.a.Group,{defaultValue:1},x.a.createElement(o.a,{value:1},"错误率大于",x.a.createElement(r.a,{className:D.a.errorInput,onChange:function(t){return e.valueBackWay(11,t)},value:this.state.pause_setup}),"%，暂停该数据任务，并通知参与人 ")))),x.a.createElement(U,{tab:"邮件通知设置",key:"3"},x.a.createElement("p",{style:{color:"#408AFF"}},x.a.createElement("img",{className:D.a.messageBox,src:K.a}),"针对数据任务重要信息，系统支持通过邮件方式提醒该数据任务的参与人，用户可根据需求设置是否接受邮件通知"),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement(n.a,{checked:this.state.job_error,onChange:function(t){return e.valueBackWay(12,t)}},"数据任务错误信息"),x.a.createElement("p",{className:D.a.emailP},"指会导致数据任务暂停的错误信息，包含：1.无法连接数据库；2.无法同步数据；3.数据源表，字段的变化；4.系统问题等")),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement(n.a,{checked:this.state.error_queue_alert,onChange:function(t){return e.valueBackWay(13,t)}},"错误队列预警"),x.a.createElement("p",{className:D.a.emailP},"只根据用户设置的错误队列预警机制")),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement(n.a,{checked:this.state.error_queue_pause,onChange:function(t){return e.valueBackWay(14,t)}},"错误队列暂停"),x.a.createElement("p",{className:D.a.emailP},"只根据用户设置的错误队列暂停机制")),x.a.createElement("hr",null),x.a.createElement("div",{className:D.a.tabs},x.a.createElement(n.a,{checked:this.state.source_change,onChange:function(t){return e.valueBackWay(15,t)}},"数据源变化通知"),x.a.createElement("p",{className:D.a.emailP},"根据数据源表，字段发生变化"))))))}}]),a}(T.PureComponent);t.a=z}).call(this,a("yLpj"))},bhxe:function(e,t,a){"use strict";(function(e){a("g9YV");var n=a("wCAj"),s=(a("IzEo"),a("bx4M")),r=(a("jCWc"),a("kPKH")),o=(a("14J3"),a("BMrR")),i=(a("+BJd"),a("mr32")),l=(a("+L6B"),a("2/Rp")),c=(a("miYZ"),a("tsqr")),u=a("2Taf"),d=a.n(u),_=a("vZ4D"),p=a.n(_),m=a("l4Ni"),h=a.n(m),f=a("ujKo"),b=a.n(f),y=a("MhPg"),g=a.n(y),v=(a("2qtc"),a("kLXV")),E=(a("5NDa"),a("5rEg")),k=(a("ozfa"),a("MJZm")),w=(a("sRBo"),a("kaz8")),C=(a("fu2T"),a("gK9i")),S=(a("OaEy"),a("2fM7")),O=a("q1tI"),T=a.n(O),x=a("WsrF"),P=(a("XlDN"),a("QbIw")),B=a.n(P),I=a("3a4m"),j=a.n(I),N=a("BCMQ"),A=a("vDqi"),D=a.n(A),M=a("jHKv"),L=(a("kQFk"),a("G3dp")),R=(S.a.Option,C.a.Panel),W=w.a.Group,K=k.a.TreeNode,U=E.a.Search,V=(v.a.confirm,x.a.Item,x.a.create()(function(t){function a(t){var n;return d()(this,a),(n=h()(this,b()(a).call(this,t))).LoadingDetail=function(){var t={type:n.state.resdata.type,dbname:n.state.resdata.dbname,host:n.state.resdata.host,password:n.state.resdata.password,port:n.state.resdata.port,schema:n.state.resdata.schema,user:n.state.resdata.user,name:n.state.source_name};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/link_data_table?job_id="+n.state.job_id,data:t,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),0!=e.data.status){for(var t=e.data.data,a=[],s=0;s<t.length;s++)a.push(t[s]);2==n.state.source_type&&n.setState({mysqlTables:a,plainOptions:a,checkedList:a,listLength:a.length,tableNameList:a,checkAll:!0}),1==n.state.source_type&&n.setState({oracleTables:a,plainOptions:a,checkedList:a,listLength:a.length,tableNameList:a,checkAll:!0})}else c.a.error(e.data.message)}).catch(function(e){})},n.onOk=function(t){if(0!=n.state.tableNameList.length){var a={job_id:n.state.job_id,source_table:n.state.tableNameList.join(",")};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/edit_tablerule/",data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),0!=e.data.status?1!=e.data.status&&2!=e.data.status||(c.a.success("保存成功"),n.props.onCancel(1),n.props.onCreate()):c.a.error(e.data.message)}).catch(function(e){})}else c.a.error("请选择要保存的源表")},n.search=function(t){var a={jobId:n.state.job_id,tableName:t};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/findByAllTableName/",data:M.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),0!=e.data.status){for(var t=e.data.data,a=[],s=0;s<t.length;s++)a.push(t[s]);2==n.state.source_type&&n.setState({mysqlTables:a,plainOptions:a,checkedList:n.state.tableNameList}),1==n.state.source_type&&n.setState({oracleTables:a,plainOptions:a,checkedList:n.state.tableNameList})}else c.a.error(e.data.message)}).catch(function(e){})},n.onChange=function(e){var t=n.state.tableNameList.concat(e),a=Array.from(new Set(t)),s=n.state.plainOptions.filter(function(t){return!e.includes(t)}),r=a.filter(function(e){return!s.includes(e)});n.setState({checkedList:e,tableNameList:r,listLength:r.length,indeterminate:!!e.length&&e.length<n.state.plainOptions.length,checkAll:e.length===n.state.plainOptions.length})},n.onCheckAllChange=function(e){n.setState({tableNameList:e.target.checked?n.state.plainOptions:[],listLength:e.target.checked?n.state.plainOptions.length:0,checkedList:e.target.checked?n.state.plainOptions:[],indeterminate:!1,checkAll:e.target.checked})},n.onback=function(){n.props.onback()},n.closeTag=function(e){var t=n.state.tableNameList.filter(function(t){return!(e===t)});n.setState({tableNameList:t,checkedList:t,listLength:t.length})},n.state={dbname:"Schema",ifshow:"show",mysqlTables:[],oracleTables:[],source_type:t.source_type,checkedList:[],indeterminate:!1,checkAll:!0,plainOptions:[],tableNameList:[],job_id:t.job_id,source_name:t.source_name,resdata:t.resdata,twoVisible:t.twoVisible},n}return g()(a,t),p()(a,[{key:"componentDidMount",value:function(){this.LoadingDetail()}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel;return T.a.createElement(v.a,{visible:a,title:"选择同步内容",okText:"保存",onCancel:n,onOk:this.onOk,className:B.a.step3Box,closable:!1,maskClosable:!1,footer:T.a.createElement("span",null,T.a.createElement(l.a,{style:{display:1==this.state.twoVisible?"inline-block":"none"},onClick:n},"取消"),T.a.createElement(l.a,{style:{display:1==this.state.twoVisible?"none":"inline-block"},onClick:this.onback},"返回"),T.a.createElement(l.a,{type:"primary",onClick:this.onOk},"保存")),width:530},T.a.createElement(U,{className:B.a.searchSelect,placeholder:"请输入表名关键字",onSearch:this.search}),T.a.createElement(C.a,{style:{borderBottom:"none",overflow:"hidden"},bordered:!1,expandIconPosition:"right",disabled:!0},T.a.createElement(R,{header:T.a.createElement("p",{style:{marginTop:"15px",marginLeft:19,textAlign:"right",color:"#F1B00A",width:"100%"}},"已勾选",this.state.listLength,"项"),key:"1"},T.a.createElement("div",{style:{border:"1px solid #e8e8e8",padding:"10px 10px 0 10px",marginBottom:10,maxHeight:200,overflowY:"auto"}},this.state.tableNameList.map(function(t){return T.a.createElement(i.a,{closable:!0,onClose:function(){return e.closeTag(t)},key:t,style:{marginBottom:10}},t)})))),T.a.createElement(o.a,null,T.a.createElement(C.a,{style:{borderBottom:"none"},bordered:!1,defaultActiveKey:"1",disabled:!0,className:1==this.state.source_type?"hide":"show"},T.a.createElement(R,{className:B.a.listBox,header:T.a.createElement(w.a,{onClick:function(e){e.stopPropagation()},indeterminate:this.state.indeterminate,onChange:this.onCheckAllChange,checked:this.state.checkAll},T.a.createElement("span",{onClick:function(e){e.stopPropagation()}},"Tables")),key:"1"},T.a.createElement(W,{options:this.state.mysqlTables,value:this.state.checkedList,onChange:this.onChange,style:{marginLeft:55,overflowY:"auto",maxHeight:300}}))),T.a.createElement(C.a,{style:{borderBottom:"none"},bordered:!1,defaultActiveKey:["1"],className:2==this.state.source_type?"hide":"show"},T.a.createElement(R,{className:B.a.listBox,header:this.state.resdata.schema,key:"1"},T.a.createElement(C.a,{defaultActiveKey:"1",bordered:!1,expandIconPosition:"right"},T.a.createElement(R,{header:T.a.createElement(w.a,{onClick:function(e){e.stopPropagation()},indeterminate:this.state.indeterminate,onChange:this.onCheckAllChange,checked:this.state.checkAll},T.a.createElement("span",{onClick:function(e){e.stopPropagation()}},"Tables")),key:"1"},T.a.createElement(W,{options:this.state.oracleTables,onChange:this.onChange,value:this.state.checkedList,style:{marginLeft:55}})))))))}}]),a}(T.a.Component))),q=function(t){function a(t){var n;return d()(this,a),(n=h()(this,b()(a).call(this,t))).onRef=function(e){n.editableTable=e},n.Loadingpei=function(t){var a={id:t};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobrela/check_jobinfo/",data:M.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.setState({dest_name:t.dest_name,source_name:t.source_name,source_id:t.source_id,job_name:t.job_name,dest_type:t.dest_type,source_type:t.source_type}),n.LoadingDetail()}).catch(function(e){})},n.LoadingDetail=function(){var t={id:n.state.source_id};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_dbinfo/check_dbinfo/",data:M.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.setState({resdata:t,type:t.type,host:t.host,user:t.user,password:t.password,port:t.port,dbname:t.dbname,schema:t.schema}),n.showModal(0)}).catch(function(e){})},n.handleCreate=function(){var t={job_id:n.state.job_id};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/check_tablerule/",data:M.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),0!=e.data.status){for(var t=e.data.data,a=[],s=0;s<t.length;s++){var r={key:"0-"+s,source_table:t[s]};a.push(r)}n.setState({sourceTables:a,dataSource:[],dataSourceTarget:[],selectedKeys:[a[0].key]}),n.sourceSelect(a[0].key,a[0].source_table,2)}else c.a.error(e.data.message)}).catch(function(e){})},n.readWay=function(e){n.setState({value:e.target.value})},n.showModal=function(e,t){0==e&&n.setState({visible:!0,twoVisible:0}),2==e&&n.setState({visible:!0,twoVisible:1}),1==e&&(n.setState({visibleTuo:!0,selectedRowKeys:[],selectedRows:[],iftuo:!0}),n.loadtuoData()),4==e&&n.setState({visibleTuoSelect:!0,selectedRows:[t],valueCheck:[0]})},n.loadtuoData=function(){var t={type:n.state.type,dbname:n.state.dbname,host:n.state.host,password:n.state.password,port:n.state.port,schema:n.state.schema,user:n.state.user};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/showFieldrule?job_id="+n.state.job_id+"&tablename="+n.state.table_name,data:t,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var t=e.data.data,a=[],s=0;s<t.length;s++)a.push({key:s,source_field:t[s].source_field,dest_field:t[s].dest_field,source_table:t[s].source_table,dest_table:t[s].dest_table,desensitization_way:t[s].desensitization_way,remark:t[s].remark});n.setState({dataTuo:a})}).catch(function(e){})},n.handleCancel=function(){n.setState({visible:!1,visibleTuo:!1,formValuesBusUpdate:{}})},n.handleCancelSelect=function(){n.setState({visibleTuoSelect:!1})},n.onSelect=function(e,t){n.setState({selectedKeys:e}),n.sourceSelect(e,t,1)},n.sourceSelect=function(t,a,s){if(0!=t.length){var r="";r=2==s?a:String(a.selectedNodes[0].title.props.title),n.setState({table_name:r});var o={type:n.state.type,dbname:n.state.dbname,host:n.state.host,password:n.state.password,port:n.state.port,schema:n.state.schema,user:n.state.user};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/link_table_details?job_id="+n.state.job_id+"&tablename="+r,data:o,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var o=e.data.data,i=[],l=0;l<o.length;l++)i.push({key:l,name:o[l].field_name,source_name:o[l].field_name,type:o[l].type,length:o[l].scale,precision:o[l].accuracy,filter:o[l].accuracy,null:o[l].not_null});n.setState({dataSource:i,tabldest_name:r}),n.targetSelect(t,a,s)}).catch(function(e){})}},n.targetSelect=function(t,a,s){if(0!=t.length){var r="";if(r=2==s?a:String(a.selectedNodes[0].title.props.title),0!=t.length){var o={type:n.state.type,dbname:n.state.dbname,host:n.state.host,password:n.state.password,port:n.state.port,schema:n.state.schema,user:n.state.user};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/DestlinkTableDetails?job_id="+n.state.job_id+"&tablename="+r,data:o,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),n.setState({tabldest_name:e.data.destName});for(var t=e.data.data,a=e.data.data2,s=n.state.dataSource,r=[],o=0;o<t.length;o++){if(1==t[o].add_flag){r.push({key:"add_time",dest_field_name:t[o].dest_field_name,source_name:t[o].field_name,type:void 0==t[o].type?"":t[o].type,length:void 0==t[o].scale?"":t[o].scale,precision:void 0==t[o].accuracy?"":t[o].accuracy,filter:void 0==t[o].accuracy?"":t[o].accuracy,null:void 0==t[o].not_null?"":t[o].not_null,name:void 0==t[o].source_name?"":t[o].source_name,var_flag:void 0==t[o].var_flag?"":t[o].var_flag,add_flag:t[o].add_flag});break}r.push({key:o,dest_field_name:t[o].dest_field_name,source_name:t[o].field_name,type:void 0==t[o].type?"":t[o].type,length:void 0==t[o].scale?"":t[o].scale,precision:void 0==t[o].accuracy?"":t[o].accuracy,filter:void 0==t[o].accuracy?"":t[o].accuracy,null:void 0==t[o].not_null?"":t[o].not_null,name:void 0==t[o].source_name?"":t[o].source_name,var_flag:void 0==t[o].var_flag?"":t[o].var_flag,typeSource:void 0==s[o].type?"":s[o].type,lengthSource:void 0==s[o].length?"":s[o].length,precisionSource:void 0==s[o].precision?"":s[o].precision,nullSource:void 0==s[o].null?"":s[o].null,add_flag:0})}for(var i=0;i<a.length;i++)for(var l=0;l<r.length;l++)a[i].dest_field==r[l].dest_field_name&&(r[l].desensitization_way=a[i].desensitization_way,r[l].remark=a[i].remark);n.setState({dataSourceTarget:r}),s.length,t.length,n.editableTable.loadCss()}).catch(function(e){})}}},n.search=function(t){var a={tableName:t,jobId:n.state.job_id};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_tablerule/selByTableName/",data:M.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var t=e.data.data,a=[],s=0;s<t.length;s++){var r={key:"0-"+s,source_table:t[s]};a.push(r)}n.setState({sourceTables:a,dataSource:[],dataSourceTarget:[],selectedKeys:[a[0].key]}),n.sourceSelect(a[0].key,a[0].source_table,2)}).catch(function(e){})},n.savetable=function(t,a,s,r){var o={dest_name:n.state.tabldest_name,source_name:n.state.table_name,jobId:n.state.job_id};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/VerifyDb/",data:M.a.Amap(o),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1==e.data.status?n.savetableLast(t,a,s,r):c.a.error(e.data.message)}).catch(function(e){})},n.savetableLast=function(t,a,s,r){var o=[];if(0==t){for(var i=0;i<a.length;i++)a[i][10]="$";o=a}var l={source_name:n.state.table_name,dest_name:n.state.tabldest_name,list_data:o,job_id:n.state.job_id,addFile:r,primaryKey:s};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/edit_fieldrule/",data:M.a.Amap(l),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),1==e.data.status&&c.a.success("该表字段配置成功")}).catch(function(e){})},n.finish=function(){j.a.push("/busList/watch?n="+n.state.job_id)},n.valueDestName=function(e){n.setState({tabldest_name:e.target.value})},n.handleOk=function(e){n.editableTable.savechange("tuo")},n.handleChange=function(e){n.setState({ifFixvalue:!1,desensitization_way:e}),"2"==e&&n.setState({ifFixvalue:!0})},n.fixValueChange=function(e){n.setState({fixValue:e.target.value})},n.deleteLine=function(t){var a=t.source_name+","+t.dest_field_name+","+t.type+","+t.length+","+t.null+","+t.precision,s={job_id:n.state.job_id,list_data:a,source_name:n.state.table_name,dest_name:n.state.tabldest_name};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/deleteAllFiled/",data:M.a.Amap(s),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),n.sourceSelect(n.state.selectedKeys,n.state.table_name,2)}).catch(function(e){})},n.noDeleteLine=function(t){var a={job_id:n.state.job_id,sourceField:t.source_name,destField:t.dest_field_name,source_name:n.state.table_name,dest_name:n.state.tabldest_name};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/recover/",data:M.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),n.sourceSelect(n.state.selectedKeys,n.state.table_name,2)}).catch(function(e){})},n.toback=function(){n.props.tt()},n.tuoChange=function(e,t){e.length>0?n.setState({iftuo:!1,selectedRowKeys:e,selectedRows:t}):n.setState({iftuo:!0,selectedRowKeys:e,selectedRows:t})},n.onchangeCheckbox=function(e){n.setState({valueCheck:[e[e.length-1]]}),2!=e&&n.setState({fixValue:""})},n.onTuo=function(){n.setState({visibleTuoSelect:!0,valueCheck:[0],fixValue:""})},n.handleOkSelect=function(){n.desensitization()},n.desensitization=function(){for(var t=[],a=[],s=n.state.selectedRows,r=0;r<s.length;r++)t.push(s[r].dest_field),a.push(s[r].source_field);var o={source_field:a.join(","),desensitization_way:n.state.valueCheck[0],dest_field:t.join(","),dest_table:n.state.tabldest_name,job_id:n.state.job_id,source_table:n.state.table_name,remark:n.state.fixValue},i=e.constants.httpType+e.constants.website+"/sys_Desensitization/addDesensitization/";0==n.state.valueCheck[0]&&(i=e.constants.httpType+e.constants.website+"/sys_Desensitization/delDesensitization/"),D()({method:"post",url:i,data:o,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),"1"==e.data.status&&(n.setState({visibleTuoSelect:!1,selectedRowKeys:[],selectedRows:[],iftuo:!0}),n.loadtuoData(),n.sourceSelect(n.state.selectedKeys,n.state.table_name,2))}).catch(function(e){})},n.addFiled=function(){var t={job_id:n.state.job_id,source_name:n.state.table_name,dest_name:n.state.tabldest_name};D()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_fieldrule/addField/",data:M.a.Amap(t),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user"),n.editableTable.handleAdd1(e.data.data)}).catch(function(e){})},n.onchangeSelect=function(e,t){},n.state={value:1,job_id:t.id,sourceTables:[],type:0,host:"",user:"",password:"",port:"",dbname:"",schema:"",table_name:"",visibleTuo:!1,desensitization_way:"0",twoVisible:0,fixValue:"",iftuo:!0,valueCheck:["0"],selectedRowKeys:[]},n}return g()(a,t),p()(a,[{key:"componentDidMount",value:function(){void 0!=this.state.job_id&&this.Loadingpei(this.state.job_id)}},{key:"render",value:function(){var e=this,t=[{title:"字段名称",dataIndex:"dest_field",key:"dest_field"},{title:"脱敏状态",dataIndex:"desensitization_way",key:"desensitization_way",render:function(e,t){return T.a.createElement("span",null,"1"==e?"*隐藏":"2"==e?"固定值： "+t.remark:"3"==e?"随机值":"不脱敏")}}],a={selectedRowKeys:this.state.selectedRowKeys,onChange:this.tuoChange,getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}},c=T.a.createElement("span",{style:{marginLeft:4}},"数据源表名称：",this.state.table_name),u=T.a.createElement("span",null,"目的地表名称：",T.a.createElement(E.a,{addonAfter:T.a.createElement(L.a,null),onChange:function(t){return e.valueDestName(t)},value:this.state.tabldest_name,style:{width:200,marginTop:"-3px",fontSize:14,fontWeight:570}}),T.a.createElement(l.a,{type:"primary",className:B.a.btnSubmite,style:{float:"right",height:"21px"},size:"small",onClick:function(){return e.showModal(1)}},"批量脱敏"));return T.a.createElement("div",{className:B.a.connent2},T.a.createElement("h1",null,this.state.job_name),T.a.createElement("div",{style:{padding:"20px 16px",background:"#fff",marginBottom:20}},T.a.createElement(i.a,{className:B.a.checktag,style:{background:"#fff",borderStyle:"dashed",cursor:"default"}},"  ",this.state.source_name,T.a.createElement("span",{className:B.a.detailBtn,style:{color:"#999"}},"数据源  ")),T.a.createElement(i.a,{className:B.a.checktag,style:{background:"#fff",borderStyle:"dashed",cursor:"default"}},"  ",this.state.dest_name,T.a.createElement("span",{className:B.a.detailBtn,style:{color:"#999"}},"目的地  "))),T.a.createElement("h1",null,"任务配置"),this.state.visible?T.a.createElement(V,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,source_type:this.state.source_type,onCancel:this.handleCancel,resdata:this.state.resdata,onCreate:function(){return e.handleCreate()},onback:this.toback,job_id:this.state.job_id,source_name:this.state.source_name,twoVisible:this.state.twoVisible}):null,T.a.createElement(o.a,{gutter:24,style:{background:"#fff",margin:0}},T.a.createElement(r.a,{span:4},T.a.createElement(s.a,{title:"同步列表",className:B.a.treeBox,bordered:!1,extra:T.a.createElement("a",{onClick:function(){return e.showModal(2)}},T.a.createElement(L.a,null))},T.a.createElement(U,{className:B.a.searchSelect,placeholder:"请输入表名关键字",onSearch:this.search}),T.a.createElement(k.a,{showLine:!0,defaultExpandedKeys:["0"],onSelect:this.onSelect,selectedKeys:this.state.selectedKeys,style:{height:"460px",overflow:"auto",marginTop:20}},T.a.createElement(K,{title:"Tables",key:"0",selectable:!1},this.state.sourceTables.map(function(e){return T.a.createElement(K,{title:T.a.createElement("span",{title:e.source_table},e.source_table.length>10?e.source_table.substring(0,10)+"...":e.source_table),key:e.key})}))))),T.a.createElement(r.a,{span:8,className:B.a.sourceTable,style:{borderRight:"1px solid #e0c8c824"}},T.a.createElement(s.a,{title:c,bordered:!1,className:B.a.sourceTableBox},this.state.dataSource&&Object.keys(this.state.dataSource).length?T.a.createElement(n.a,{bordered:!1,size:"small",dataSource:this.state.dataSource,columns:[{title:"字段名称",dataIndex:"name",key:"name"},{title:"类型",dataIndex:"type",key:"type"},{title:"长度",dataIndex:"length",key:"length"},{title:"not null",dataIndex:"null",key:"null"},{title:"精度",dataIndex:"precision",key:"precision"}],pagination:!1}):null)),T.a.createElement(r.a,{span:12,className:B.a.sourceTable},T.a.createElement(s.a,{title:u,bordered:!1,className:B.a.destTable},this.state.dataSourceTarget&&Object.keys(this.state.dataSourceTarget).length?T.a.createElement(N.a,{onchangeSelect:this.onchangeSelect,addFiled:this.addFiled,noDeleteLine:this.noDeleteLine,deleteLine:this.deleteLine,onRef:this.onRef.bind(this),dest_type:this.state.dest_type,job_id:this.state.job_id,save:this.savetable,showModal:this.showModal,dataSource:this.state.dataSourceTarget}):null))),T.a.createElement(l.a,{type:"primary",style:{marginTop:20,float:"right"},onClick:this.finish,className:B.a.btnSubmite},"完成"),T.a.createElement(v.a,{title:T.a.createElement("span",null,"批量脱敏",T.a.createElement(l.a,{onClick:this.onTuo,style:{marginLeft:60},disabled:this.state.iftuo},"脱敏方式")),visible:this.state.visibleTuo,onCancel:this.handleCancel,style:{height:200},footer:T.a.createElement(l.a,{type:"primary",onClick:this.handleCancel},"完成"),zIndex:1},T.a.createElement(n.a,{rowSelection:a,bordered:!1,size:"small",dataSource:this.state.dataTuo,columns:t,pagination:!1})),T.a.createElement(v.a,{closable:!1,visible:this.state.visibleTuoSelect,onOk:this.handleOkSelect,onCancel:this.handleCancelSelect,style:{height:160},width:"320px",cancelText:"取消",okText:"确认",zIndex:11},T.a.createElement(w.a.Group,{onChange:this.onchangeCheckbox,value:this.state.valueCheck},T.a.createElement("p",null,T.a.createElement(w.a,{value:0},"不脱敏")),T.a.createElement("p",null,T.a.createElement(w.a,{value:1},"***隐藏")),T.a.createElement("p",null,T.a.createElement(w.a,{value:3},"随机值")),T.a.createElement("p",null,T.a.createElement(w.a,{value:2},"固定值"),T.a.createElement(E.a,{value:this.state.fixValue,onChange:this.fixValueChange,style:{width:178,height:24,display:"inline-block"}})))))}}]),a}(O.PureComponent);t.a=q}).call(this,a("yLpj"))},fu2T:function(e,t,a){"use strict";a("cIOH"),a("3dVZ")},gK9i:function(e,t,a){"use strict";var n=a("q1tI"),s=a.n(n),r=a("17x9"),o=a.n(r),i=a("TSYQ"),l=a.n(i),c=a("Gytx"),u=a.n(c),d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),d(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.forceRender||!u()(this.props,e)}},{key:"render",value:function(){var e;if(this._isActived=this.props.forceRender||this._isActived||this.props.isActive,!this._isActived)return null;var t=this.props,a=t.prefixCls,n=t.isActive,r=t.children,o=t.destroyInactivePanel,i=t.forceRender,c=t.role,u=l()((_(e={},a+"-content",!0),_(e,a+"-content-active",n),_(e,a+"-content-inactive",!n),e)),d=i||n||!o?s.a.createElement("div",{className:a+"-content-box"},r):null;return s.a.createElement("div",{className:u,role:c},d)}}]),t}();p.propTypes={prefixCls:o.a.string,isActive:o.a.bool,children:o.a.any,destroyInactivePanel:o.a.bool,forceRender:o.a.bool,role:o.a.string};var m=p,h=a("MFj2"),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),n.handleItemClick=function(){var e=n.props,t=e.onItemClick,a=e.panelKey;"function"==typeof t&&t(a)},n.handleKeyPress=function(e){"Enter"!==e.key&&13!==e.keyCode&&13!==e.which||n.handleItemClick()},y(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),f(t,[{key:"shouldComponentUpdate",value:function(e){return!u()(this.props,e)}},{key:"render",value:function(){var e,t=this.props,a=t.className,n=t.id,r=t.style,o=t.prefixCls,i=t.header,c=t.headerClass,u=t.children,d=t.isActive,_=t.showArrow,p=t.destroyInactivePanel,f=t.disabled,y=t.accordion,g=t.forceRender,v=t.expandIcon,E=t.extra,k=l()(o+"-header",b({},c,c)),w=l()((b(e={},o+"-item",!0),b(e,o+"-item-active",d),b(e,o+"-item-disabled",f),e),a),C=s.a.createElement("i",{className:"arrow"});return _&&"function"==typeof v&&(C=v(this.props)),s.a.createElement("div",{className:w,style:r,id:n},s.a.createElement("div",{className:k,onClick:this.handleItemClick,role:y?"tab":"button",tabIndex:f?-1:0,"aria-expanded":""+d,onKeyPress:this.handleKeyPress},_&&C,i,E&&s.a.createElement("div",{className:o+"-extra"},E)),s.a.createElement(h.a,{showProp:"isActive",exclusive:!0,component:"",animation:this.props.openAnimation},s.a.createElement(m,{prefixCls:o,isActive:d,destroyInactivePanel:p,forceRender:g,role:y?"tabpanel":null},u)))}}]),t}();g.propTypes={className:o.a.oneOfType([o.a.string,o.a.object]),id:o.a.string,children:o.a.any,openAnimation:o.a.object,prefixCls:o.a.string,header:o.a.oneOfType([o.a.string,o.a.number,o.a.node]),headerClass:o.a.string,showArrow:o.a.bool,isActive:o.a.bool,onItemClick:o.a.func,style:o.a.object,destroyInactivePanel:o.a.bool,disabled:o.a.bool,accordion:o.a.bool,forceRender:o.a.bool,expandIcon:o.a.func,extra:o.a.node,panelKey:o.a.any},g.defaultProps={showArrow:!0,isActive:!1,destroyInactivePanel:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var v=g,E=a("J9Du");function k(e,t,a,n){var s=void 0;return Object(E.a)(e,a,{start:function(){t?(s=e.offsetHeight,e.style.height=0):e.style.height=e.offsetHeight+"px"},active:function(){e.style.height=(t?s:0)+"px"},end:function(){e.style.height="",n()}})}var w=function(e){return{enter:function(t,a){return k(t,!0,e+"-anim",a)},leave:function(t,a){return k(t,!1,e+"-anim",a)}}},C=a("TOwV"),S=a("VCL8"),O=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function x(e){var t=e;return Array.isArray(t)||(t=t?[t]:[]),t.map(function(e){return String(e)})}var P=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));B.call(a);var n=e.activeKey,s=e.defaultActiveKey;return"activeKey"in e&&(s=n),a.state={openAnimation:e.openAnimation||w(e.prefixCls),activeKey:x(s)},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),O(t,[{key:"shouldComponentUpdate",value:function(e,t){return!u()(this.props,e)||!u()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,n=t.className,r=t.style,o=t.accordion,i=l()((T(e={},a,!0),T(e,n,!!n),e));return s.a.createElement("div",{className:i,style:r,role:o?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=x(e.activeKey)),"openAnimation"in e&&(t.openAnimation=e.openAnimation),t.activeKey||t.openAnimation?t:null}}]),t}(),B=function(){var e=this;this.onClickItem=function(t){var a=e.state.activeKey;if(e.props.accordion)a=a[0]===t?[]:[t];else{var n=(a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(a))).indexOf(t);n>-1?a.splice(n,1):a.push(t)}e.setActiveKey(a)},this.getNewChild=function(t,a){if(!t)return null;var n=e.state.activeKey,r=e.props,o=r.prefixCls,i=r.accordion,l=r.destroyInactivePanel,c=r.expandIcon,u=t.key||String(a),d=t.props,_=d.header,p=d.headerClass,m=d.disabled,h={key:u,panelKey:u,header:_,headerClass:p,isActive:i?n[0]===u:n.indexOf(u)>-1,prefixCls:o,destroyInactivePanel:l,openAnimation:e.state.openAnimation,accordion:i,children:t.props.children,onItemClick:m?null:e.onClickItem,expandIcon:c};return"string"==typeof t.type?t:s.a.cloneElement(t,h)},this.getItems=function(){var t=e.props.children,a=Object(C.isFragment)(t)?t.props.children:t,r=n.Children.map(a,e.getNewChild);return Object(C.isFragment)(t)?s.a.createElement(s.a.Fragment,null,r):r},this.setActiveKey=function(t){"activeKey"in e.props||e.setState({activeKey:t}),e.props.onChange(e.props.accordion?t[0]:t)}};P.propTypes={children:o.a.any,prefixCls:o.a.string,activeKey:o.a.oneOfType([o.a.string,o.a.number,o.a.arrayOf(o.a.oneOfType([o.a.string,o.a.number]))]),defaultActiveKey:o.a.oneOfType([o.a.string,o.a.number,o.a.arrayOf(o.a.oneOfType([o.a.string,o.a.number]))]),openAnimation:o.a.object,onChange:o.a.func,accordion:o.a.bool,className:o.a.string,style:o.a.object,destroyInactivePanel:o.a.bool,expandIcon:o.a.func},P.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},P.Panel=v,Object(S.polyfill)(P);var I=P,j=(P.Panel,a("fEPi")),N=a.n(j),A=a("H84U");function D(e){"@babel/helpers - typeof";return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function L(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=R(this,W(t).apply(this,arguments))).renderCollapsePanel=function(t){var a,s,r,o=t.getPrefixCls,i=e.props,c=i.prefixCls,u=i.className,d=void 0===u?"":u,_=i.showArrow,p=void 0===_||_,m=o("collapse",c),h=l()((a={},s="".concat(m,"-no-arrow"),r=!p,s in a?Object.defineProperty(a,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[s]=r,a),d);return n.createElement(I.Panel,M({},e.props,{prefixCls:m,className:h}))},e}var a,s,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,n["Component"]),a=t,(s=[{key:"render",value:function(){return n.createElement(A.a,null,this.renderCollapsePanel)}}])&&L(a.prototype,s),r&&L(a,r),t}(),V=a("xEkU"),q=a.n(V);function F(e,t,a){var n,s;return Object(E.a)(e,"ant-motion-collapse-legacy",{start:function(){t?(n=e.offsetHeight,e.style.height="0px",e.style.opacity="0"):(e.style.height="".concat(e.offsetHeight,"px"),e.style.opacity="1")},active:function(){s&&q.a.cancel(s),s=q()(function(){e.style.height="".concat(t?n:0,"px"),e.style.opacity=t?"1":"0"})},end:function(){s&&q.a.cancel(s),e.style.height="",e.style.opacity="",a()}})}var G={enter:function(e,t){return F(e,!0,t)},leave:function(e,t){return F(e,!1,t)},appear:function(e,t){return F(e,!0,t)}};function z(e){"@babel/helpers - typeof";return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Q(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=H(this,J(t).apply(this,arguments))).renderExpandIcon=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s=e.props.expandIcon,r=s?s(t):n.createElement(N.a,{rotate:t.isActive?90:void 0});return n.isValidElement(r)?n.cloneElement(r,{className:l()(r.props.className,"".concat(a,"-arrow"))}):r},e.renderCollapse=function(t){var a,s=t.getPrefixCls,r=t.direction,o=e.props,i=o.prefixCls,c=o.className,u=void 0===c?"":c,d=o.bordered,_=o.expandIconPosition,p=s("collapse",i),m=l()((Z(a={},"".concat(p,"-borderless"),!d),Z(a,"".concat(p,"-icon-position-").concat(_),!0),Z(a,"".concat(p,"-rtl"),"rtl"===r),a),u);return n.createElement(I,Y({},e.props,{expandIcon:function(t){return e.renderExpandIcon(t,p)},prefixCls:p,className:m}))},e}var a,s,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,n["Component"]),a=t,(s=[{key:"render",value:function(){return n.createElement(A.a,null,this.renderCollapse)}}])&&Q(a.prototype,s),r&&Q(a,r),t}();$.Panel=U,$.defaultProps={bordered:!0,openAnimation:Y(Y({},G),{appear:function(){}}),expandIconPosition:"left"};t.a=$},gxWv:function(e,t,a){"use strict";(function(e){a("Telt");var n=a("Tckk"),s=(a("IzEo"),a("bx4M")),r=a("gWZ8"),o=a.n(r),i=(a("miYZ"),a("tsqr")),l=(a("5NDa"),a("5rEg")),c=(a("7Kak"),a("9yH6")),u=a("2Taf"),d=a.n(u),_=a("vZ4D"),p=a.n(_),m=a("l4Ni"),h=a.n(m),f=a("ujKo"),b=a.n(f),y=a("MhPg"),g=a.n(y),v=(a("+BJd"),a("mr32")),E=(a("2qtc"),a("kLXV")),k=a("q1tI"),w=a.n(k),C=a("WsrF"),S=(a("XlDN"),a("G3dp")),O=a("4i/N"),T=a("xvlK"),x=a("5ZHM"),P=a.n(x),B=a("vDqi"),I=a.n(B),j=a("jHKv"),N=(a("kQFk"),a("yXo+")),A=a.n(N),D=a("/GGx"),M=a.n(D),L=a("gI1x"),R=a.n(L),W=a("A0we"),K=a.n(W),U=E.a.confirm,V=C.a.Item,q=v.a.CheckableTag,F=C.a.create()(function(e){function t(e){var a;return d()(this,t),(a=h()(this,b()(t).call(this,e))).changedbType=function(e){2==e.target.value?a.setState({dbname:"数据库名称",ifshow:"hide",dbnamehide:"",port:3306}):1==e.target.value?a.setState({dbname:"数据库实例名",ifshow:"show",port:1521}):4==e.target.value?a.setState({dbname:"数据库实例名",ifshow:"show",port:5236}):3==e.target.value&&a.setState({dbname:"数据库名称",ifshow:"show",port:""})},a.state={dbname:"数据库实例名",ifshow:"show",ifSourcetype:e.ifSourcetype,ifSourcename:0==e.ifSourcetype?"创建数据源":"创建目的地",ifSourcename1:0==e.ifSourcetype?"数据源类型":"数据目的地类型",ifSourcename2:0==e.ifSourcetype?"数据源名称":"数据目的地名称"},a}return g()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,s=e.form.getFieldDecorator;return w.a.createElement(E.a,{visible:t,title:this.state.ifSourcename,okText:"连接",onCancel:a,onOk:n},w.a.createElement(C.a,null,w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.ifSourcename1},s("type",{rules:[{required:!0,message:"请选择类型！"}],initialValue:"1"})(w.a.createElement(c.a.Group,{size:"small",onChange:this.changedbType},w.a.createElement(c.a.Button,{value:1},"Oracle"),"   ",w.a.createElement(c.a.Button,{value:2},"MySQL"),"   ",w.a.createElement(c.a.Button,{className:0==this.state.ifSourcetype?"hide":"showtarget",value:3},"SQL Server"),"   ",w.a.createElement(c.a.Button,{className:0==this.state.ifSourcetype?"hide":"showtarget",value:4},"达梦"),"   "))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.ifSourcename2},s("name",{rules:[{required:!0,message:"请输入"+this.state.ifSourcename2+"！"}],initialValue:""})(w.a.createElement(l.a,{placeholder:"请输入"+this.state.ifSourcename2}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:"服务器地址"},s("host",{rules:[{required:!0,message:"请输入服务器地址！"}],initialValue:""})(w.a.createElement(l.a,{placeholder:"请输入服务器地址"}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:"端口"},s("port",{rules:[{required:!0,message:"请输入端口！"}],initialValue:this.state.port})(w.a.createElement(l.a,{placeholder:"请输入端口"}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.dbname},s("dbname",{rules:[{required:!0,message:"请输入"+this.state.dbname}],initialValue:this.state.dbnamehide})(w.a.createElement(l.a,{placeholder:this.state.dbname}))),w.a.createElement(V,{className:this.state.ifshow,labelCol:{span:7},wrapperCol:{span:15},label:"schema"},s("schema",{rules:[{required:"show"==this.state.ifshow,message:"请输入schema"}],initialValue:""})(w.a.createElement(l.a,{placeholder:"请输入schema"}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:"用户名"},s("user",{rules:[{required:!0,message:"请输入用户名！"}],initialValue:""})(w.a.createElement(l.a,{placeholder:"请输入用户名"}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:"密码"},s("password",{rules:[{required:!0,message:"请输入密码！"}],initialValue:""})(w.a.createElement(l.a,{placeholder:"请输入密码",type:"password"}))),w.a.createElement(V,{className:"hide",labelCol:{span:7},wrapperCol:{span:15},label:""},s("sour_or_dest",{initialValue:this.state.ifSourcetype})(w.a.createElement(l.a,{placeholder:"请输入密码"})))))}}]),t}(w.a.Component)),G=C.a.create()(function(e){function t(e){var a;return d()(this,t),(a=h()(this,b()(t).call(this,e))).changedbType=function(e){2==e.target.value?a.setState({dbname:"数据库名称",ifshow:"hide",dbnamehide:"",port:3306}):1==e.target.value?a.setState({dbname:"数据库实例名",ifshow:"show",port:1521}):4==e.target.value?a.setState({dbname:"数据库实例名",ifshow:"show",port:5236}):3==e.target.value&&a.setState({dbname:"数据库名称",ifshow:"show"})},a.changedisabled=function(e){a.setState({ifdisabled:!1})},a.closeConfirm=function(e,t){U({content:"确定要删除吗？",okText:"确认",cancelText:"取消",onOk:function(){return a.props.handleClose(e,t)},onCancel:function(){}})},a.state={ifdisabled:!0,ifSourcetype:e.values.sour_or_dest,title:0==e.values.sour_or_dest?"数据源详情":"目的地详情",ifSourcename1:0==e.values.sour_or_dest?"数据源类型":"数据目的地类型",ifSourcename2:0==e.values.sour_or_dest?"数据源名称":"数据目的地名称",host:e.values.host,id:e.values.id,port:e.values.port,name:e.values.name,user:e.values.user,pwd:e.values.password,schema:e.values.schema,dbnamehide:e.values.dbname,datatype:e.values.type,ifshow:2==e.values.type?"hide":"show",dbname:4==e.values.type||1==e.values.type?"数据库实例名":"数据库名称"},a}return g()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.onCancel,s=t.onCreate,r=t.form.getFieldDecorator;return w.a.createElement(E.a,{visible:a,title:[this.state.title,w.a.createElement(S.a,{onClick:this.changedisabled,style:{marginLeft:20,cursor:"pointer"}}),w.a.createElement(O.a,{onClick:function(){return e.closeConfirm(e.state.id,e.state.ifSourcetype)},style:{marginLeft:20,cursor:"pointer"}})],onCancel:n,okButtonProps:{disabled:this.state.ifdisabled},okText:"连接",onOk:s},w.a.createElement(C.a,{className:P.a.detailForm},w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.ifSourcename1},r("type",{rules:[{required:!0,message:"请选择数据类型！"}],initialValue:this.state.datatype})(w.a.createElement(c.a.Group,{size:"small",onChange:this.changedbType,disabled:this.state.ifdisabled},w.a.createElement(c.a.Button,{value:1},"Oracle"),"   ",w.a.createElement(c.a.Button,{value:2},"MySQL"),"   ",w.a.createElement(c.a.Button,{className:0==this.state.ifSourcetype?"hide":"showtarget",value:3},"SQL Server"),"   ",w.a.createElement(c.a.Button,{className:0==this.state.ifSourcetype?"hide":"showtarget",value:4},"达梦"),"   "))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.ifSourcename2},r("name",{rules:[{required:!0,message:"请输入"+this.state.ifSourcename2}],initialValue:this.state.name})(w.a.createElement(l.a,{placeholder:"请输入"+this.state.ifSourcename2,disabled:!0}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:"服务器地址"},r("host",{rules:[{required:!0,message:"请输入服务器地址！",validator:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/}],initialValue:this.state.host})(w.a.createElement(l.a,{placeholder:"请输入服务器地址",disabled:this.state.ifdisabled}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:"端口"},r("port",{rules:[{required:!0,message:"请输入端口！"}],initialValue:this.state.port})(w.a.createElement(l.a,{placeholder:"请输入端口",disabled:this.state.ifdisabled}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:this.state.dbname},r("dbname",{rules:[{required:!0,message:"请输入"+this.state.dbname}],initialValue:this.state.dbnamehide})(w.a.createElement(l.a,{placeholder:this.state.dbname,disabled:this.state.ifdisabled}))),w.a.createElement(V,{className:this.state.ifshow,labelCol:{span:7},wrapperCol:{span:15},label:"schema"},r("schema",{rules:[{required:"show"==this.state.ifshow,message:"请输入schema"}],initialValue:this.state.schema})(w.a.createElement(l.a,{placeholder:"请输入schema",disabled:this.state.ifdisabled}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:"用户名"},r("user",{rules:[{required:!0,message:"请输入用户名！"}],initialValue:this.state.user})(w.a.createElement(l.a,{placeholder:"请输入用户名",disabled:this.state.ifdisabled}))),w.a.createElement(V,{labelCol:{span:7},wrapperCol:{span:15},label:"密码"},r("password",{rules:[{required:!0,message:"请输入密码！"}],initialValue:this.state.pwd})(w.a.createElement(l.a,{placeholder:"请输入密码",type:"password",disabled:this.state.ifdisabled}))),w.a.createElement(V,{className:"hide"},r("id",{initialValue:this.state.id})(w.a.createElement(l.a,{placeholder:""}))),w.a.createElement(V,{className:"hide"},r("sour_or_dest",{initialValue:this.state.ifSourcetype})(w.a.createElement(l.a,{placeholder:""}))),w.a.createElement(V,{className:"hide"},r("ifexit",{initialValue:1})(w.a.createElement(l.a,{disabled:!0})))))}}]),t}(w.a.Component)),z=function(t){function a(t){var n;return d()(this,a),(n=h()(this,b()(a).call(this,t))).LoadingDetail=function(t){var a={id:t};I()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_jobrela/check_jobinfo/",data:j.a.Amap(a),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");var t=e.data.data;n.handleChangeSource(t.source_name,!0),n.handleChangeTarget(t.dest_name,!0,2),n.props.tt(3,t.job_name)}).catch(function(e){})},n.loadList=function(t){var a=e.constants.httpType+e.constants.website+"/sys_dbinfo/source_all/";1==t&&(a=e.constants.httpType+e.constants.website+"/sys_dbinfo/dest_all/"),I()({method:"post",url:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){"401"==e.data.status&&(window.location.href="/user");for(var a=e.data.data,s=0;s<a.length;s++)a[s].key=s+1;0!=t?n.setState({tagsFromServer:a}):n.setState({tagsFromServer1:a})}).catch(function(e){})},n.handleCreate=function(){n.formRef.props.form.validateFields(function(e,t){if(!e){null!=t.host.match(/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/)?(2==t.type&&(t.schema=""),n.handleAdd(t)):i.a.error("IP地址不合法！")}})},n.handleAdd=function(t){var a=e.constants.httpType+e.constants.website+"/sys_dbinfo/add_dbinfo/";t.ifexit&&1==t.ifexit&&(a=e.constants.httpType+e.constants.website+"/sys_dbinfo/edit_dbinfo/",delete t.ifexit),I()({method:"post",url:a,data:t,headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),1==e.data.status)i.a.success("操作成功"),n.loadList(t.sour_or_dest);else{if(0==e.data.status)return void i.a.error("失败！数据源重名!");if(2==e.data.status)return void i.a.error("已配置任务，不能修改删除！");if(3==e.data.status)return void i.a.error("数据库连接失败，请检查数据库信息！")}n.setState({visible:!1,visibleTarget:!1,visibleDetail:!1})}).catch(function(e){})},n.handleCancel=function(){n.setState({visible:!1,visibleTarget:!1,visibleDetail:!1,formValuesBusUpdate:{}})},n.showModal=function(e){0==e?n.setState({visible:!0,formValues:{},ifSourcetype:e}):1==e&&n.setState({visibleTarget:!0,formValues:{},ifSourcetype:e})},n.detailvisible=function(e,t){t.stopPropagation(),n.setState({visibleDetail:!0,formValuesBusUpdate:e})},n.saveFormRef=function(e){n.formRef=e},n.handleClose=function(t,a){var s={id:t};I()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_dbinfo/delete_dbinfo/",data:j.a.Amap(s),headers:{authToken:localStorage.getItem("authToken")}}).then(function(e){if("401"==e.data.status&&(window.location.href="/user"),1==e.data.status)n.setState({visibleDetail:!1,formValuesBusUpdate:{}}),n.loadList(a),i.a.success("删除成功"),n.setState({visibleDetail:!1});else{if(0==e.data.status)return void i.a.error("失败!");if(2==e.data.status)return void i.a.error("已配置任务，不能修改删除！")}}).catch(function(e){})},n.state={selectedTagsSource:[],selectedTagsTarget:[],selectedTags:[],visible:!1,visibleTarget:!1,tagsFromServer1:[],tagsFromServer:[],job_id:t.id,disabledName:!1},n}return g()(a,t),p()(a,[{key:"componentDidMount",value:function(){this.loadList(0),this.loadList(1),void 0!=this.state.job_id&&(this.LoadingDetail(this.state.job_id),this.setState({disabledName:!0}))}},{key:"handleChange",value:function(e,t){if(0!=t){var a=this.state.selectedTags,n=t?[].concat(o()(a),[e]):a.filter(function(t){return t!==e});this.setState({selectedTags:n[n.length-1],color:"#fff"})}}},{key:"handleChangeSource",value:function(e,t){if(0!=t){var a=this.state.selectedTags,n=t?[].concat(o()(a),[e]):a.filter(function(t){return t!==e});this.setState({selectedTagsSource:n[n.length-1],color:"#fff"}),this.props.tt(1,e)}}},{key:"handleChangeTarget",value:function(e,t,a){var n=this.state.selectedTagsTarget,s=t?[].concat(o()(n),[e]):n.filter(function(t){return t!==e});if(String(s[0]).indexOf(",")>-1){var r=s[0].split(","),i=s.concat(r).slice(1);return this.setState({selectedTagsTarget:i,color:"#fff"}),void this.props.tt(2,i.join(","))}this.setState({selectedTagsTarget:s,color:"#fff"}),this.props.tt(2,s.join(","))}},{key:"render",value:function(){var e=this,t=this.state,a=(t.selectedTags,t.selectedTagsSource),r=t.selectedTagsTarget;return w.a.createElement("div",{className:P.a.connent1},w.a.createElement(s.a,{title:"任务名称"},w.a.createElement(l.a,{placeholder:"请输入任务名",value:this.props.input.job_name,className:P.a.nameInput,ref:"inputname",disabled:this.state.disabledName,onChange:function(t){e.props.tt(0,t)}})),w.a.createElement(s.a,{title:"选择数据源"},w.a.createElement("div",{className:P.a.sourcelist},w.a.createElement(v.a,{className:P.a.checktag,style:{background:"#fff",borderStyle:"dashed"},onClick:function(){return e.showModal(0)}},w.a.createElement(T.a,null)," 新建数据源"),this.state.tagsFromServer1.map(function(t){return w.a.createElement(q,{className:P.a.checktag,key:t.key,checked:a==t.name,onChange:function(a){return e.handleChangeSource(t.name,a)}},w.a.createElement(n.a,{src:1==t.type?A.a:R.a,style:{width:39,height:39,float:"left",marginTop:10}}),"  ",w.a.createElement("span",{title:t.name},t.name.length>8?t.name.substring(0,8)+"...":t.name),w.a.createElement("a",{className:P.a.detailBtn,onClick:function(a){return e.detailvisible(t,a)}},"详情  "))}),this.state.formValuesBusUpdate&&Object.keys(this.state.formValuesBusUpdate).length?w.a.createElement(G,{wrappedComponentRef:this.saveFormRef,visible:this.state.visibleDetail,values:this.state.formValuesBusUpdate,onCancel:this.handleCancel,handleClose:this.handleClose,onCreate:function(){return e.handleCreate()}}):null),this.state.visible?w.a.createElement(F,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,ifSourcetype:this.state.ifSourcetype,onCancel:this.handleCancel,onCreate:function(){return e.handleCreate()}}):null),w.a.createElement(s.a,{title:"选择目的地"},w.a.createElement("div",{className:P.a.targetBox},w.a.createElement("div",{className:P.a.sourcelist},w.a.createElement(v.a,{className:P.a.checktag,style:{borderStyle:"dashed"},onClick:function(){return e.showModal(1)}},w.a.createElement(T.a,null)," 新建目的地"),this.state.tagsFromServer.map(function(t){return w.a.createElement(q,{className:P.a.checktag,key:t.key,checked:String(r).indexOf(t.name)>-1,onChange:function(a){return e.handleChangeTarget(t.name,a,1)}},w.a.createElement(n.a,{style:{width:39,height:39,float:"left",marginTop:10},src:1==t.type?A.a:2==t.type?R.a:3==t.type?M.a:K.a}),"  ",w.a.createElement("span",{title:t.name},t.name.length>8?t.name.substring(0,8)+"...":t.name),w.a.createElement("a",{className:P.a.detailBtn,onClick:function(a){return e.detailvisible(t,a)}},"详情  "))})),this.state.visibleTarget?w.a.createElement(F,{wrappedComponentRef:this.saveFormRef,visible:this.state.visibleTarget,ifSourcetype:this.state.ifSourcetype,onCancel:this.handleCancel,onCreate:function(){return e.handleCreate()}}):null)))}}]),a}(k.PureComponent);t.a=z}).call(this,a("yLpj"))},obZn:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(global){var antd_es_button_style__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("+L6B"),antd_es_button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2/Rp"),antd_es_message_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("miYZ"),antd_es_message__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("tsqr"),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("2Taf"),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4__),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("vZ4D"),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5__),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("l4Ni"),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ujKo"),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("MhPg"),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8__),antd_es_steps_style__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("FJo9"),antd_es_steps__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("L41K"),antd_es_modal_style__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2qtc"),antd_es_modal__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("kLXV"),react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_13__),_busCreat_less__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("5ZHM"),_busCreat_less__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_busCreat_less__WEBPACK_IMPORTED_MODULE_14__),_step1__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("gxWv"),_step2__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("Tkb3"),_step3__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("bhxe"),axios__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("vDqi"),axios__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_18__),_pages_config__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("kQFk"),confirm=antd_es_modal__WEBPACK_IMPORTED_MODULE_12__.a.confirm,Step=antd_es_steps__WEBPACK_IMPORTED_MODULE_10__.a.Step;function changeURLPar(uri,par,par_value){var pattern=par+"=([^&]*)",replaceText=par+"="+par_value;if(uri.match(pattern)){var tmp="/\\"+par+"=[^&]*/";return tmp=uri.replace(eval(tmp),replaceText),tmp}return uri.match("[?]")?uri+"&"+replaceText:uri+"?"+replaceText}var BusCreat=function(e){function t(){var e;return G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default()(this,t),(e=G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this,G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(t).apply(this,arguments))).state={current:3==localStorage.getItem("role_id")?1:0,job_id:e.props.location.query.n,job_name:"",source_name:"",dest_name:""},e.nextStep=function(){var t=e.state.current+1;e.setState({current:t})},e.prev=function(){var t=e.state.current-1;e.setState({current:t})},e.creatbus=function(t,a,n,s,r){0==t?e.setState({job_name:a.target.value}):1==t?e.setState({source_name:a}):2==t?e.setState({dest_name:a}):3==t&&e.setState({job_name:a})},e.onRef=function(t){e.step2=t},e}return G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_8___default()(t,e),G_test1_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_5___default()(t,[{key:"showConfirm",value:function(){var e=this;confirm({title:"确定创建或保存该任务及配置吗?",content:"修改，将以最新一次配置内容为准！",okText:"确认",cancelText:"取消",onOk:function(){return e.next()},onCancel:function(){}})}},{key:"next",value:function(){this.state.current;0==this.state.current&&this.firstSave(),1==this.state.current&&this.secondSave()}},{key:"firstSave",value:function(){var e=this;if(""!=this.state.job_name&&""!=this.state.source_name&&""!=this.state.dest_name){var t=global.constants.httpType+global.constants.website+"/sys_jobrela/add_jobrela/",a={job_name:this.state.job_name,source_name:this.state.source_name,dest_name:this.state.dest_name};void 0!=location.search.substring(1).split("=")[1]&&(t=global.constants.httpType+global.constants.website+"/sys_jobrela/edit_jobrela/",a={id:location.search.substring(1).split("=")[1],job_name:this.state.job_name,source_name:this.state.source_name,dest_name:this.state.dest_name}),axios__WEBPACK_IMPORTED_MODULE_18___default()({method:"post",url:t,data:a,headers:{authToken:localStorage.getItem("authToken")}}).then(function(t){if("401"==t.data.status&&(window.location.href="/user"),1==t.data.status){if(t.data.message&&"修改成功"==t.data.message){antd_es_message__WEBPACK_IMPORTED_MODULE_3__.a.success(t.data.message);var a=e.state.current+1;return void e.setState({current:a})}antd_es_message__WEBPACK_IMPORTED_MODULE_3__.a.success("创建成功"),e.setState({job_id:t.data.data.id});var n=t.data.data.id,s=changeURLPar(window.location.href,"n",n);window.history.pushState(null,null,s);var r=e.state.current+1;e.setState({current:r})}else antd_es_message__WEBPACK_IMPORTED_MODULE_3__.a.error(t.data.message)}).catch(function(e){})}else antd_es_message__WEBPACK_IMPORTED_MODULE_3__.a.error("请输入任务名、选择数据源、选择目的地")}},{key:"secondSave",value:function(){this.step2.baseSave()}},{key:"render",value:function(){var e=this,t=this.state.current,a={job_name:this.state.job_name},n=[{title:"创建任务",content:react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(_step1__WEBPACK_IMPORTED_MODULE_15__.a,{tt:this.creatbus,input:a,id:this.state.job_id})},{title:"配置",content:react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(_step2__WEBPACK_IMPORTED_MODULE_16__.a,{tt:this.creatbus,nextStep:this.nextStep,onRef:this.onRef.bind(this),id:this.state.job_id})},{title:"设置",content:react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(_step3__WEBPACK_IMPORTED_MODULE_17__.a,{tt:function(){return e.prev()},id:this.state.job_id})}];return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("div",{className:_busCreat_less__WEBPACK_IMPORTED_MODULE_14___default.a.firstStep,style:{width:"100%"}},react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(antd_es_steps__WEBPACK_IMPORTED_MODULE_10__.a,{current:t},n.map(function(e){return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(Step,{key:e.title,title:e.title,style:{top:10,fontSize:15,fontWeight:600}})})),react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("div",{className:_busCreat_less__WEBPACK_IMPORTED_MODULE_14___default.a.connent},n[t].content),react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("div",{className:"steps-action",style:{width:"92%",margin:"0 auto",marginBottom:20,overflow:"hidden"}},t<n.length-1&&react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_1__.a,{type:"primary",id:"nextBtn",onClick:function(){return e.showConfirm()},style:{float:"right"},className:"nextBtn"},"下一步"),t>0&&react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_1__.a,{style:{marginRight:8,float:"right"},onClick:function(){return e.prev()},disabled:1==t&&3==localStorage.getItem("role_id")},"上一步")))}}]),t}(react__WEBPACK_IMPORTED_MODULE_13__.PureComponent);__webpack_exports__.default=BusCreat}.call(this,__webpack_require__("yLpj"))}}]);