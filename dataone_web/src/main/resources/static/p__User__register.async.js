(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"A9/U":function(e,t,a){"use strict";a.r(t),function(e){a("IzEo");var n,i=a("bx4M"),r=(a("Pwec"),a("CtXQ")),o=a("eHn4"),s=a.n(o),l=(a("miYZ"),a("tsqr")),c=a("2Taf"),m=a.n(c),d=a("vZ4D"),u=a.n(d),h=a("l4Ni"),p=a.n(h),g=a("ujKo"),f=a.n(g),y=a("MhPg"),v=a.n(y),w=(a("y8nQ"),a("Vl3Y")),b=(a("aHsQ"),a("sGsY")),E=a("q1tI"),k=a.n(E),S=a("vDqi"),x=a.n(S),A=a("jHKv"),C=(a("kQFk"),a("QBZU")),B=a("w2qy"),N=a.n(B),F=a("M0pj"),q=a.n(F),H=C.a.UserName,z=C.a.Password,D=C.a.Submit,j=b.a.Countdown,M=w.a.create()(n=function(t){function a(t){var n;return m()(this,a),(n=p()(this,f()(a).call(this,t))).handleSubmit1=function(t,a){if(!t){var i={authCode:a.verify,email:a.email};x()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_user/codeEquals/",data:A.a.Amap(i)}).then(function(e){1==e.data.status?n.setState({changeNext:!1}):l.a.error(e.data.message)}).catch(function(e){})}},n.handleSubmit2=function(t,a){if(!t){if(a.password1!=a.password2)return void l.a.error("密码不一致，请重新输入");var i={password:a.password1,email:n.state.email};x()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_user/editPasswordByEmail/",data:A.a.Amap(i)}).then(function(e){1==e.data.status?(l.a.success("修改成功"),setInterval(function(){window.location.href="/user/login"},3)):l.a.error(e.data.message)}).catch(function(e){})}},n.getverification=function(){if(""!=n.state.email){var t={email:n.state.email};x()({method:"post",url:e.constants.httpType+e.constants.website+"/sys_user/sendEmail/",data:A.a.Amap(t)}).then(function(e){1==e.data.status?(n.setState({verification:!1,deadline:Date.now()+6e4}),l.a.success("验证码已发送至您的邮箱，请到邮箱中获取")):l.a.error(e.data.message)}).catch(function(e){})}else l.a.error("请输入邮箱或用户名")},n.onFinish=function(){n.setState({verification:!0,reload:!1})},n.onChangetargete=function(e,t){""==t.target.value?n.setState({color:!1}):n.setState({color:!0}),1==e?n.setState({email:t.target.value}):2==e&&(n.setState({verify:t.target.value}),n.setState({color:!0}))},n.preback=function(){window.location.href="/user/login"},n.state={url:"",verification:!0,changeNext:!0,email:"",deadline:Date.now()+6e4,reload:!0,msg:"",color:!1},n}return v()(a,t),u()(a,[{key:"componentDidMount",value:function(){this.setState({reload:!0})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.login,t.submitting);t.form.getFieldDecorator;return k.a.createElement("div",{className:q.a.container},k.a.createElement("div",{className:q.a.registerHeader},k.a.createElement("ul",null,k.a.createElement("li",null),k.a.createElement("li",null,"账号设置"))),k.a.createElement(i.a,{title:this.state.changeNext?"找回密码":"修改密码",bordered:!1,style:{position:"relative",width:"80%",height:630,margin:"0 auto",background:"#fff",marginTop:30}},k.a.createElement("div",{className:N.a.main,style:{top:"calc(50% - 120px)",position:"fixed",left:"calc(50% - 150px)",width:300}},k.a.createElement("div",{style:{display:this.state.changeNext?"inline-block":"none"}},k.a.createElement(C.a,{onSubmit:this.handleSubmit1,ref:function(t){e.loginForm=t},className:N.a.LoginBox},k.a.createElement(H,s()({autoComplete:"off",style:{ellipsis:!0},getfielddecorator:this.state.email,onChange:function(t){return e.onChangetargete(1,t)},name:"email",placeholder:"请输入用户名/邮箱"},"style",{background:"none",width:"300px",marginBottom:10})),k.a.createElement(H,{rules:[{required:!0,message:"请输入验证码"}],suffix:k.a.createElement("div",null,k.a.createElement("a",{type:"primary",onClick:this.state.color?this.getverification:null,style:{float:"right",width:70,padding:0,textAlign:"center",color:this.state.color?"#4C65AE":"#a7abb9",height:40,lineHeight:"40px",display:this.state.verification?"block":"none"}},this.state.reload?"获取验证码":"重新发送"),k.a.createElement(j,{style:{float:"right",width:120,height:40,lineHeight:"40px",textAlign:"center",display:this.state.verification?"none":"block",cursor:"pointer"},format:"重新发送（s秒）",value:0==this.state.verification?this.state.deadline:null,onFinish:this.onFinish})),getfielddecorator:this.state.verify,prefix:k.a.createElement(r.a,{type:"layout"}),onPressEnter:function(){return e.loginForm.validateFields(e.handleSubmit1)},autoComplete:"off",onChange:function(t){return e.onChangetargete(2,t)},name:"verify",placeholder:"请输入验证码",style:{background:"none",marginBottom:10}}),k.a.createElement("span",{style:{color:"#A7ABB9",fontSize:12,letterSpacing:1,marginBottom:20,display:"block"}},"验证码将会发送到您的注册邮箱"),k.a.createElement(D,{loading:a},"下一步"),k.a.createElement("span",{onClick:this.preback,style:{color:"#A7ABB9",fontSize:12,letterSpacing:1,display:"block",margin:"0 auto",width:120,cursor:"pointer"}},k.a.createElement(r.a,{type:"rollback",style:{marginRight:20}}),"返回登陆注册"))),k.a.createElement("div",{style:{display:this.state.changeNext?"none":"inline-block",width:300}},k.a.createElement(C.a,{onSubmit:this.handleSubmit2,ref:function(t){e.loginForm=t}},k.a.createElement(z,{name:"password1",placeholder:"请输入新密码",rules:[{required:!0,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/,message:"请输入正确格式的密码（长度不小于8位，不大于20位，包含至少一位大写字母，一位小写字母）!",min:8,max:20}],style:{marginBottom:10}}),k.a.createElement(z,{name:"password2",placeholder:"请再次输入新密码",rules:[{required:!0,pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/,message:"请输入正确格式的密码（长度不小于8位，不大于20位，包含至少一位大写字母，一位小写字母）!",min:8,max:20}],style:{marginBottom:10}}),k.a.createElement(D,{loading:a},"完成"),k.a.createElement("span",{onClick:this.preback,style:{color:"#A7ABB9",fontSize:12,letterSpacing:1,display:"block",margin:"0 auto",width:120,cursor:"pointer"}},k.a.createElement(r.a,{type:"rollback",style:{marginRight:20}}),"返回登陆注册"))))))}}]),a}(E.Component))||n;t.default=M}.call(this,a("yLpj"))},M0pj:function(e,t,a){e.exports={container:"antd-pro-pages-user-register-container",registerHeader:"antd-pro-pages-user-register-registerHeader"}}}]);